!function(){function e(e,t){return t>e?-1:e>t?1:e>=t?0:0/0}function t(e){return null!=e&&!isNaN(e)}function n(e){return{left:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);i>r;){var s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);i>r;){var s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}function r(e){return e.length}function i(e){for(var t=1;e*t%1;)t*=10;return t}function s(e,t){try{for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}catch(r){e.prototype=t}}function o(){}function u(e){return ou+e in this}function a(e){return e=ou+e,e in this&&delete this[e]}function f(){var e=[];return this.forEach(function(t){e.push(t)}),e}function l(){var e=0;for(var t in this)t.charCodeAt(0)===uu&&++e;return e}function c(){for(var e in this)if(e.charCodeAt(0)===uu)return!1;return!0}function h(){}function p(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function d(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.substring(1);for(var n=0,r=au.length;r>n;++n){var i=au[n]+t;if(i in e)return i}}function v(){}function m(){}function g(e){function t(){for(var t,r=n,i=-1,s=r.length;++i<s;)(t=r[i].on)&&t.apply(this,arguments);return e}var n=[],r=new o;return t.on=function(t,i){var s,o=r.get(t);return arguments.length<2?o&&o.on:(o&&(o.on=null,n=n.slice(0,s=n.indexOf(o)).concat(n.slice(s+1)),r.remove(t)),i&&n.push(r.set(t,{on:i})),e)},t}function y(){Xo.event.preventDefault()}function b(){for(var e,t=Xo.event;e=t.sourceEvent;)t=e;return t}function w(e){for(var t=new m,n=0,r=arguments.length;++n<r;)t[arguments[n]]=g(t);return t.of=function(n,r){return function(i){try{var s=i.sourceEvent=Xo.event;i.target=e,Xo.event=i,t[i.type].apply(n,r)}finally{Xo.event=s}}},t}function E(e){return lu(e,vu),e}function S(e){return"function"==typeof e?e:function(){return cu(e,this)}}function x(e){return"function"==typeof e?e:function(){return hu(e,this)}}function T(e,t){function n(){this.removeAttribute(e)}function r(){this.removeAttributeNS(e.space,e.local)}function i(){this.setAttribute(e,t)}function s(){this.setAttributeNS(e.space,e.local,t)}function o(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}function u(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}return e=Xo.ns.qualify(e),null==t?e.local?r:n:"function"==typeof t?e.local?u:o:e.local?s:i}function N(e){return e.trim().replace(/\s+/g," ")}function C(e){return new RegExp("(?:^|\\s+)"+Xo.requote(e)+"(?:\\s+|$)","g")}function k(e){return(e+"").trim().split(/^|\s+/)}function L(e,t){function n(){for(var n=-1;++n<i;)e[n](this,t)}function r(){for(var n=-1,r=t.apply(this,arguments);++n<i;)e[n](this,r)}e=k(e).map(A);var i=e.length;return"function"==typeof t?r:n}function A(e){var t=C(e);return function(n,r){if(i=n.classList)return r?i.add(e):i.remove(e);var i=n.getAttribute("class")||"";r?(t.lastIndex=0,t.test(i)||n.setAttribute("class",N(i+" "+e))):n.setAttribute("class",N(i.replace(t," ")))}}function O(e,t,n){function r(){this.style.removeProperty(e)}function i(){this.style.setProperty(e,t,n)}function s(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}return null==t?r:"function"==typeof t?s:i}function M(e,t){function n(){delete this[e]}function r(){this[e]=t}function i(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}return null==t?n:"function"==typeof t?i:r}function _(e){return"function"==typeof e?e:(e=Xo.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,e)}}function D(e){return{__data__:e}}function P(e){return function(){return du(this,e)}}function H(t){return arguments.length||(t=e),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function B(e,t){for(var n=0,r=e.length;r>n;n++)for(var i,s=e[n],o=0,u=s.length;u>o;o++)(i=s[o])&&t(i,o,n);return e}function j(e){return lu(e,gu),e}function F(e){var t,n;return function(r,i,s){var o,u=e[s].update,a=u.length;for(s!=n&&(n=s,t=0),i>=t&&(t=i+1);!(o=u[t])&&++t<a;);return o}}function I(){var e=this.__transition__;e&&++e.active}function q(e,t,n){function r(){var t=this[o];t&&(this.removeEventListener(e,t,t.$),delete this[o])}function i(){var i=a(t,$o(arguments));r.call(this),this.addEventListener(e,this[o]=i,i.$=n),i._=t}function s(){var t,n=new RegExp("^__on([^.]+)"+Xo.requote(e)+"$");for(var r in this)if(t=r.match(n)){var i=this[r];this.removeEventListener(t[1],i,i.$),delete this[r]}}var o="__on"+e,u=e.indexOf("."),a=R;u>0&&(e=e.substring(0,u));var f=bu.get(e);return f&&(e=f,a=U),u?t?i:r:t?v:s}function R(e,t){return function(n){var r=Xo.event;Xo.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{Xo.event=r}}}function U(e,t){var n=R(e,t);return function(e){var t=this,r=e.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||n.call(t,e)}}function z(){var e=".dragsuppress-"+ ++Eu,t="click"+e,n=Xo.select(Qo).on("touchmove"+e,y).on("dragstart"+e,y).on("selectstart"+e,y);if(wu){var r=Ko.style,i=r[wu];r[wu]="none"}return function(s){function o(){n.on(t,null)}n.on(e,null),wu&&(r[wu]=i),s&&(n.on(t,function(){y(),o()},!0),setTimeout(o,0))}}function W(e,t){t.changedTouches&&(t=t.changedTouches[0]);var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();if(0>Su&&(Qo.scrollX||Qo.scrollY)){n=Xo.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var i=n[0][0].getScreenCTM();Su=!(i.f||i.e),n.remove()}return Su?(r.x=t.pageX,r.y=t.pageY):(r.x=t.clientX,r.y=t.clientY),r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}function X(){return Xo.event.changedTouches[0].identifier}function V(){return Xo.event.target}function $(){return Qo}function J(e){return e>0?1:0>e?-1:0}function K(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function Q(e){return e>1?0:-1>e?xu:Math.acos(e)}function G(e){return e>1?Nu:-1>e?-Nu:Math.asin(e)}function Y(e){return((e=Math.exp(e))-1/e)/2}function Z(e){return((e=Math.exp(e))+1/e)/2}function et(e){return((e=Math.exp(2*e))-1)/(e+1)}function tt(e){return(e=Math.sin(e/2))*e}function nt(){}function rt(e,t,n){return this instanceof rt?(this.h=+e,this.s=+t,void (this.l=+n)):arguments.length<2?e instanceof rt?new rt(e.h,e.s,e.l):gt(""+e,yt,rt):new rt(e,t,n)}function it(e,t,n){function r(e){return e>360?e-=360:0>e&&(e+=360),60>e?s+(o-s)*e/60:180>e?o:240>e?s+(o-s)*(240-e)/60:s}function i(e){return Math.round(255*r(e))}var s,o;return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:0>t?0:t>1?1:t,n=0>n?0:n>1?1:n,o=.5>=n?n*(1+t):n+t-n*t,s=2*n-o,new pt(i(e+120),i(e),i(e-120))}function st(e,t,n){return this instanceof st?(this.h=+e,this.c=+t,void (this.l=+n)):arguments.length<2?e instanceof st?new st(e.h,e.c,e.l):e instanceof ut?ft(e.l,e.a,e.b):ft((e=bt((e=Xo.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new st(e,t,n)}function ot(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new ut(n,Math.cos(e*=Lu)*t,Math.sin(e)*t)}function ut(e,t,n){return this instanceof ut?(this.l=+e,this.a=+t,void (this.b=+n)):arguments.length<2?e instanceof ut?new ut(e.l,e.a,e.b):e instanceof st?ot(e.l,e.c,e.h):bt((e=pt(e)).r,e.g,e.b):new ut(e,t,n)}function at(e,t,n){var r=(e+16)/116,i=r+t/500,s=r-n/200;return i=lt(i)*Iu,r=lt(r)*qu,s=lt(s)*Ru,new pt(ht(3.2404542*i-1.5371385*r-.4985314*s),ht(-.969266*i+1.8760108*r+.041556*s),ht(.0556434*i-.2040259*r+1.0572252*s))}function ft(e,t,n){return e>0?new st(Math.atan2(n,t)*Au,Math.sqrt(t*t+n*n),e):new st(0/0,0/0,e)}function lt(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function ct(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function ht(e){return Math.round(255*(.00304>=e?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function pt(e,t,n){return this instanceof pt?(this.r=~~e,this.g=~~t,void (this.b=~~n)):arguments.length<2?e instanceof pt?new pt(e.r,e.g,e.b):gt(""+e,pt,it):new pt(e,t,n)}function dt(e){return new pt(e>>16,255&e>>8,255&e)}function vt(e){return dt(e)+""}function mt(e){return 16>e?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function gt(e,t,n){var r,i,s,o=0,u=0,a=0;if(r=/([a-z]+)\((.*)\)/i.exec(e))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return t(Et(i[0]),Et(i[1]),Et(i[2]))}return(s=Wu.get(e))?t(s.r,s.g,s.b):(null==e||"#"!==e.charAt(0)||isNaN(s=parseInt(e.substring(1),16))||(4===e.length?(o=(3840&s)>>4,o=o>>4|o,u=240&s,u=u>>4|u,a=15&s,a=a<<4|a):7===e.length&&(o=(16711680&s)>>16,u=(65280&s)>>8,a=255&s)),t(o,u,a))}function yt(e,t,n){var r,i,s=Math.min(e/=255,t/=255,n/=255),o=Math.max(e,t,n),u=o-s,a=(o+s)/2;return u?(i=.5>a?u/(o+s):u/(2-o-s),r=e==o?(t-n)/u+(n>t?6:0):t==o?(n-e)/u+2:(e-t)/u+4,r*=60):(r=0/0,i=a>0&&1>a?0:r),new rt(r,i,a)}function bt(e,t,n){e=wt(e),t=wt(t),n=wt(n);var r=ct((.4124564*e+.3575761*t+.1804375*n)/Iu),i=ct((.2126729*e+.7151522*t+.072175*n)/qu),s=ct((.0193339*e+.119192*t+.9503041*n)/Ru);return ut(116*i-16,500*(r-i),200*(i-s))}function wt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Et(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}function St(e){return"function"==typeof e?e:function(){return e}}function xt(e){return e}function Tt(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),Nt(t,n,e,r)}}function Nt(e,t,n,r){function i(){var e,t=a.status;if(!t&&a.responseText||t>=200&&300>t||304===t){try{e=n.call(s,a)}catch(r){return o.error.call(s,r),void 0}o.load.call(s,e)}else o.error.call(s,a)}var s={},o=Xo.dispatch("beforesend","progress","load","error"),u={},a=new XMLHttpRequest,f=null;return!Qo.XDomainRequest||"withCredentials"in a||!/^(http(s)?:)?\/\//.test(e)||(a=new XDomainRequest),"onload"in a?a.onload=a.onerror=i:a.onreadystatechange=function(){a.readyState>3&&i()},a.onprogress=function(e){var t=Xo.event;Xo.event=e;try{o.progress.call(s,a)}finally{Xo.event=t}},s.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?u[e]:(null==t?delete u[e]:u[e]=t+"",s)},s.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",s):t},s.responseType=function(e){return arguments.length?(f=e,s):f},s.response=function(e){return n=e,s},["get","post"].forEach(function(e){s[e]=function(){return s.send.apply(s,[e].concat($o(arguments)))}}),s.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),a.open(n,e,!0),null==t||"accept"in u||(u.accept=t+",*/*"),a.setRequestHeader)for(var l in u)a.setRequestHeader(l,u[l]);return null!=t&&a.overrideMimeType&&a.overrideMimeType(t),null!=f&&(a.responseType=f),null!=i&&s.on("error",i).on("load",function(e){i(null,e)}),o.beforesend.call(s,a),a.send(null==r?null:r),s},s.abort=function(){return a.abort(),s},Xo.rebind(s,o,"on"),null==r?s:s.get(Ct(r))}function Ct(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}function kt(){var e=Lt(),t=At()-e;t>24?(isFinite(t)&&(clearTimeout(Ju),Ju=setTimeout(kt,t)),$u=0):($u=1,Qu(kt))}function Lt(){var e=Date.now();for(Ku=Xu;Ku;)e>=Ku.t&&(Ku.f=Ku.c(e-Ku.t)),Ku=Ku.n;return e}function At(){for(var e,t=Xu,n=1/0;t;)t.f?t=e?e.n=t.n:Xu=t.n:(t.t<n&&(n=t.t),t=(e=t).n);return Vu=e,n}function Ot(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function Mt(e,t){var n=Math.pow(10,3*su(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function _t(e){var t=e.decimal,n=e.thousands,r=e.grouping,i=e.currency,s=r?function(e){for(var t=e.length,i=[],s=0,o=r[0];t>0&&o>0;)i.push(e.substring(t-=o,t+o)),o=r[s=(s+1)%r.length];return i.reverse().join(n)}:xt;return function(e){var n=Yu.exec(e),r=n[1]||" ",o=n[2]||">",u=n[3]||"",a=n[4]||"",f=n[5],l=+n[6],c=n[7],h=n[8],p=n[9],d=1,v="",m="",g=!1;switch(h&&(h=+h.substring(1)),(f||"0"===r&&"="===o)&&(f=r="0",o="=",c&&(l-=Math.floor((l-1)/4))),p){case"n":c=!0,p="g";break;case"%":d=100,m="%",p="f";break;case"p":d=100,m="%",p="r";break;case"b":case"o":case"x":case"X":"#"===a&&(v="0"+p.toLowerCase());case"c":case"d":g=!0,h=0;break;case"s":d=-1,p="r"}"$"===a&&(v=i[0],m=i[1]),"r"!=p||h||(p="g"),null!=h&&("g"==p?h=Math.max(1,Math.min(21,h)):("e"==p||"f"==p)&&(h=Math.max(0,Math.min(20,h)))),p=Zu.get(p)||Dt;var y=f&&c;return function(e){var n=m;if(g&&e%1)return"";var i=0>e||0===e&&0>1/e?(e=-e,"-"):u;if(0>d){var a=Xo.formatPrefix(e,h);e=a.scale(e),n=a.symbol+m}else e*=d;e=p(e,h);var b=e.lastIndexOf("."),w=0>b?e:e.substring(0,b),E=0>b?"":t+e.substring(b+1);!f&&c&&(w=s(w));var S=v.length+w.length+E.length+(y?0:i.length),x=l>S?(new Array(S=l-S+1)).join(r):"";return y&&(w=s(x+w)),i+=v,e=w+E,("<"===o?i+e+x:">"===o?x+i+e:"^"===o?x.substring(0,S>>=1)+i+e+x.substring(S):i+(y?e:x+e))+n}}}function Dt(e){return e+""}function Pt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ht(e,t,n){function r(t){var n=e(t),r=s(n,1);return r-t>t-n?n:r}function i(n){return t(n=e(new ta(n-1)),1),n}function s(e,n){return t(e=new ta(+e),n),e}function o(e,r,s){var o=i(e),u=[];if(s>1)for(;r>o;)n(o)%s||u.push(new Date(+o)),t(o,1);else for(;r>o;)u.push(new Date(+o)),t(o,1);return u}function u(e,t,n){try{ta=Pt;var r=new Pt;return r._=e,o(r,t,n)}finally{ta=Date}}e.floor=e,e.round=r,e.ceil=i,e.offset=s,e.range=o;var a=e.utc=Bt(e);return a.floor=a,a.round=Bt(r),a.ceil=Bt(i),a.offset=Bt(s),a.range=u,e}function Bt(e){return function(t,n){try{ta=Pt;var r=new Pt;return r._=t,e(r,n)._}finally{ta=Date}}}function jt(e){function t(e){function t(t){for(var n,i,s,o=[],u=-1,a=0;++u<r;)37===e.charCodeAt(u)&&(o.push(e.substring(a,u)),null!=(i=ra[n=e.charAt(++u)])&&(n=e.charAt(++u)),(s=L[n])&&(n=s(t,null==i?"e"===n?" ":"0":i)),o.push(n),a=u+1);return o.push(e.substring(a,u)),o.join("")}var r=e.length;return t.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=n(r,e,t,0);if(i!=t.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var s=null!=r.Z&&ta!==Pt,o=new(s?Pt:ta);return"j"in r?o.setFullYear(r.y,0,r.j):"w"in r&&("W"in r||"U"in r)?(o.setFullYear(r.y,0,1),o.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(o.getDay()+5)%7:r.w+7*r.U-(o.getDay()+6)%7)):o.setFullYear(r.y,r.m,r.d),o.setHours(r.H+Math.floor(r.Z/100),r.M+r.Z%100,r.S,r.L),s?o._:o},t.toString=function(){return e},t}function n(e,t,n,r){for(var i,s,o,u=0,a=t.length,f=n.length;a>u;){if(r>=f)return-1;if(i=t.charCodeAt(u++),37===i){if(o=t.charAt(u++),s=A[o in ra?t.charAt(u++):o],!s||(r=s(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function r(e,t,n){S.lastIndex=0;var r=S.exec(t.substring(n));return r?(e.w=x.get(r[0].toLowerCase()),n+r[0].length):-1}function i(e,t,n){w.lastIndex=0;var r=w.exec(t.substring(n));return r?(e.w=E.get(r[0].toLowerCase()),n+r[0].length):-1}function s(e,t,n){C.lastIndex=0;var r=C.exec(t.substring(n));return r?(e.m=k.get(r[0].toLowerCase()),n+r[0].length):-1}function o(e,t,n){T.lastIndex=0;var r=T.exec(t.substring(n));return r?(e.m=N.get(r[0].toLowerCase()),n+r[0].length):-1}function u(e,t,r){return n(e,L.c.toString(),t,r)}function a(e,t,r){return n(e,L.x.toString(),t,r)}function f(e,t,r){return n(e,L.X.toString(),t,r)}function l(e,t,n){var r=b.get(t.substring(n,n+=2).toLowerCase());return null==r?-1:(e.p=r,n)}var c=e.dateTime,h=e.date,p=e.time,d=e.periods,v=e.days,m=e.shortDays,g=e.months,y=e.shortMonths;t.utc=function(e){function n(e){try{ta=Pt;var t=new ta;return t._=e,r(t)}finally{ta=Date}}var r=t(e);return n.parse=function(e){try{ta=Pt;var t=r.parse(e);return t&&t._}finally{ta=Date}},n.toString=r.toString,n},t.multi=t.utc.multi=rn;var b=Xo.map(),w=It(v),E=qt(v),S=It(m),x=qt(m),T=It(g),N=qt(g),C=It(y),k=qt(y);d.forEach(function(e,t){b.set(e.toLowerCase(),t)});var L={a:function(e){return m[e.getDay()]},A:function(e){return v[e.getDay()]},b:function(e){return y[e.getMonth()]},B:function(e){return g[e.getMonth()]},c:t(c),d:function(e,t){return Ft(e.getDate(),t,2)},e:function(e,t){return Ft(e.getDate(),t,2)},H:function(e,t){return Ft(e.getHours(),t,2)},I:function(e,t){return Ft(e.getHours()%12||12,t,2)},j:function(e,t){return Ft(1+ea.dayOfYear(e),t,3)},L:function(e,t){return Ft(e.getMilliseconds(),t,3)},m:function(e,t){return Ft(e.getMonth()+1,t,2)},M:function(e,t){return Ft(e.getMinutes(),t,2)},p:function(e){return d[+(e.getHours()>=12)]},S:function(e,t){return Ft(e.getSeconds(),t,2)},U:function(e,t){return Ft(ea.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Ft(ea.mondayOfYear(e),t,2)},x:t(h),X:t(p),y:function(e,t){return Ft(e.getFullYear()%100,t,2)},Y:function(e,t){return Ft(e.getFullYear()%1e4,t,4)},Z:tn,"%":function(){return"%"}},A={a:r,A:i,b:s,B:o,c:u,d:Kt,e:Kt,H:Gt,I:Gt,j:Qt,L:en,m:Jt,M:Yt,p:l,S:Zt,U:Ut,w:Rt,W:zt,x:a,X:f,y:Xt,Y:Wt,Z:Vt,"%":nn};return t}function Ft(e,t,n){var r=0>e?"-":"",i=(r?-e:e)+"",s=i.length;return r+(n>s?(new Array(n-s+1)).join(t)+i:i)}function It(e){return new RegExp("^(?:"+e.map(Xo.requote).join("|")+")","i")}function qt(e){for(var t=new o,n=-1,r=e.length;++n<r;)t.set(e[n].toLowerCase(),n);return t}function Rt(e,t,n){ia.lastIndex=0;var r=ia.exec(t.substring(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Ut(e,t,n){ia.lastIndex=0;var r=ia.exec(t.substring(n));return r?(e.U=+r[0],n+r[0].length):-1}function zt(e,t,n){ia.lastIndex=0;var r=ia.exec(t.substring(n));return r?(e.W=+r[0],n+r[0].length):-1}function Wt(e,t,n){ia.lastIndex=0;var r=ia.exec(t.substring(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Xt(e,t,n){ia.lastIndex=0;var r=ia.exec(t.substring(n,n+2));return r?(e.y=$t(+r[0]),n+r[0].length):-1}function Vt(e,t,n){return/^[+-]\d{4}$/.test(t=t.substring(n,n+5))?(e.Z=-t,n+5):-1}function $t(e){return e+(e>68?1900:2e3)}function Jt(e,t,n){ia.lastIndex=0;var r=ia.exec(t.substring(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Kt(e,t,n){ia.lastIndex=0;var r=ia.exec(t.substring(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Qt(e,t,n){ia.lastIndex=0;var r=ia.exec(t.substring(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function Gt(e,t,n){ia.lastIndex=0;var r=ia.exec(t.substring(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Yt(e,t,n){ia.lastIndex=0;var r=ia.exec(t.substring(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Zt(e,t,n){ia.lastIndex=0;var r=ia.exec(t.substring(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function en(e,t,n){ia.lastIndex=0;var r=ia.exec(t.substring(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function tn(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=~~(su(t)/60),i=su(t)%60;return n+Ft(r,"0",2)+Ft(i,"0",2)}function nn(e,t,n){sa.lastIndex=0;var r=sa.exec(t.substring(n,n+1));return r?n+r[0].length:-1}function rn(e){for(var t=e.length,n=-1;++n<t;)e[n][0]=this(e[n][0]);return function(t){for(var n=0,r=e[n];!r[1](t);)r=e[++n];return r[0](t)}}function sn(){}function on(e,t,n){var r=n.s=e+t,i=r-e,s=r-i;n.t=e-s+(t-i)}function un(e,t){e&&fa.hasOwnProperty(e.type)&&fa[e.type](e,t)}function an(e,t,n){var r,i=-1,s=e.length-n;for(t.lineStart();++i<s;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function fn(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)an(e[n],t,1);t.polygonEnd()}function ln(){function e(e,t){e*=Lu,t=t*Lu/2+xu/4;var n=e-r,o=n>=0?1:-1,u=o*n,a=Math.cos(t),f=Math.sin(t),l=s*f,c=i*a+l*Math.cos(u),h=l*o*Math.sin(u);ca.add(Math.atan2(h,c)),r=e,i=a,s=f}var t,n,r,i,s;ha.point=function(o,u){ha.point=e,r=(t=o)*Lu,i=Math.cos(u=(n=u)*Lu/2+xu/4),s=Math.sin(u)},ha.lineEnd=function(){e(t,n)}}function cn(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function hn(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function pn(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function dn(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function vn(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function mn(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function gn(e){return[Math.atan2(e[1],e[0]),G(e[2])]}function yn(e,t){return su(e[0]-t[0])<Cu&&su(e[1]-t[1])<Cu}function bn(e,t){e*=Lu;var n=Math.cos(t*=Lu);wn(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function wn(e,t,n){++pa,va+=(e-va)/pa,ma+=(t-ma)/pa,ga+=(n-ga)/pa}function En(){function e(e,i){e*=Lu;var s=Math.cos(i*=Lu),o=s*Math.cos(e),u=s*Math.sin(e),a=Math.sin(i),f=Math.atan2(Math.sqrt((f=n*a-r*u)*f+(f=r*o-t*a)*f+(f=t*u-n*o)*f),t*o+n*u+r*a);da+=f,ya+=f*(t+(t=o)),ba+=f*(n+(n=u)),wa+=f*(r+(r=a)),wn(t,n,r)}var t,n,r;Ta.point=function(i,s){i*=Lu;var o=Math.cos(s*=Lu);t=o*Math.cos(i),n=o*Math.sin(i),r=Math.sin(s),Ta.point=e,wn(t,n,r)}}function Sn(){Ta.point=bn}function xn(){function e(e,t){e*=Lu;var n=Math.cos(t*=Lu),o=n*Math.cos(e),u=n*Math.sin(e),a=Math.sin(t),f=i*a-s*u,l=s*o-r*a,c=r*u-i*o,h=Math.sqrt(f*f+l*l+c*c),p=r*o+i*u+s*a,d=h&&-Q(p)/h,v=Math.atan2(h,p);Ea+=d*f,Sa+=d*l,xa+=d*c,da+=v,ya+=v*(r+(r=o)),ba+=v*(i+(i=u)),wa+=v*(s+(s=a)),wn(r,i,s)}var t,n,r,i,s;Ta.point=function(o,u){t=o,n=u,Ta.point=e,o*=Lu;var a=Math.cos(u*=Lu);r=a*Math.cos(o),i=a*Math.sin(o),s=Math.sin(u),wn(r,i,s)},Ta.lineEnd=function(){e(t,n),Ta.lineEnd=Sn,Ta.point=bn}}function Tn(){return!0}function Nn(e,t,n,r,i){var s=[],o=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],r=e[t];if(yn(n,r)){i.lineStart();for(var u=0;t>u;++u)i.point((n=e[u])[0],n[1]);return i.lineEnd(),void 0}var a=new kn(n,e,null,!0),f=new kn(n,null,a,!1);a.o=f,s.push(a),o.push(f),a=new kn(r,e,null,!1),f=new kn(r,null,a,!0),a.o=f,s.push(a),o.push(f)}}),o.sort(t),Cn(s),Cn(o),s.length){for(var u=0,a=n,f=o.length;f>u;++u)o[u].e=a=!a;for(var l,c,h=s[0];;){for(var p=h,d=!0;p.v;)if((p=p.n)===h)return;l=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(var u=0,f=l.length;f>u;++u)i.point((c=l[u])[0],c[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(d){l=p.p.z;for(var u=l.length-1;u>=0;--u)i.point((c=l[u])[0],c[1])}else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,l=p.z,d=!d}while(!p.v);i.lineEnd()}}}function Cn(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function kn(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Ln(e,t,n,r){return function(i,s){function o(t,n){var r=i(t,n);e(t=r[0],n=r[1])&&s.point(t,n)}function u(e,t){var n=i(e,t);m.point(n[0],n[1])}function a(){y.point=u,m.lineStart()}function f(){y.point=o,m.lineEnd()}function l(e,t){v.push([e,t]);var n=i(e,t);w.point(n[0],n[1])}function c(){w.lineStart(),v=[]}function h(){l(v[0][0],v[0][1]),w.lineEnd();var e,t=w.clean(),n=b.buffer(),r=n.length;if(v.pop(),d.push(v),v=null,r)if(1&t){e=n[0];var i,r=e.length-1,o=-1;if(r>0){for(E||(s.polygonStart(),E=!0),s.lineStart();++o<r;)s.point((i=e[o])[0],i[1]);s.lineEnd()}}else r>1&&2&t&&n.push(n.pop().concat(n.shift())),p.push(n.filter(An))}var p,d,v,m=t(s),g=i.invert(r[0],r[1]),y={point:o,lineStart:a,lineEnd:f,polygonStart:function(){y.point=l,y.lineStart=c,y.lineEnd=h,p=[],d=[]},polygonEnd:function(){y.point=o,y.lineStart=a,y.lineEnd=f,p=Xo.merge(p);var e=_n(g,d);p.length?(E||(s.polygonStart(),E=!0),Nn(p,Mn,e,n,s)):e&&(E||(s.polygonStart(),E=!0),s.lineStart(),n(null,null,1,s),s.lineEnd()),E&&(s.polygonEnd(),E=!1),p=d=null},sphere:function(){s.polygonStart(),s.lineStart(),n(null,null,1,s),s.lineEnd(),s.polygonEnd()}},b=On(),w=t(b),E=!1;return y}}function An(e){return e.length>1}function On(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:v,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function Mn(e,t){return((e=e.x)[0]<0?e[1]-Nu-Cu:Nu-e[1])-((t=t.x)[0]<0?t[1]-Nu-Cu:Nu-t[1])}function _n(e,t){var n=e[0],r=e[1],i=[Math.sin(n),-Math.cos(n),0],s=0,o=0;ca.reset();for(var u=0,a=t.length;a>u;++u){var f=t[u],l=f.length;if(l)for(var c=f[0],h=c[0],p=c[1]/2+xu/4,d=Math.sin(p),v=Math.cos(p),m=1;;){m===l&&(m=0),e=f[m];var g=e[0],y=e[1]/2+xu/4,b=Math.sin(y),w=Math.cos(y),E=g-h,S=E>=0?1:-1,x=S*E,T=x>xu,N=d*b;if(ca.add(Math.atan2(N*S*Math.sin(x),v*w+N*Math.cos(x))),s+=T?E+S*Tu:E,T^h>=n^g>=n){var C=pn(cn(c),cn(e));mn(C);var k=pn(i,C);mn(k);var L=(T^E>=0?-1:1)*G(k[2]);(r>L||r===L&&(C[0]||C[1]))&&(o+=T^E>=0?1:-1)}if(!(m++))break;h=g,d=b,v=w,c=e}}return(-Cu>s||Cu>s&&0>ca)^1&o}function Dn(e){var t,n=0/0,r=0/0,i=0/0;return{lineStart:function(){e.lineStart(),t=1},point:function(s,o){var u=s>0?xu:-xu,a=su(s-n);su(a-xu)<Cu?(e.point(n,r=(r+o)/2>0?Nu:-Nu),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(u,r),e.point(s,r),t=0):i!==u&&a>=xu&&(su(n-i)<Cu&&(n-=i*Cu),su(s-u)<Cu&&(s-=u*Cu),r=Pn(n,r,s,o),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(u,r),t=0),e.point(n=s,r=o),i=u},lineEnd:function(){e.lineEnd(),n=r=0/0},clean:function(){return 2-t}}}function Pn(e,t,n,r){var i,s,o=Math.sin(e-n);return su(o)>Cu?Math.atan((Math.sin(t)*(s=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(t))*Math.sin(e))/(i*s*o)):(t+r)/2}function Hn(e,t,n,r){var i;if(null==e)i=n*Nu,r.point(-xu,i),r.point(0,i),r.point(xu,i),r.point(xu,0),r.point(xu,-i),r.point(0,-i),r.point(-xu,-i),r.point(-xu,0),r.point(-xu,i);else if(su(e[0]-t[0])>Cu){var s=e[0]<t[0]?xu:-xu;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function Bn(e){function t(e,t){return Math.cos(e)*Math.cos(t)>s}function n(e){var n,s,a,f,l;return{lineStart:function(){f=a=!1,l=1},point:function(c,h){var p,d=[c,h],v=t(c,h),m=o?v?0:i(c,h):v?i(c+(0>c?xu:-xu),h):0;if(!n&&(f=a=v)&&e.lineStart(),v!==a&&(p=r(n,d),(yn(n,p)||yn(d,p))&&(d[0]+=Cu,d[1]+=Cu,v=t(d[0],d[1]))),v!==a)l=0,v?(e.lineStart(),p=r(d,n),e.point(p[0],p[1])):(p=r(n,d),e.point(p[0],p[1]),e.lineEnd()),n=p;else if(u&&n&&o^v){var g;m&s||!(g=r(d,n,!0))||(l=0,o?(e.lineStart(),e.point(g[0][0],g[0][1]),e.point(g[1][0],g[1][1]),e.lineEnd()):(e.point(g[1][0],g[1][1]),e.lineEnd(),e.lineStart(),e.point(g[0][0],g[0][1])))}!v||n&&yn(n,d)||e.point(d[0],d[1]),n=d,a=v,s=m},lineEnd:function(){a&&e.lineEnd(),n=null},clean:function(){return l|(f&&a)<<1}}}function r(e,t,n){var r=cn(e),i=cn(t),o=[1,0,0],u=pn(r,i),a=hn(u,u),f=u[0],l=a-f*f;if(!l)return!n&&e;var c=s*a/l,h=-s*f/l,p=pn(o,u),d=vn(o,c),v=vn(u,h);dn(d,v);var m=p,g=hn(d,m),y=hn(m,m),b=g*g-y*(hn(d,d)-1);if(!(0>b)){var w=Math.sqrt(b),E=vn(m,(-g-w)/y);if(dn(E,d),E=gn(E),!n)return E;var S,x=e[0],T=t[0],N=e[1],C=t[1];x>T&&(S=x,x=T,T=S);var k=T-x,L=su(k-xu)<Cu,A=L||Cu>k;if(!L&&N>C&&(S=N,N=C,C=S),A?L?N+C>0^E[1]<(su(E[0]-x)<Cu?N:C):N<=E[1]&&E[1]<=C:k>xu^(x<=E[0]&&E[0]<=T)){var O=vn(m,(-g+w)/y);return dn(O,d),[E,gn(O)]}}}function i(t,n){var r=o?e:xu-e,i=0;return-r>t?i|=1:t>r&&(i|=2),-r>n?i|=4:n>r&&(i|=8),i}var s=Math.cos(e),o=s>0,u=su(s)>Cu,a=lr(e,6*Lu);return Ln(t,n,a,o?[0,-e]:[-xu,e-xu])}function jn(e,t,n,r){return function(i){var s,o=i.a,u=i.b,a=o.x,f=o.y,l=u.x,c=u.y,h=0,p=1,d=l-a,v=c-f;if(s=e-a,d||!(s>0)){if(s/=d,0>d){if(h>s)return;p>s&&(p=s)}else if(d>0){if(s>p)return;s>h&&(h=s)}if(s=n-a,d||!(0>s)){if(s/=d,0>d){if(s>p)return;s>h&&(h=s)}else if(d>0){if(h>s)return;p>s&&(p=s)}if(s=t-f,v||!(s>0)){if(s/=v,0>v){if(h>s)return;p>s&&(p=s)}else if(v>0){if(s>p)return;s>h&&(h=s)}if(s=r-f,v||!(0>s)){if(s/=v,0>v){if(s>p)return;s>h&&(h=s)}else if(v>0){if(h>s)return;p>s&&(p=s)}return h>0&&(i.a={x:a+h*d,y:f+h*v}),1>p&&(i.b={x:a+p*d,y:f+p*v}),i}}}}}}function Fn(e,t,n,r){function i(r,i){return su(r[0]-e)<Cu?i>0?0:3:su(r[0]-n)<Cu?i>0?2:1:su(r[1]-t)<Cu?i>0?1:0:i>0?3:2}function s(e,t){return o(e.x,t.x)}function o(e,t){var n=i(e,1),r=i(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(u){function a(e){for(var t=0,n=m.length,r=e[1],i=0;n>i;++i)for(var s,o=1,u=m[i],a=u.length,f=u[0];a>o;++o)s=u[o],f[1]<=r?s[1]>r&&K(f,s,e)>0&&++t:s[1]<=r&&K(f,s,e)<0&&--t,f=s;return 0!==t}function f(s,u,a,f){var l=0,c=0;if(null==s||(l=i(s,a))!==(c=i(u,a))||o(s,u)<0^a>0){do f.point(0===l||3===l?e:n,l>1?r:t);while((l=(l+a+4)%4)!==c)}else f.point(u[0],u[1])}function l(i,s){return i>=e&&n>=i&&s>=t&&r>=s}function c(e,t){l(e,t)&&u.point(e,t)}function h(){A.point=d,m&&m.push(g=[]),T=!0,x=!1,E=S=0/0}function p(){v&&(d(y,b),w&&x&&k.rejoin(),v.push(k.buffer())),A.point=c,x&&u.lineEnd()}function d(e,t){e=Math.max(-Ca,Math.min(Ca,e)),t=Math.max(-Ca,Math.min(Ca,t));var n=l(e,t);if(m&&g.push([e,t]),T)y=e,b=t,w=n,T=!1,n&&(u.lineStart(),u.point(e,t));else if(n&&x)u.point(e,t);else{var r={a:{x:E,y:S},b:{x:e,y:t}};L(r)?(x||(u.lineStart(),u.point(r.a.x,r.a.y)),u.point(r.b.x,r.b.y),n||u.lineEnd(),N=!1):n&&(u.lineStart(),u.point(e,t),N=!1)}E=e,S=t,x=n}var v,m,g,y,b,w,E,S,x,T,N,C=u,k=On(),L=jn(e,t,n,r),A={point:c,lineStart:h,lineEnd:p,polygonStart:function(){u=k,v=[],m=[],N=!0},polygonEnd:function(){u=C,v=Xo.merge(v);var t=a([e,r]),n=N&&t,i=v.length;(n||i)&&(u.polygonStart(),n&&(u.lineStart(),f(null,null,1,u),u.lineEnd()),i&&Nn(v,s,t,f,u),u.polygonEnd()),v=m=g=null}};return A}}function In(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return n=t.invert(n,r),n&&e.invert(n[0],n[1])}),n}function qn(e){var t=0,n=xu/3,r=nr(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*xu/180,n=e[1]*xu/180):[180*(t/xu),180*(n/xu)]},i}function Rn(e,t){function n(e,t){var n=Math.sqrt(s-2*i*Math.sin(t))/i;return[n*Math.sin(e*=i),o-n*Math.cos(e)]}var r=Math.sin(e),i=(r+Math.sin(t))/2,s=1+r*(2*i-r),o=Math.sqrt(s)/i;return n.invert=function(e,t){var n=o-t;return[Math.atan2(e,n)/i,G((s-(e*e+n*n)*i*i)/(2*i))]},n}function Un(){function e(e,t){La+=i*e-r*t,r=e,i=t}var t,n,r,i;Da.point=function(s,o){Da.point=e,t=r=s,n=i=o},Da.lineEnd=function(){e(t,n)}}function zn(e,t){Aa>e&&(Aa=e),e>Ma&&(Ma=e),Oa>t&&(Oa=t),t>_a&&(_a=t)}function Wn(){function e(e,t){o.push("M",e,",",t,s)}function t(e,t){o.push("M",e,",",t),u.point=n}function n(e,t){o.push("L",e,",",t)}function r(){u.point=e}function i(){o.push("Z")}var s=Xn(4.5),o=[],u={point:e,lineStart:function(){u.point=t},lineEnd:r,polygonStart:function(){u.lineEnd=i},polygonEnd:function(){u.lineEnd=r,u.point=e},pointRadius:function(e){return s=Xn(e),u},result:function(){if(o.length){var e=o.join("");return o=[],e}}};return u}function Xn(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+ -2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Vn(e,t){va+=e,ma+=t,++ga}function $n(){function e(e,r){var i=e-t,s=r-n,o=Math.sqrt(i*i+s*s);ya+=o*(t+e)/2,ba+=o*(n+r)/2,wa+=o,Vn(t=e,n=r)}var t,n;Ha.point=function(r,i){Ha.point=e,Vn(t=r,n=i)}}function Jn(){Ha.point=Vn}function Kn(){function e(e,t){var n=e-r,s=t-i,o=Math.sqrt(n*n+s*s);ya+=o*(r+e)/2,ba+=o*(i+t)/2,wa+=o,o=i*e-r*t,Ea+=o*(r+e),Sa+=o*(i+t),xa+=3*o,Vn(r=e,i=t)}var t,n,r,i;Ha.point=function(s,o){Ha.point=e,Vn(t=r=s,n=i=o)},Ha.lineEnd=function(){e(t,n)}}function Qn(e){function t(t,n){e.moveTo(t,n),e.arc(t,n,o,0,Tu)}function n(t,n){e.moveTo(t,n),u.point=r}function r(t,n){e.lineTo(t,n)}function i(){u.point=t}function s(){e.closePath()}var o=4.5,u={point:t,lineStart:function(){u.point=n},lineEnd:i,polygonStart:function(){u.lineEnd=s},polygonEnd:function(){u.lineEnd=i,u.point=t},pointRadius:function(e){return o=e,u},result:v};return u}function Gn(e){function t(e){return(u?r:n)(e)}function n(t){return er(t,function(n,r){n=e(n,r),t.point(n[0],n[1])})}function r(t){function n(n,r){n=e(n,r),t.point(n[0],n[1])}function r(){b=0/0,T.point=s,t.lineStart()}function s(n,r){var s=cn([n,r]),o=e(n,r);i(b,w,y,E,S,x,b=o[0],w=o[1],y=n,E=s[0],S=s[1],x=s[2],u,t),t.point(b,w)}function o(){T.point=n,t.lineEnd()}function a(){r(),T.point=f,T.lineEnd=l}function f(e,t){s(c=e,h=t),p=b,d=w,v=E,m=S,g=x,T.point=s}function l(){i(b,w,y,E,S,x,p,d,c,v,m,g,u,t),T.lineEnd=o,o()}var c,h,p,d,v,m,g,y,b,w,E,S,x,T={point:n,lineStart:r,lineEnd:o,polygonStart:function(){t.polygonStart(),T.lineStart=a},polygonEnd:function(){t.polygonEnd(),T.lineStart=r}};return T}function i(t,n,r,u,a,f,l,c,h,p,d,v,m,g){var y=l-t,b=c-n,w=y*y+b*b;if(w>4*s&&m--){var E=u+p,S=a+d,x=f+v,T=Math.sqrt(E*E+S*S+x*x),N=Math.asin(x/=T),C=su(su(x)-1)<Cu||su(r-h)<Cu?(r+h)/2:Math.atan2(S,E),k=e(C,N),L=k[0],A=k[1],O=L-t,M=A-n,_=b*O-y*M;(_*_/w>s||su((y*O+b*M)/w-.5)>.3||o>u*p+a*d+f*v)&&(i(t,n,r,u,a,f,L,A,C,E/=T,S/=T,x,m,g),g.point(L,A),i(L,A,C,E,S,x,l,c,h,p,d,v,m,g))}}var s=.5,o=Math.cos(30*Lu),u=16;return t.precision=function(e){return arguments.length?(u=(s=e*e)>0&&16,t):Math.sqrt(s)},t}function Yn(e){var t=Gn(function(t,n){return e([t*Au,n*Au])});return function(e){return rr(t(e))}}function Zn(e){this.stream=e}function er(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function tr(e){return nr(function(){return e})()}function nr(e){function t(e){return e=u(e[0]*Lu,e[1]*Lu),[e[0]*h+a,f-e[1]*h]}function n(e){return e=u.invert((e[0]-a)/h,(f-e[1])/h),e&&[e[0]*Au,e[1]*Au]}function r(){u=In(o=or(g,y,b),s);var e=s(v,m);return a=p-e[0]*h,f=d+e[1]*h,i()}function i(){return l&&(l.valid=!1,l=null),t}var s,o,u,a,f,l,c=Gn(function(e,t){return e=s(e,t),[e[0]*h+a,f-e[1]*h]}),h=150,p=480,d=250,v=0,m=0,g=0,y=0,b=0,w=Na,E=xt,S=null,x=null;return t.stream=function(e){return l&&(l.valid=!1),l=rr(w(o,c(E(e)))),l.valid=!0,l},t.clipAngle=function(e){return arguments.length?(w=null==e?(S=e,Na):Bn((S=+e)*Lu),i()):S},t.clipExtent=function(e){return arguments.length?(x=e,E=e?Fn(e[0][0],e[0][1],e[1][0],e[1][1]):xt,i()):x},t.scale=function(e){return arguments.length?(h=+e,r()):h},t.translate=function(e){return arguments.length?(p=+e[0],d=+e[1],r()):[p,d]},t.center=function(e){return arguments.length?(v=e[0]%360*Lu,m=e[1]%360*Lu,r()):[v*Au,m*Au]},t.rotate=function(e){return arguments.length?(g=e[0]%360*Lu,y=e[1]%360*Lu,b=e.length>2?e[2]%360*Lu:0,r()):[g*Au,y*Au,b*Au]},Xo.rebind(t,c,"precision"),function(){return s=e.apply(this,arguments),t.invert=s.invert&&n,r()}}function rr(e){return er(e,function(t,n){e.point(t*Lu,n*Lu)})}function ir(e,t){return[e,t]}function sr(e,t){return[e>xu?e-Tu:-xu>e?e+Tu:e,t]}function or(e,t,n){return e?t||n?In(ar(e),fr(t,n)):ar(e):t||n?fr(t,n):sr}function ur(e){return function(t,n){return t+=e,[t>xu?t-Tu:-xu>t?t+Tu:t,n]}}function ar(e){var t=ur(e);return t.invert=ur(-e),t}function fr(e,t){function n(e,t){var n=Math.cos(t),u=Math.cos(e)*n,a=Math.sin(e)*n,f=Math.sin(t),l=f*r+u*i;return[Math.atan2(a*s-l*o,u*r-f*i),G(l*s+a*o)]}var r=Math.cos(e),i=Math.sin(e),s=Math.cos(t),o=Math.sin(t);return n.invert=function(e,t){var n=Math.cos(t),u=Math.cos(e)*n,a=Math.sin(e)*n,f=Math.sin(t),l=f*s-a*o;return[Math.atan2(a*s+f*o,u*r+l*i),G(l*r-u*i)]},n}function lr(e,t){var n=Math.cos(e),r=Math.sin(e);return function(i,s,o,u){var a=o*t;null!=i?(i=cr(n,i),s=cr(n,s),(o>0?s>i:i>s)&&(i+=o*Tu)):(i=e+o*Tu,s=e-.5*a);for(var f,l=i;o>0?l>s:s>l;l-=a)u.point((f=gn([n,-r*Math.cos(l),-r*Math.sin(l)]))[0],f[1])}}function cr(e,t){var n=cn(t);n[0]-=e,mn(n);var r=Q(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Cu)%(2*Math.PI)}function hr(e,t,n){var r=Xo.range(e,t-Cu,n).concat(t);return function(e){return r.map(function(t){return[e,t]})}}function pr(e,t,n){var r=Xo.range(e,t-Cu,n).concat(t);return function(e){return r.map(function(t){return[t,e]})}}function dr(e){return e.source}function vr(e){return e.target}function mr(e,t,n,r){var i=Math.cos(t),s=Math.sin(t),o=Math.cos(r),u=Math.sin(r),a=i*Math.cos(e),f=i*Math.sin(e),l=o*Math.cos(n),c=o*Math.sin(n),h=2*Math.asin(Math.sqrt(tt(r-t)+i*o*tt(n-e))),p=1/Math.sin(h),d=h?function(e){var t=Math.sin(e*=h)*p,n=Math.sin(h-e)*p,r=n*a+t*l,i=n*f+t*c,o=n*s+t*u;return[Math.atan2(i,r)*Au,Math.atan2(o,Math.sqrt(r*r+i*i))*Au]}:function(){return[e*Au,t*Au]};return d.distance=h,d}function gr(){function e(e,i){var s=Math.sin(i*=Lu),o=Math.cos(i),u=su((e*=Lu)-t),a=Math.cos(u);Ba+=Math.atan2(Math.sqrt((u=o*Math.sin(u))*u+(u=r*s-n*o*a)*u),n*s+r*o*a),t=e,n=s,r=o}var t,n,r;ja.point=function(i,s){t=i*Lu,n=Math.sin(s*=Lu),r=Math.cos(s),ja.point=e},ja.lineEnd=function(){ja.point=ja.lineEnd=v}}function yr(e,t){function n(t,n){var r=Math.cos(t),i=Math.cos(n),s=e(r*i);return[s*i*Math.sin(t),s*Math.sin(n)]}return n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),i=t(r),s=Math.sin(i),o=Math.cos(i);return[Math.atan2(e*s,r*o),Math.asin(r&&n*s/r)]},n}function br(e,t){function n(e,t){o>0?-Nu+Cu>t&&(t=-Nu+Cu):t>Nu-Cu&&(t=Nu-Cu);var n=o/Math.pow(i(t),s);return[n*Math.sin(s*e),o-n*Math.cos(s*e)]}var r=Math.cos(e),i=function(e){return Math.tan(xu/4+e/2)},s=e===t?Math.sin(e):Math.log(r/Math.cos(t))/Math.log(i(t)/i(e)),o=r*Math.pow(i(e),s)/s;return s?(n.invert=function(e,t){var n=o-t,r=J(s)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/s,2*Math.atan(Math.pow(o/r,1/s))-Nu]},n):Er}function wr(e,t){function n(e,t){var n=s-t;return[n*Math.sin(i*e),s-n*Math.cos(i*e)]}var r=Math.cos(e),i=e===t?Math.sin(e):(r-Math.cos(t))/(t-e),s=r/i+e;return su(i)<Cu?ir:(n.invert=function(e,t){var n=s-t;return[Math.atan2(e,n)/i,s-J(i)*Math.sqrt(e*e+n*n)]},n)}function Er(e,t){return[e,Math.log(Math.tan(xu/4+t/2))]}function Sr(e){var t,n=tr(e),r=n.scale,i=n.translate,s=n.clipExtent;return n.scale=function(){var e=r.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=i.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var o=s.apply(n,arguments);if(o===n){if(t=null==e){var u=xu*r(),a=i();s([[a[0]-u,a[1]-u],[a[0]+u,a[1]+u]])}}else t&&(o=null);return o},n.clipExtent(null)}function xr(e,t){return[Math.log(Math.tan(xu/4+t/2)),-e]}function Tr(e){return e[0]}function Nr(e){return e[1]}function Cr(e){for(var t=e.length,n=[0,1],r=2,i=2;t>i;i++){for(;r>1&&K(e[n[r-2]],e[n[r-1]],e[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function kr(e,t){return e[0]-t[0]||e[1]-t[1]}function Lr(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function Ar(e,t,n,r){var i=e[0],s=n[0],o=t[0]-i,u=r[0]-s,a=e[1],f=n[1],l=t[1]-a,c=r[1]-f,h=(u*(a-f)-c*(i-s))/(c*o-u*l);return[i+h*o,a+h*l]}function Or(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}function Mr(){Yr(this),this.edge=this.site=this.circle=null}function _r(e){var t=Ka.pop()||new Mr;return t.site=e,t}function Dr(e){zr(e),Va.remove(e),Ka.push(e),Yr(e)}function Pr(e){var t=e.circle,n=t.x,r=t.cy,i={x:n,y:r},s=e.P,o=e.N,u=[e];Dr(e);for(var a=s;a.circle&&su(n-a.circle.x)<Cu&&su(r-a.circle.cy)<Cu;)s=a.P,u.unshift(a),Dr(a),a=s;u.unshift(a),zr(a);for(var f=o;f.circle&&su(n-f.circle.x)<Cu&&su(r-f.circle.cy)<Cu;)o=f.N,u.push(f),Dr(f),f=o;u.push(f),zr(f);var l,c=u.length;for(l=1;c>l;++l)f=u[l],a=u[l-1],Kr(f.edge,a.site,f.site,i);a=u[0],f=u[c-1],f.edge=$r(a.site,f.site,null,i),Ur(a),Ur(f)}function Hr(e){for(var t,n,r,i,s=e.x,o=e.y,u=Va._;u;)if(r=Br(u,o)-s,r>Cu)u=u.L;else{if(i=s-jr(u,o),!(i>Cu)){r>-Cu?(t=u.P,n=u):i>-Cu?(t=u,n=u.N):t=n=u;break}if(!u.R){t=u;break}u=u.R}var a=_r(e);if(Va.insert(t,a),t||n){if(t===n)return zr(t),n=_r(t.site),Va.insert(a,n),a.edge=n.edge=$r(t.site,a.site),Ur(t),Ur(n),void 0;if(!n)return a.edge=$r(t.site,a.site),void 0;zr(t),zr(n);var f=t.site,l=f.x,c=f.y,h=e.x-l,p=e.y-c,d=n.site,v=d.x-l,m=d.y-c,g=2*(h*m-p*v),y=h*h+p*p,b=v*v+m*m,w={x:(m*y-p*b)/g+l,y:(h*b-v*y)/g+c};Kr(n.edge,f,d,w),a.edge=$r(f,e,null,w),n.edge=$r(e,d,null,w),Ur(t),Ur(n)}}function Br(e,t){var n=e.site,r=n.x,i=n.y,s=i-t;if(!s)return r;var o=e.P;if(!o)return-1/0;n=o.site;var u=n.x,a=n.y,f=a-t;if(!f)return u;var l=u-r,c=1/s-1/f,h=l/f;return c?(-h+Math.sqrt(h*h-2*c*(l*l/(-2*f)-a+f/2+i-s/2)))/c+r:(r+u)/2}function jr(e,t){var n=e.N;if(n)return Br(n,t);var r=e.site;return r.y===t?r.x:1/0}function Fr(e){this.site=e,this.edges=[]}function Ir(e){for(var t,n,r,i,s,o,u,a,f,l,c=e[0][0],h=e[1][0],p=e[0][1],d=e[1][1],v=Xa,m=v.length;m--;)if(s=v[m],s&&s.prepare())for(u=s.edges,a=u.length,o=0;a>o;)l=u[o].end(),r=l.x,i=l.y,f=u[++o%a].start(),t=f.x,n=f.y,(su(r-t)>Cu||su(i-n)>Cu)&&(u.splice(o,0,new Qr(Jr(s.site,l,su(r-c)<Cu&&d-i>Cu?{x:c,y:su(t-c)<Cu?n:d}:su(i-d)<Cu&&h-r>Cu?{x:su(n-d)<Cu?t:h,y:d}:su(r-h)<Cu&&i-p>Cu?{x:h,y:su(t-h)<Cu?n:p}:su(i-p)<Cu&&r-c>Cu?{x:su(n-p)<Cu?t:c,y:p}:null),s.site,null)),++a)}function qr(e,t){return t.angle-e.angle}function Rr(){Yr(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ur(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,s=n.site;if(r!==s){var o=i.x,u=i.y,a=r.x-o,f=r.y-u,l=s.x-o,c=s.y-u,h=2*(a*c-f*l);if(!(h>=-ku)){var p=a*a+f*f,d=l*l+c*c,v=(c*p-f*d)/h,m=(a*d-l*p)/h,c=m+u,g=Qa.pop()||new Rr;g.arc=e,g.site=i,g.x=v+o,g.y=c+Math.sqrt(v*v+m*m),g.cy=c,e.circle=g;for(var y=null,b=Ja._;b;)if(g.y<b.y||g.y===b.y&&g.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}Ja.insert(y,g),y||($a=g)}}}}function zr(e){var t=e.circle;t&&(t.P||($a=t.N),Ja.remove(t),Qa.push(t),Yr(t),e.circle=null)}function Wr(e){for(var t,n=Wa,r=jn(e[0][0],e[0][1],e[1][0],e[1][1]),i=n.length;i--;)t=n[i],(!Xr(t,e)||!r(t)||su(t.a.x-t.b.x)<Cu&&su(t.a.y-t.b.y)<Cu)&&(t.a=t.b=null,n.splice(i,1))}function Xr(e,t){var n=e.b;if(n)return!0;var r,i,s=e.a,o=t[0][0],u=t[1][0],a=t[0][1],f=t[1][1],l=e.l,c=e.r,h=l.x,p=l.y,d=c.x,v=c.y,m=(h+d)/2,g=(p+v)/2;if(v===p){if(o>m||m>=u)return;if(h>d){if(s){if(s.y>=f)return}else s={x:m,y:a};n={x:m,y:f}}else{if(s){if(s.y<a)return}else s={x:m,y:f};n={x:m,y:a}}}else if(r=(h-d)/(v-p),i=g-r*m,-1>r||r>1)if(h>d){if(s){if(s.y>=f)return}else s={x:(a-i)/r,y:a};n={x:(f-i)/r,y:f}}else{if(s){if(s.y<a)return}else s={x:(f-i)/r,y:f};n={x:(a-i)/r,y:a}}else if(v>p){if(s){if(s.x>=u)return}else s={x:o,y:r*o+i};n={x:u,y:r*u+i}}else{if(s){if(s.x<o)return}else s={x:u,y:r*u+i};n={x:o,y:r*o+i}}return e.a=s,e.b=n,!0}function Vr(e,t){this.l=e,this.r=t,this.a=this.b=null}function $r(e,t,n,r){var i=new Vr(e,t);return Wa.push(i),n&&Kr(i,e,t,n),r&&Kr(i,t,e,r),Xa[e.i].edges.push(new Qr(i,e,t)),Xa[t.i].edges.push(new Qr(i,t,e)),i}function Jr(e,t,n){var r=new Vr(e,null);return r.a=t,r.b=n,Wa.push(r),r}function Kr(e,t,n,r){e.a||e.b?e.l===n?e.b=r:e.a=r:(e.a=r,e.l=t,e.r=n)}function Qr(e,t,n){var r=e.a,i=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function Gr(){this._=null}function Yr(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function Zr(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function ei(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function ti(e){for(;e.L;)e=e.L;return e}function ni(e,t){var n,r,i,s=e.sort(ri).pop();for(Wa=[],Xa=new Array(e.length),Va=new Gr,Ja=new Gr;;)if(i=$a,s&&(!i||s.y<i.y||s.y===i.y&&s.x<i.x))(s.x!==n||s.y!==r)&&(Xa[s.i]=new Fr(s),Hr(s),n=s.x,r=s.y),s=e.pop();else{if(!i)break;Pr(i.arc)}t&&(Wr(t),Ir(t));var o={cells:Xa,edges:Wa};return Va=Ja=Wa=Xa=null,o}function ri(e,t){return t.y-e.y||t.x-e.x}function ii(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}function si(e){return e.x}function oi(e){return e.y}function ui(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function ai(e,t,n,r,i,s){if(!e(t,n,r,i,s)){var o=.5*(n+i),u=.5*(r+s),a=t.nodes;a[0]&&ai(e,a[0],n,r,o,u),a[1]&&ai(e,a[1],o,r,i,u),a[2]&&ai(e,a[2],n,u,o,s),a[3]&&ai(e,a[3],o,u,i,s)}}function fi(e,t){e=Xo.rgb(e),t=Xo.rgb(t);var n=e.r,r=e.g,i=e.b,s=t.r-n,o=t.g-r,u=t.b-i;return function(e){return"#"+mt(Math.round(n+s*e))+mt(Math.round(r+o*e))+mt(Math.round(i+u*e))}}function li(e,t){var n,r={},i={};for(n in e)n in t?r[n]=pi(e[n],t[n]):i[n]=e[n];for(n in t)n in e||(i[n]=t[n]);return function(e){for(n in r)i[n]=r[n](e);return i}}function ci(e,t){return t-=e=+e,function(n){return e+t*n}}function hi(e,t){var n,r,i,s=Ya.lastIndex=Za.lastIndex=0,o=-1,u=[],a=[];for(e+="",t+="";(n=Ya.exec(e))&&(r=Za.exec(t));)(i=r.index)>s&&(i=t.substring(s,i),u[o]?u[o]+=i:u[++o]=i),(n=n[0])===(r=r[0])?u[o]?u[o]+=r:u[++o]=r:(u[++o]=null,a.push({i:o,x:ci(n,r)})),s=Za.lastIndex;return s<t.length&&(i=t.substring(s),u[o]?u[o]+=i:u[++o]=i),u.length<2?a[0]?(t=a[0].x,function(e){return t(e)+""}):function(){return t}:(t=a.length,function(e){for(var n,r=0;t>r;++r)u[(n=a[r]).i]=n.x(e);return u.join("")})}function pi(e,t){for(var n,r=Xo.interpolators.length;--r>=0&&!(n=Xo.interpolators[r](e,t)););return n}function di(e,t){var n,r=[],i=[],s=e.length,o=t.length,u=Math.min(e.length,t.length);for(n=0;u>n;++n)r.push(pi(e[n],t[n]));for(;s>n;++n)i[n]=e[n];for(;o>n;++n)i[n]=t[n];return function(e){for(n=0;u>n;++n)i[n]=r[n](e);return i}}function vi(e){return function(t){return 0>=t?0:t>=1?1:e(t)}}function mi(e){return function(t){return 1-e(1-t)}}function gi(e){return function(t){return.5*(.5>t?e(2*t):2-e(2-2*t))}}function yi(e){return e*e}function bi(e){return e*e*e}function wi(e){if(0>=e)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(.5>e?n:3*(e-t)+n-.75)}function Ei(e){return function(t){return Math.pow(t,e)}}function Si(e){return 1-Math.cos(e*Nu)}function xi(e){return Math.pow(2,10*(e-1))}function Ti(e){return 1-Math.sqrt(1-e*e)}function Ni(e,t){var n;return arguments.length<2&&(t=.45),arguments.length?n=t/Tu*Math.asin(1/e):(e=1,n=t/4),function(r){return 1+e*Math.pow(2,-10*r)*Math.sin((r-n)*Tu/t)}}function Ci(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function ki(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Li(e,t){e=Xo.hcl(e),t=Xo.hcl(t);var n=e.h,r=e.c,i=e.l,s=t.h-n,o=t.c-r,u=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.c:r),isNaN(s)?(s=0,n=isNaN(n)?t.h:n):s>180?s-=360:-180>s&&(s+=360),function(e){return ot(n+s*e,r+o*e,i+u*e)+""}}function Ai(e,t){e=Xo.hsl(e),t=Xo.hsl(t);var n=e.h,r=e.s,i=e.l,s=t.h-n,o=t.s-r,u=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.s:r),isNaN(s)?(s=0,n=isNaN(n)?t.h:n):s>180?s-=360:-180>s&&(s+=360),function(e){return it(n+s*e,r+o*e,i+u*e)+""}}function Oi(e,t){e=Xo.lab(e),t=Xo.lab(t);var n=e.l,r=e.a,i=e.b,s=t.l-n,o=t.a-r,u=t.b-i;return function(e){return at(n+s*e,r+o*e,i+u*e)+""}}function Mi(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function _i(e){var t=[e.a,e.b],n=[e.c,e.d],r=Pi(t),i=Di(t,n),s=Pi(Hi(n,t,-i))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*Au,this.translate=[e.e,e.f],this.scale=[r,s],this.skew=s?Math.atan2(i,s)*Au:0}function Di(e,t){return e[0]*t[0]+e[1]*t[1]}function Pi(e){var t=Math.sqrt(Di(e,e));return t&&(e[0]/=t,e[1]/=t),t}function Hi(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}function Bi(e,t){var n,r=[],i=[],s=Xo.transform(e),o=Xo.transform(t),u=s.translate,a=o.translate,f=s.rotate,l=o.rotate,c=s.skew,h=o.skew,p=s.scale,d=o.scale;return u[0]!=a[0]||u[1]!=a[1]?(r.push("translate(",null,",",null,")"),i.push({i:1,x:ci(u[0],a[0])},{i:3,x:ci(u[1],a[1])})):a[0]||a[1]?r.push("translate("+a+")"):r.push(""),f!=l?(f-l>180?l+=360:l-f>180&&(f+=360),i.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:ci(f,l)})):l&&r.push(r.pop()+"rotate("+l+")"),c!=h?i.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:ci(c,h)}):h&&r.push(r.pop()+"skewX("+h+")"),p[0]!=d[0]||p[1]!=d[1]?(n=r.push(r.pop()+"scale(",null,",",null,")"),i.push({i:n-4,x:ci(p[0],d[0])},{i:n-2,x:ci(p[1],d[1])})):(1!=d[0]||1!=d[1])&&r.push(r.pop()+"scale("+d+")"),n=i.length,function(e){for(var t,s=-1;++s<n;)r[(t=i[s]).i]=t.x(e);return r.join("")}}function ji(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return(n-e)*t}}function Fi(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return Math.max(0,Math.min(1,(n-e)*t))}}function Ii(e){for(var t=e.source,n=e.target,r=Ri(t,n),i=[t];t!==r;)t=t.parent,i.push(t);for(var s=i.length;n!==r;)i.splice(s,0,n),n=n.parent;return i}function qi(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function Ri(e,t){if(e===t)return e;for(var n=qi(e),r=qi(t),i=n.pop(),s=r.pop(),o=null;i===s;)o=i,i=n.pop(),s=r.pop();return o}function Ui(e){e.fixed|=2}function zi(e){e.fixed&=-7}function Wi(e){e.fixed|=4,e.px=e.x,e.py=e.y}function Xi(e){e.fixed&=-5}function Vi(e,t,n){var r=0,i=0;if(e.charge=0,!e.leaf)for(var s,o=e.nodes,u=o.length,a=-1;++a<u;)s=o[a],null!=s&&(Vi(s,t,n),e.charge+=s.charge,r+=s.charge*s.cx,i+=s.charge*s.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var f=t*n[e.point.index];e.charge+=e.pointCharge=f,r+=f*e.point.x,i+=f*e.point.y}e.cx=r/e.charge,e.cy=i/e.charge}function $i(e,t){return Xo.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=Zi,e}function Ji(e,t){for(var n=[e];null!=(e=n.pop());)if(t(e),(i=e.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function Ki(e,t){for(var n=[e],r=[];null!=(e=n.pop());)if(r.push(e),(s=e.children)&&(i=s.length))for(var i,s,o=-1;++o<i;)n.push(s[o]);for(;null!=(e=r.pop());)t(e)}function Qi(e){return e.children}function Gi(e){return e.value}function Yi(e,t){return t.value-e.value}function Zi(e){return Xo.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function es(e){return e.x}function ts(e){return e.y}function ns(e,t,n){e.y0=t,e.y=n}function rs(e){return Xo.range(e.length)}function is(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function ss(e){for(var t,n=1,r=0,i=e[0][1],s=e.length;s>n;++n)(t=e[n][1])>i&&(r=n,i=t);return r}function os(e){return e.reduce(us,0)}function us(e,t){return e+t[1]}function as(e,t){return fs(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function fs(e,t){for(var n=-1,r=+e[0],i=(e[1]-r)/t,s=[];++n<=t;)s[n]=i*n+r;return s}function ls(e){return[Xo.min(e),Xo.max(e)]}function cs(e,t){return e.value-t.value}function hs(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function ps(e,t){e._pack_next=t,t._pack_prev=e}function ds(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return.999*i*i>n*n+r*r}function vs(e){function t(e){l=Math.min(e.x-e.r,l),c=Math.max(e.x+e.r,c),h=Math.min(e.y-e.r,h),p=Math.max(e.y+e.r,p)}if((n=e.children)&&(f=n.length)){var n,r,i,s,o,u,a,f,l=1/0,c=-1/0,h=1/0,p=-1/0;if(n.forEach(ms),r=n[0],r.x=-r.r,r.y=0,t(r),f>1&&(i=n[1],i.x=i.r,i.y=0,t(i),f>2))for(s=n[2],bs(r,i,s),t(s),hs(r,s),r._pack_prev=s,hs(s,i),i=r._pack_next,o=3;f>o;o++){bs(r,i,s=n[o]);var d=0,v=1,m=1;for(u=i._pack_next;u!==i;u=u._pack_next,v++)if(ds(u,s)){d=1;break}if(1==d)for(a=r._pack_prev;a!==u._pack_prev&&!ds(a,s);a=a._pack_prev,m++);d?(m>v||v==m&&i.r<r.r?ps(r,i=u):ps(r=a,i),o--):(hs(r,s),i=s,t(s))}var g=(l+c)/2,y=(h+p)/2,b=0;for(o=0;f>o;o++)s=n[o],s.x-=g,s.y-=y,b=Math.max(b,s.r+Math.sqrt(s.x*s.x+s.y*s.y));e.r=b,n.forEach(gs)}}function ms(e){e._pack_next=e._pack_prev=e}function gs(e){delete e._pack_next,delete e._pack_prev}function ys(e,t,n,r){var i=e.children;if(e.x=t+=r*e.x,e.y=n+=r*e.y,e.r*=r,i)for(var s=-1,o=i.length;++s<o;)ys(i[s],t,n,r)}function bs(e,t,n){var r=e.r+n.r,i=t.x-e.x,s=t.y-e.y;if(r&&(i||s)){var o=t.r+n.r,u=i*i+s*s;o*=o,r*=r;var a=.5+(r-o)/(2*u),f=Math.sqrt(Math.max(0,2*o*(r+u)-(r-=u)*r-o*o))/(2*u);n.x=e.x+a*i+f*s,n.y=e.y+a*s-f*i}else n.x=e.x+r,n.y=e.y}function ws(e,t){return e.parent==t.parent?1:2}function Es(e){var t=e.children;return t.length?t[0]:e.t}function Ss(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function xs(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Ts(e){for(var t,n=0,r=0,i=e.children,s=i.length;--s>=0;)t=i[s],t.z+=n,t.m+=n,n+=t.s+(r+=t.c)}function Ns(e,t,n){return e.a.parent===t.parent?e.a:n}function Cs(e){return 1+Xo.max(e,function(e){return e.y})}function ks(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function Ls(e){var t=e.children;return t&&t.length?Ls(t[0]):e}function As(e){var t,n=e.children;return n&&(t=n.length)?As(n[t-1]):e}function Os(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function Ms(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],s=e.dy-t[0]-t[2];return 0>i&&(n+=i/2,i=0),0>s&&(r+=s/2,s=0),{x:n,y:r,dx:i,dy:s}}function _s(e){var t=e[0],n=e[e.length-1];return n>t?[t,n]:[n,t]}function Ds(e){return e.rangeExtent?e.rangeExtent():_s(e.range())}function Ps(e,t,n,r){var i=n(e[0],e[1]),s=r(t[0],t[1]);return function(e){return s(i(e))}}function Hs(e,t){var n,r=0,i=e.length-1,s=e[r],o=e[i];return s>o&&(n=r,r=i,i=n,n=s,s=o,o=n),e[r]=t.floor(s),e[i]=t.ceil(o),e}function Bs(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:cf}function js(e,t,n,r){var i=[],s=[],o=0,u=Math.min(e.length,t.length)-1;for(e[u]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<=u;)i.push(n(e[o-1],e[o])),s.push(r(t[o-1],t[o]));return function(t){var n=Xo.bisect(e,t,1,u)-1;return s[n](i[n](t))}}function Fs(e,t,n,r){function i(){var i=Math.min(e.length,t.length)>2?js:Ps,a=r?Fi:ji;return o=i(e,t,a,n),u=i(t,e,a,pi),s}function s(e){return o(e)}var o,u;return s.invert=function(e){return u(e)},s.domain=function(t){return arguments.length?(e=t.map(Number),i()):e},s.range=function(e){return arguments.length?(t=e,i()):t},s.rangeRound=function(e){return s.range(e).interpolate(Mi)},s.clamp=function(e){return arguments.length?(r=e,i()):r},s.interpolate=function(e){return arguments.length?(n=e,i()):n},s.ticks=function(t){return Us(e,t)},s.tickFormat=function(t,n){return zs(e,t,n)},s.nice=function(t){return qs(e,t),i()},s.copy=function(){return Fs(e,t,n,r)},i()}function Is(e,t){return Xo.rebind(e,t,"range","rangeRound","interpolate","clamp")}function qs(e,t){return Hs(e,Bs(Rs(e,t)[2]))}function Rs(e,t){null==t&&(t=10);var n=_s(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),s=t/r*i;return.15>=s?i*=10:.35>=s?i*=5:.75>=s&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function Us(e,t){return Xo.range.apply(Xo,Rs(e,t))}function zs(e,t,n){var r=Rs(e,t);if(n){var i=Yu.exec(n);if(i.shift(),"s"===i[8]){var s=Xo.formatPrefix(Math.max(su(r[0]),su(r[1])));return i[7]||(i[7]="."+Ws(s.scale(r[2]))),i[8]="f",n=Xo.format(i.join("")),function(e){return n(s.scale(e))+s.symbol}}i[7]||(i[7]="."+Xs(i[8],r)),n=i.join("")}else n=",."+Ws(r[2])+"f";return Xo.format(n)}function Ws(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function Xs(e,t){var n=Ws(t[2]);return e in hf?Math.abs(n-Ws(Math.max(su(t[0]),su(t[1]))))+ +("e"!==e):n-2*("%"===e)}function Vs(e,t,n,r){function i(e){return(n?Math.log(0>e?0:e):-Math.log(e>0?0:-e))/Math.log(t)}function s(e){return n?Math.pow(t,e):-Math.pow(t,-e)}function o(t){return e(i(t))}return o.invert=function(t){return s(e.invert(t))},o.domain=function(t){return arguments.length?(n=t[0]>=0,e.domain((r=t.map(Number)).map(i)),o):r},o.base=function(n){return arguments.length?(t=+n,e.domain(r.map(i)),o):t},o.nice=function(){var t=Hs(r.map(i),n?Math:df);return e.domain(t),r=t.map(s),o},o.ticks=function(){var e=_s(r),o=[],u=e[0],a=e[1],f=Math.floor(i(u)),l=Math.ceil(i(a)),c=t%1?2:t;if(isFinite(l-f)){if(n){for(;l>f;f++)for(var h=1;c>h;h++)o.push(s(f)*h);o.push(s(f))}else for(o.push(s(f));f++<l;)for(var h=c-1;h>0;h--)o.push(s(f)*h);for(f=0;o[f]<u;f++);for(l=o.length;o[l-1]>a;l--);o=o.slice(f,l)}return o},o.tickFormat=function(e,t){if(!arguments.length)return pf;arguments.length<2?t=pf:"function"!=typeof t&&(t=Xo.format(t));var r,u=Math.max(.1,e/o.ticks().length),a=n?(r=1e-12,Math.ceil):(r=-1e-12,Math.floor);return function(e){return e/s(a(i(e)+r))<=u?t(e):""}},o.copy=function(){return Vs(e.copy(),t,n,r)},Is(o,e)}function $s(e,t,n){function r(t){return e(i(t))}var i=Js(t),s=Js(1/t);return r.invert=function(t){return s(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(i)),r):n},r.ticks=function(e){return Us(n,e)},r.tickFormat=function(e,t){return zs(n,e,t)},r.nice=function(e){return r.domain(qs(n,e))},r.exponent=function(o){return arguments.length?(i=Js(t=o),s=Js(1/t),e.domain(n.map(i)),r):t},r.copy=function(){return $s(e.copy(),t,n)},Is(r,e)}function Js(e){return function(t){return 0>t?-Math.pow(-t,e):Math.pow(t,e)}}function Ks(e,t){function n(n){return s[((i.get(n)||("range"===t.t?i.set(n,e.push(n)):0/0))-1)%s.length]}function r(t,n){return Xo.range(e.length).map(function(e){return t+n*e})}var i,s,u;return n.domain=function(r){if(!arguments.length)return e;e=[],i=new o;for(var s,u=-1,a=r.length;++u<a;)i.has(s=r[u])||i.set(s,e.push(s));return n[t.t].apply(n,t.a)},n.range=function(e){return arguments.length?(s=e,u=0,t={t:"range",a:arguments},n):s},n.rangePoints=function(i,o){arguments.length<2&&(o=0);var a=i[0],f=i[1],l=(f-a)/(Math.max(1,e.length-1)+o);return s=r(e.length<2?(a+f)/2:a+l*o/2,l),u=0,t={t:"rangePoints",a:arguments},n},n.rangeBands=function(i,o,a){arguments.length<2&&(o=0),arguments.length<3&&(a=o);var f=i[1]<i[0],l=i[f-0],c=i[1-f],h=(c-l)/(e.length-o+2*a);return s=r(l+h*a,h),f&&s.reverse(),u=h*(1-o),t={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,o,a){arguments.length<2&&(o=0),arguments.length<3&&(a=o);var f=i[1]<i[0],l=i[f-0],c=i[1-f],h=Math.floor((c-l)/(e.length-o+2*a)),p=c-l-(e.length-o)*h;return s=r(l+Math.round(p/2),h),f&&s.reverse(),u=Math.round(h*(1-o)),t={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return u},n.rangeExtent=function(){return _s(t.a[0])},n.copy=function(){return Ks(e,t)},n.domain(e)}function Qs(n,r){function i(){var e=0,t=r.length;for(o=[];++e<t;)o[e-1]=Xo.quantile(n,e/t);return s}function s(e){return isNaN(e=+e)?void 0:r[Xo.bisect(o,e)]}var o;return s.domain=function(r){return arguments.length?(n=r.filter(t).sort(e),i()):n},s.range=function(e){return arguments.length?(r=e,i()):r},s.quantiles=function(){return o},s.invertExtent=function(e){return e=r.indexOf(e),0>e?[0/0,0/0]:[e>0?o[e-1]:n[0],e<o.length?o[e]:n[n.length-1]]},s.copy=function(){return Qs(n,r)},i()}function Gs(e,t,n){function r(t){return n[Math.max(0,Math.min(o,Math.floor(s*(t-e))))]}function i(){return s=n.length/(t-e),o=n.length-1,r}var s,o;return r.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],i()):[e,t]},r.range=function(e){return arguments.length?(n=e,i()):n},r.invertExtent=function(t){return t=n.indexOf(t),t=0>t?0/0:t/s+e,[t,t+1/s]},r.copy=function(){return Gs(e,t,n)},i()}function Ys(e,t){function n(n){return n>=n?t[Xo.bisect(e,n)]:void 0}return n.domain=function(t){return arguments.length?(e=t,n):e},n.range=function(e){return arguments.length?(t=e,n):t},n.invertExtent=function(n){return n=t.indexOf(n),[e[n-1],e[n]]},n.copy=function(){return Ys(e,t)},n}function Zs(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return Us(e,t)},t.tickFormat=function(t,n){return zs(e,t,n)},t.copy=function(){return Zs(e)},t}function eo(e){return e.innerRadius}function to(e){return e.outerRadius}function no(e){return e.startAngle}function ro(e){return e.endAngle}function io(e){function t(t){function o(){f.push("M",s(e(l),u))}for(var a,f=[],l=[],c=-1,h=t.length,p=St(n),d=St(r);++c<h;)i.call(this,a=t[c],c)?l.push([+p.call(this,a,c),+d.call(this,a,c)]):l.length&&(o(),l=[]);return l.length&&o(),f.length?f.join(""):null}var n=Tr,r=Nr,i=Tn,s=so,o=s.key,u=.7;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t.defined=function(e){return arguments.length?(i=e,t):i},t.interpolate=function(e){return arguments.length?(o="function"==typeof e?s=e:(s=Ef.get(e)||so).key,t):o},t.tension=function(e){return arguments.length?(u=e,t):u},t}function so(e){return e.join("L")}function oo(e){return so(e)+"Z"}function uo(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")}function ao(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function fo(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function lo(e,t){return e.length<4?so(e):e[1]+po(e.slice(1,e.length-1),vo(e,t))}function co(e,t){return e.length<3?so(e):e[0]+po((e.push(e[0]),e),vo([e[e.length-2]].concat(e,[e[1]]),t))}function ho(e,t){return e.length<3?so(e):e[0]+po(e,vo(e,t))}function po(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return so(e);var n=e.length!=t.length,r="",i=e[0],s=e[1],o=t[0],u=o,a=1;if(n&&(r+="Q"+(s[0]-2*o[0]/3)+","+(s[1]-2*o[1]/3)+","+s[0]+","+s[1],i=e[1],a=2),t.length>1){u=t[1],s=e[a],a++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1];for(var f=2;f<t.length;f++,a++)s=e[a],u=t[f],r+="S"+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1]}if(n){var l=e[a];r+="Q"+(s[0]+2*u[0]/3)+","+(s[1]+2*u[1]/3)+","+l[0]+","+l[1]}return r}function vo(e,t){for(var n,r=[],i=(1-t)/2,s=e[0],o=e[1],u=1,a=e.length;++u<a;)n=s,s=o,o=e[u],r.push([i*(o[0]-n[0]),i*(o[1]-n[1])]);return r}function mo(e){if(e.length<3)return so(e);var t=1,n=e.length,r=e[0],i=r[0],s=r[1],o=[i,i,i,(r=e[1])[0]],u=[s,s,s,r[1]],a=[i,",",s,"L",wo(Tf,o),",",wo(Tf,u)];for(e.push(e[n-1]);++t<=n;)r=e[t],o.shift(),o.push(r[0]),u.shift(),u.push(r[1]),Eo(a,o,u);return e.pop(),a.push("L",r),a.join("")}function go(e){if(e.length<4)return so(e);for(var t,n=[],r=-1,i=e.length,s=[0],o=[0];++r<3;)t=e[r],s.push(t[0]),o.push(t[1]);for(n.push(wo(Tf,s)+","+wo(Tf,o)),--r;++r<i;)t=e[r],s.shift(),s.push(t[0]),o.shift(),o.push(t[1]),Eo(n,s,o);return n.join("")}function yo(e){for(var t,n,r=-1,i=e.length,s=i+4,o=[],u=[];++r<4;)n=e[r%i],o.push(n[0]),u.push(n[1]);for(t=[wo(Tf,o),",",wo(Tf,u)],--r;++r<s;)n=e[r%i],o.shift(),o.push(n[0]),u.shift(),u.push(n[1]),Eo(t,o,u);return t.join("")}function bo(e,t){var n=e.length-1;if(n)for(var r,i,s=e[0][0],o=e[0][1],u=e[n][0]-s,a=e[n][1]-o,f=-1;++f<=n;)r=e[f],i=f/n,r[0]=t*r[0]+(1-t)*(s+i*u),r[1]=t*r[1]+(1-t)*(o+i*a);return mo(e)}function wo(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Eo(e,t,n){e.push("C",wo(Sf,t),",",wo(Sf,n),",",wo(xf,t),",",wo(xf,n),",",wo(Tf,t),",",wo(Tf,n))}function So(e,t){return(t[1]-e[1])/(t[0]-e[0])}function xo(e){for(var t=0,n=e.length-1,r=[],i=e[0],s=e[1],o=r[0]=So(i,s);++t<n;)r[t]=(o+(o=So(i=s,s=e[t+1])))/2;return r[t]=o,r}function To(e){for(var t,n,r,i,s=[],o=xo(e),u=-1,a=e.length-1;++u<a;)t=So(e[u],e[u+1]),su(t)<Cu?o[u]=o[u+1]=0:(n=o[u]/t,r=o[u+1]/t,i=n*n+r*r,i>9&&(i=3*t/Math.sqrt(i),o[u]=i*n,o[u+1]=i*r));for(u=-1;++u<=a;)i=(e[Math.min(a,u+1)][0]-e[Math.max(0,u-1)][0])/(6*(1+o[u]*o[u])),s.push([i||0,o[u]*i||0]);return s}function No(e){return e.length<3?so(e):e[0]+po(e,To(e))}function Co(e){for(var t,n,r,i=-1,s=e.length;++i<s;)t=e[i],n=t[0],r=t[1]+bf,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function ko(e){function t(t){function a(){v.push("M",u(e(g),c),l,f(e(m.reverse()),c),"Z")}for(var h,p,d,v=[],m=[],g=[],y=-1,b=t.length,w=St(n),E=St(i),S=n===r?function(){return p}:St(r),x=i===s?function(){return d}:St(s);++y<b;)o.call(this,h=t[y],y)?(m.push([p=+w.call(this,h,y),d=+E.call(this,h,y)]),g.push([+S.call(this,h,y),+x.call(this,h,y)])):m.length&&(a(),m=[],g=[]);return m.length&&a(),v.length?v.join(""):null}var n=Tr,r=Tr,i=0,s=Nr,o=Tn,u=so,a=u.key,f=u,l="L",c=.7;return t.x=function(e){return arguments.length?(n=r=e,t):r},t.x0=function(e){return arguments.length?(n=e,t):n},t.x1=function(e){return arguments.length?(r=e,t):r},t.y=function(e){return arguments.length?(i=s=e,t):s},t.y0=function(e){return arguments.length?(i=e,t):i},t.y1=function(e){return arguments.length?(s=e,t):s},t.defined=function(e){return arguments.length?(o=e,t):o},t.interpolate=function(e){return arguments.length?(a="function"==typeof e?u=e:(u=Ef.get(e)||so).key,f=u.reverse||u,l=u.closed?"M":"L",t):a},t.tension=function(e){return arguments.length?(c=e,t):c},t}function Lo(e){return e.radius}function Ao(e){return[e.x,e.y]}function Oo(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]+bf;return[n*Math.cos(r),n*Math.sin(r)]}}function Mo(){return 64}function _o(){return"circle"}function Do(e){var t=Math.sqrt(e/xu);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+ -t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Po(e,t){return lu(e,Of),e.id=t,e}function Ho(e,t,n,r){var i=e.id;return B(e,"function"==typeof n?function(e,s,o){e.__transition__[i].tween.set(t,r(n.call(e,e.__data__,s,o)))}:(n=r(n),function(e){e.__transition__[i].tween.set(t,n)}))}function Bo(e){return null==e&&(e=""),function(){this.textContent=e}}function jo(e,t,n,r){var i=e.__transition__||(e.__transition__={active:0,count:0}),s=i[n];if(!s){var u=r.time;s=i[n]={tween:new o,time:u,ease:r.ease,delay:r.delay,duration:r.duration},++i.count,Xo.timer(function(r){function o(r){return i.active>n?f():(i.active=n,s.event&&s.event.start.call(e,l,t),s.tween.forEach(function(n,r){(r=r.call(e,l,t))&&v.push(r)}),Xo.timer(function(){return d.c=a(r||1)?Tn:a,1},0,u),void 0)}function a(r){if(i.active!==n)return f();for(var o=r/p,u=c(o),a=v.length;a>0;)v[--a].call(e,u);return o>=1?(s.event&&s.event.end.call(e,l,t),f()):void 0}function f(){return--i.count?delete i[n]:delete e.__transition__,1}var l=e.__data__,c=s.ease,h=s.delay,p=s.duration,d=Ku,v=[];return d.t=h+u,r>=h?o(r-h):(d.c=o,void 0)},0,u)}}function Fo(e,t){e.attr("transform",function(e){return"translate("+t(e)+",0)"})}function Io(e,t){e.attr("transform",function(e){return"translate(0,"+t(e)+")"})}function qo(e){return e.toISOString()}function Ro(e,t,n){function r(t){return e(t)}function i(e,n){var r=e[1]-e[0],i=r/n,s=Xo.bisect(If,i);return s==If.length?[t.year,Rs(e.map(function(e){return e/31536e6}),n)[2]]:s?t[i/If[s-1]<If[s]/i?s-1:s]:[Uf,Rs(e,n)[2]]}return r.invert=function(t){return Uo(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain(t),r):e.domain().map(Uo)},r.nice=function(e,t){function n(n){return!isNaN(n)&&!e.range(n,Uo(+n+1),t).length}var s=r.domain(),o=_s(s),u=null==e?i(o,10):"number"==typeof e&&i(o,e);return u&&(e=u[0],t=u[1]),r.domain(Hs(s,t>1?{floor:function(t){for(;n(t=e.floor(t));)t=Uo(t-1);return t},ceil:function(t){for(;n(t=e.ceil(t));)t=Uo(+t+1);return t}}:e))},r.ticks=function(e,t){var n=_s(r.domain()),s=null==e?i(n,10):"number"==typeof e?i(n,e):!e.range&&[{range:e},t];return s&&(e=s[0],t=s[1]),e.range(n[0],Uo(+n[1]+1),1>t?1:t)},r.tickFormat=function(){return n},r.copy=function(){return Ro(e.copy(),t,n)},Is(r,e)}function Uo(e){return new Date(e)}function zo(e){return JSON.parse(e.responseText)}function Wo(e){var t=Jo.createRange();return t.selectNode(Jo.body),t.createContextualFragment(e.responseText)}var Xo={version:"3.4.11"};Date.now||(Date.now=function(){return+(new Date)});var Vo=[].slice,$o=function(e){return Vo.call(e)},Jo=document,Ko=Jo.documentElement,Qo=window;try{$o(Ko.childNodes)[0].nodeType}catch(Go){$o=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}try{Jo.createElement("div").style.setProperty("opacity",0,"")}catch(Yo){var Zo=Qo.Element.prototype,eu=Zo.setAttribute,tu=Zo.setAttributeNS,nu=Qo.CSSStyleDeclaration.prototype,ru=nu.setProperty;Zo.setAttribute=function(e,t){eu.call(this,e,t+"")},Zo.setAttributeNS=function(e,t,n){tu.call(this,e,t,n+"")},nu.setProperty=function(e,t,n){ru.call(this,e,t+"",n)}}Xo.ascending=e,Xo.descending=function(e,t){return e>t?-1:t>e?1:t>=e?0:0/0},Xo.min=function(e,t){var n,r,i=-1,s=e.length;if(1===arguments.length){for(;++i<s&&!(null!=(n=e[i])&&n>=n);)n=void 0;for(;++i<s;)null!=(r=e[i])&&n>r&&(n=r)}else{for(;++i<s&&!(null!=(n=t.call(e,e[i],i))&&n>=n);)n=void 0;for(;++i<s;)null!=(r=t.call(e,e[i],i))&&n>r&&(n=r)}return n},Xo.max=function(e,t){var n,r,i=-1,s=e.length;if(1===arguments.length){for(;++i<s&&!(null!=(n=e[i])&&n>=n);)n=void 0;for(;++i<s;)null!=(r=e[i])&&r>n&&(n=r)}else{for(;++i<s&&!(null!=(n=t.call(e,e[i],i))&&n>=n);)n=void 0;for(;++i<s;)null!=(r=t.call(e,e[i],i))&&r>n&&(n=r)}return n},Xo.extent=function(e,t){var n,r,i,s=-1,o=e.length;if(1===arguments.length){for(;++s<o&&!(null!=(n=i=e[s])&&n>=n);)n=i=void 0;for(;++s<o;)null!=(r=e[s])&&(n>r&&(n=r),r>i&&(i=r))}else{for(;++s<o&&!(null!=(n=i=t.call(e,e[s],s))&&n>=n);)n=void 0;for(;++s<o;)null!=(r=t.call(e,e[s],s))&&(n>r&&(n=r),r>i&&(i=r))}return[n,i]},Xo.sum=function(e,t){var n,r=0,i=e.length,s=-1;if(1===arguments.length)for(;++s<i;)isNaN(n=+e[s])||(r+=n);else for(;++s<i;)isNaN(n=+t.call(e,e[s],s))||(r+=n);return r},Xo.mean=function(e,n){var r,i=0,s=e.length,o=-1,u=s;if(1===arguments.length)for(;++o<s;)t(r=e[o])?i+=r:--u;else for(;++o<s;)t(r=n.call(e,e[o],o))?i+=r:--u;return u?i/u:void 0},Xo.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],s=n-r;return s?i+s*(e[r]-i):i},Xo.median=function(n,r){return arguments.length>1&&(n=n.map(r)),n=n.filter(t),n.length?Xo.quantile(n.sort(e),.5):void 0};var iu=n(e);Xo.bisectLeft=iu.left,Xo.bisect=Xo.bisectRight=iu.right,Xo.bisector=function(t){return n(1===t.length?function(n,r){return e(t(n),r)}:t)},Xo.shuffle=function(e){for(var t,n,r=e.length;r;)n=0|Math.random()*r--,t=e[r],e[r]=e[n],e[n]=t;return e},Xo.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},Xo.pairs=function(e){for(var t,n=0,r=e.length-1,i=e[0],s=new Array(0>r?0:r);r>n;)s[n]=[t=i,i=e[++n]];return s},Xo.zip=function(){if(!(i=arguments.length))return[];for(var e=-1,t=Xo.min(arguments,r),n=new Array(t);++e<t;)for(var i,s=-1,o=n[e]=new Array(i);++s<i;)o[s]=arguments[s][e];return n},Xo.transpose=function(e){return Xo.zip.apply(Xo,e)},Xo.keys=function(e){var t=[];for(var n in e)t.push(n);return t},Xo.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},Xo.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},Xo.merge=function(e){for(var t,n,r,i=e.length,s=-1,o=0;++s<i;)o+=e[s].length;for(n=new Array(o);--i>=0;)for(r=e[i],t=r.length;--t>=0;)n[--o]=r[t];return n};var su=Math.abs;Xo.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),1/0===(t-e)/n)throw new Error("infinite range");var r,s=[],o=i(su(n)),u=-1;if(e*=o,t*=o,n*=o,0>n)for(;(r=e+n*++u)>t;)s.push(r/o);else for(;(r=e+n*++u)<t;)s.push(r/o);return s},Xo.map=function(e){var t=new o;if(e instanceof o)e.forEach(function(e,n){t.set(e,n)});else for(var n in e)t.set(n,e[n]);return t},s(o,{has:u,get:function(e){return this[ou+e]},set:function(e,t){return this[ou+e]=t},remove:a,keys:f,values:function(){var e=[];return this.forEach(function(t,n){e.push(n)}),e},entries:function(){var e=[];return this.forEach(function(t,n){e.push({key:t,value:n})}),e},size:l,empty:c,forEach:function(e){for(var t in this)t.charCodeAt(0)===uu&&e.call(this,t.substring(1),this[t])}});var ou="\0",uu=ou.charCodeAt(0);Xo.nest=function(){function e(t,u,a){if(a>=s.length)return r?r.call(i,u):n?u.sort(n):u;for(var f,l,c,h,p=-1,d=u.length,v=s[a++],m=new o;++p<d;)(h=m.get(f=v(l=u[p])))?h.push(l):m.set(f,[l]);return t?(l=t(),c=function(n,r){l.set(n,e(t,r,a))}):(l={},c=function(n,r){l[n]=e(t,r,a)}),m.forEach(c),l}function t(e,n){if(n>=s.length)return e;var r=[],i=u[n++];return e.forEach(function(e,i){r.push({key:e,values:t(i,n)})}),i?r.sort(function(e,t){return i(e.key,t.key)}):r}var n,r,i={},s=[],u=[];return i.map=function(t,n){return e(n,t,0)},i.entries=function(n){return t(e(Xo.map,n,0),0)},i.key=function(e){return s.push(e),i},i.sortKeys=function(e){return u[s.length-1]=e,i},i.sortValues=function(e){return n=e,i},i.rollup=function(e){return r=e,i},i},Xo.set=function(e){var t=new h;if(e)for(var n=0,r=e.length;r>n;++n)t.add(e[n]);return t},s(h,{has:u,add:function(e){return this[ou+e]=!0,e},remove:function(e){return e=ou+e,e in this&&delete this[e]},values:f,size:l,empty:c,forEach:function(e){for(var t in this)t.charCodeAt(0)===uu&&e.call(this,t.substring(1))}}),Xo.behavior={},Xo.rebind=function(e,t){for(var n,r=1,i=arguments.length;++r<i;)e[n=arguments[r]]=p(e,t,t[n]);return e};var au=["webkit","ms","moz","Moz","o","O"];Xo.dispatch=function(){for(var e=new m,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=g(e);return e},m.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(n>=0&&(r=e.substring(n+1),e=e.substring(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},Xo.event=null,Xo.requote=function(e){return e.replace(fu,"\\$&")};var fu=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,lu={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]},cu=function(e,t){return t.querySelector(e)},hu=function(e,t){return t.querySelectorAll(e)},pu=Ko.matches||Ko[d(Ko,"matchesSelector")],du=function(e,t){return pu.call(e,t)};"function"==typeof Sizzle&&(cu=function(e,t){return Sizzle(e,t)[0]||null},hu=Sizzle,du=Sizzle.matchesSelector),Xo.selection=function(){return yu};var vu=Xo.selection.prototype=[];vu.select=function(e){var t,n,r,i,s=[];e=S(e);for(var o=-1,u=this.length;++o<u;){s.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var a=-1,f=r.length;++a<f;)(i=r[a])?(t.push(n=e.call(i,i.__data__,a,o)),n&&"__data__"in i&&(n.__data__=i.__data__)):t.push(null)}return E(s)},vu.selectAll=function(e){var t,n,r=[];e=x(e);for(var i=-1,s=this.length;++i<s;)for(var o=this[i],u=-1,a=o.length;++u<a;)(n=o[u])&&(r.push(t=$o(e.call(n,n.__data__,u,i))),t.parentNode=n);return E(r)};var mu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Xo.ns={prefix:mu,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&(n=e.substring(0,t),e=e.substring(t+1)),mu.hasOwnProperty(n)?{space:mu[n],local:e}:e}},vu.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return e=Xo.ns.qualify(e),e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(T(t,e[t]));return this}return this.each(T(e,t))},vu.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),r=(e=k(e)).length,i=-1;if(t=n.classList){for(;++i<r;)if(!t.contains(e[i]))return!1}else for(t=n.getAttribute("class");++i<r;)if(!C(e[i]).test(t))return!1;return!0}for(t in e)this.each(L(t,e[t]));return this}return this.each(L(e,t))},vu.style=function(e,t,n){var r=arguments.length;if(3>r){if("string"!=typeof e){2>r&&(t="");for(n in e)this.each(O(n,e[n],t));return this}if(2>r)return Qo.getComputedStyle(this.node(),null).getPropertyValue(e);n=""}return this.each(O(e,t,n))},vu.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(M(t,e[t]));return this}return this.each(M(e,t))},vu.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},vu.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},vu.append=function(e){return e=_(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},vu.insert=function(e,t){return e=_(e),t=S(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},vu.remove=function(){return this.each(function(){var e=this.parentNode;e&&e.removeChild(this)})},vu.data=function(e,t){function n(e,n){var r,i,s,u=e.length,c=n.length,h=Math.min(u,c),p=new Array(c),d=new Array(c),v=new Array(u);if(t){var m,g=new o,y=new o,b=[];for(r=-1;++r<u;)m=t.call(i=e[r],i.__data__,r),g.has(m)?v[r]=i:g.set(m,i),b.push(m);for(r=-1;++r<c;)m=t.call(n,s=n[r],r),(i=g.get(m))?(p[r]=i,i.__data__=s):y.has(m)||(d[r]=D(s)),y.set(m,s),g.remove(m);for(r=-1;++r<u;)g.has(b[r])&&(v[r]=e[r])}else{for(r=-1;++r<h;)i=e[r],s=n[r],i?(i.__data__=s,p[r]=i):d[r]=D(s);for(;c>r;++r)d[r]=D(n[r]);for(;u>r;++r)v[r]=e[r]}d.update=p,d.parentNode=p.parentNode=v.parentNode=e.parentNode,a.push(d),f.push(p),l.push(v)}var r,i,s=-1,u=this.length;if(!arguments.length){for(e=new Array(u=(r=this[0]).length);++s<u;)(i=r[s])&&(e[s]=i.__data__);return e}var a=j([]),f=E([]),l=E([]);if("function"==typeof e)for(;++s<u;)n(r=this[s],e.call(r,r.parentNode.__data__,s));else for(;++s<u;)n(r=this[s],e);return f.enter=function(){return a},f.exit=function(){return l},f},vu.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},vu.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=P(e));for(var s=0,o=this.length;o>s;s++){i.push(t=[]),t.parentNode=(n=this[s]).parentNode;for(var u=0,a=n.length;a>u;u++)(r=n[u])&&e.call(r,r.__data__,u,s)&&t.push(r)}return E(i)},vu.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],i=r.length-1,s=r[i];--i>=0;)(n=r[i])&&(s&&s!==n.nextSibling&&s.parentNode.insertBefore(n,s),s=n);return this},vu.sort=function(e){e=H.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},vu.each=function(e){return B(this,function(t,n,r){e.call(t,t.__data__,n,r)})},vu.call=function(e){var t=$o(arguments);return e.apply(t[0]=this,t),this},vu.empty=function(){return!this.node()},vu.node=function(){for(var e=0,t=this.length;t>e;e++)for(var n=this[e],r=0,i=n.length;i>r;r++){var s=n[r];if(s)return s}return null},vu.size=function(){var e=0;return this.each(function(){++e}),e};var gu=[];Xo.selection.enter=j,Xo.selection.enter.prototype=gu,gu.append=vu.append,gu.empty=vu.empty,gu.node=vu.node,gu.call=vu.call,gu.size=vu.size,gu.select=function(e){for(var t,n,r,i,s,o=[],u=-1,a=this.length;++u<a;){r=(i=this[u]).update,o.push(t=[]),t.parentNode=i.parentNode;for(var f=-1,l=i.length;++f<l;)(s=i[f])?(t.push(r[f]=n=e.call(i.parentNode,s.__data__,f,u)),n.__data__=s.__data__):t.push(null)}return E(o)},gu.insert=function(e,t){return arguments.length<2&&(t=F(this)),vu.insert.call(this,e,t)},vu.transition=function(){for(var e,t,n=Cf||++Mf,r=[],i=kf||{time:Date.now(),ease:wi,delay:0,duration:250},s=-1,o=this.length;++s<o;){r.push(e=[]);for(var u=this[s],a=-1,f=u.length;++a<f;)(t=u[a])&&jo(t,a,n,i),e.push(t)}return Po(r,n)},vu.interrupt=function(){return this.each(I)},Xo.select=function(e){var t=["string"==typeof e?cu(e,Jo):e];return t.parentNode=Ko,E([t])},Xo.selectAll=function(e){var t=$o("string"==typeof e?hu(e,Jo):e);return t.parentNode=Ko,E([t])};var yu=Xo.select(Ko);vu.on=function(e,t,n){var r=arguments.length;if(3>r){if("string"!=typeof e){2>r&&(t=!1);for(n in e)this.each(q(n,e[n],t));return this}if(2>r)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(q(e,t,n))};var bu=Xo.map({mouseenter:"mouseover",mouseleave:"mouseout"});bu.forEach(function(e){"on"+e in Jo&&bu.remove(e)});var wu="onselectstart"in Jo?null:d(Ko.style,"userSelect"),Eu=0;Xo.mouse=function(e){return W(e,b())};var Su=/WebKit/.test(Qo.navigator.userAgent)?-1:0;Xo.touches=function(e,t){return arguments.length<2&&(t=b().touches),t?$o(t).map(function(t){var n=W(e,t);return n.identifier=t.identifier,n}):[]},Xo.behavior.drag=function(){function e(){this.on("mousedown.drag",i).on("touchstart.drag",s)}function t(e,t,i,s,o){return function(){function u(){var e,n,r=t(h,v);r&&(e=r[0]-b[0],n=r[1]-b[1],d|=e|n,b=r,p({type:"drag",x:r[0]+f[0],y:r[1]+f[1],dx:e,dy:n}))}function a(){t(h,v)&&(g.on(s+m,null).on(o+m,null),y(d&&Xo.event.target===c),p({type:"dragend"}))}var f,l=this,c=Xo.event.target,h=l.parentNode,p=n.of(l,arguments),d=0,v=e(),m=".drag"+(null==v?"":"-"+v),g=Xo.select(i()).on(s+m,u).on(o+m,a),y=z(),b=t(h,v);r?(f=r.apply(l,arguments),f=[f.x-b[0],f.y-b[1]]):f=[0,0],p({type:"dragstart"})}}var n=w(e,"drag","dragstart","dragend"),r=null,i=t(v,Xo.mouse,$,"mousemove","mouseup"),s=t(X,Xo.touch,V,"touchmove","touchend");return e.origin=function(t){return arguments.length?(r=t,e):r},Xo.rebind(e,n,"on")};var xu=Math.PI,Tu=2*xu,Nu=xu/2,Cu=1e-6,ku=Cu*Cu,Lu=xu/180,Au=180/xu,Ou=Math.SQRT2,Mu=2,_u=4;Xo.interpolateZoom=function(e,t){function n(e){var t=e*y;if(g){var n=Z(v),o=s/(Mu*h)*(n*et(Ou*t+v)-Y(v));return[r+o*f,i+o*l,s*n/Z(Ou*t+v)]}return[r+e*f,i+e*l,s*Math.exp(Ou*t)]}var r=e[0],i=e[1],s=e[2],o=t[0],u=t[1],a=t[2],f=o-r,l=u-i,c=f*f+l*l,h=Math.sqrt(c),p=(a*a-s*s+_u*c)/(2*s*Mu*h),d=(a*a-s*s-_u*c)/(2*a*Mu*h),v=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(d*d+1)-d),g=m-v,y=(g||Math.log(a/s))/Ou;return n.duration=1e3*y,n},Xo.behavior.zoom=function(){function e(e){e.on(k,f).on(Hu+".zoom",c).on("dblclick.zoom",h).on(O,l)}function t(e){return[(e[0]-T.x)/T.k,(e[1]-T.y)/T.k]}function n(e){return[e[0]*T.k+T.x,e[1]*T.k+T.y]}function r(e){T.k=Math.max(C[0],Math.min(C[1],e))}function i(e,t){t=n(t),T.x+=e[0]-t[0],T.y+=e[1]-t[1]}function s(){E&&E.domain(b.range().map(function(e){return(e-T.x)/T.k}).map(b.invert)),x&&x.domain(S.range().map(function(e){return(e-T.y)/T.k}).map(S.invert))}function o(e){e({type:"zoomstart"})}function u(e){s(),e({type:"zoom",scale:T.k,translate:[T.x,T.y]})}function a(e){e({type:"zoomend"})}function f(){function e(){l=1,i(Xo.mouse(r),h),u(f)}function n(){c.on(L,null).on(A,null),p(l&&Xo.event.target===s),a(f)}var r=this,s=Xo.event.target,f=M.of(r,arguments),l=0,c=Xo.select(Qo).on(L,e).on(A,n),h=t(Xo.mouse(r)),p=z();I.call(r),o(f)}function l(){function e(){var e=Xo.touches(p);return h=T.k,e.forEach(function(e){e.identifier in v&&(v[e.identifier]=t(e))}),e}function n(){var t=Xo.event.target;Xo.select(t).on(w,s).on(E,c),S.push(t);for(var n=Xo.event.changedTouches,o=0,a=n.length;a>o;++o)v[n[o].identifier]=null;var f=e(),l=Date.now();if(1===f.length){if(500>l-g){var h=f[0],p=v[h.identifier];r(2*T.k),i(h,p),y(),u(d)}g=l}else if(f.length>1){var h=f[0],b=f[1],x=h[0]-b[0],N=h[1]-b[1];m=x*x+N*N}}function s(){for(var e,t,n,s,o=Xo.touches(p),a=0,f=o.length;f>a;++a,s=null)if(n=o[a],s=v[n.identifier]){if(t)break;e=n,t=s}if(s){var l=(l=n[0]-e[0])*l+(l=n[1]-e[1])*l,c=m&&Math.sqrt(l/m);e=[(e[0]+n[0])/2,(e[1]+n[1])/2],t=[(t[0]+s[0])/2,(t[1]+s[1])/2],r(c*h)}g=null,i(e,t),u(d)}function c(){if(Xo.event.touches.length){for(var t=Xo.event.changedTouches,n=0,r=t.length;r>n;++n)delete v[t[n].identifier];for(var i in v)return void e()}Xo.selectAll(S).on(b,null),x.on(k,f).on(O,l),N(),a(d)}var h,p=this,d=M.of(p,arguments),v={},m=0,b=".zoom-"+Xo.event.changedTouches[0].identifier,w="touchmove"+b,E="touchend"+b,S=[],x=Xo.select(p).on(k,null).on(O,n),N=z();I.call(p),n(),o(d)}function c(){var e=M.of(this,arguments);m?clearTimeout(m):(p=t(d=v||Xo.mouse(this)),I.call(this),o(e)),m=setTimeout(function(){m=null,a(e)},50),y(),r(Math.pow(2,.002*Du())*T.k),i(d,p),u(e)}function h(){var e=M.of(this,arguments),n=Xo.mouse(this),s=t(n),f=Math.log(T.k)/Math.LN2;o(e),r(Math.pow(2,Xo.event.shiftKey?Math.ceil(f)-1:Math.floor(f)+1)),i(n,s),u(e),a(e)}var p,d,v,m,g,b,E,S,x,T={x:0,y:0,k:1},N=[960,500],C=Pu,k="mousedown.zoom",L="mousemove.zoom",A="mouseup.zoom",O="touchstart.zoom",M=w(e,"zoomstart","zoom","zoomend");return e.event=function(e){e.each(function(){var e=M.of(this,arguments),t=T;Cf?Xo.select(this).transition().each("start.zoom",function(){T=this.__chart__||{x:0,y:0,k:1},o(e)}).tween("zoom:zoom",function(){var n=N[0],r=N[1],i=n/2,s=r/2,o=Xo.interpolateZoom([(i-T.x)/T.k,(s-T.y)/T.k,n/T.k],[(i-t.x)/t.k,(s-t.y)/t.k,n/t.k]);return function(t){var r=o(t),a=n/r[2];this.__chart__=T={x:i-r[0]*a,y:s-r[1]*a,k:a},u(e)}}).each("end.zoom",function(){a(e)}):(this.__chart__=T,o(e),u(e),a(e))})},e.translate=function(t){return arguments.length?(T={x:+t[0],y:+t[1],k:T.k},s(),e):[T.x,T.y]},e.scale=function(t){return arguments.length?(T={x:T.x,y:T.y,k:+t},s(),e):T.k},e.scaleExtent=function(t){return arguments.length?(C=null==t?Pu:[+t[0],+t[1]],e):C},e.center=function(t){return arguments.length?(v=t&&[+t[0],+t[1]],e):v},e.size=function(t){return arguments.length?(N=t&&[+t[0],+t[1]],e):N},e.x=function(t){return arguments.length?(E=t,b=t.copy(),T={x:0,y:0,k:1},e):E},e.y=function(t){return arguments.length?(x=t,S=t.copy(),T={x:0,y:0,k:1},e):x},Xo.rebind(e,M,"on")};var Du,Pu=[0,1/0],Hu="onwheel"in Jo?(Du=function(){return-Xo.event.deltaY*(Xo.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Jo?(Du=function(){return Xo.event.wheelDelta},"mousewheel"):(Du=function(){return-Xo.event.detail},"MozMousePixelScroll");Xo.color=nt,nt.prototype.toString=function(){return this.rgb()+""},Xo.hsl=rt;var Bu=rt.prototype=new nt;Bu.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new rt(this.h,this.s,this.l/e)},Bu.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new rt(this.h,this.s,e*this.l)},Bu.rgb=function(){return it(this.h,this.s,this.l)},Xo.hcl=st;var ju=st.prototype=new nt;ju.brighter=function(e){return new st(this.h,this.c,Math.min(100,this.l+Fu*(arguments.length?e:1)))},ju.darker=function(e){return new st(this.h,this.c,Math.max(0,this.l-Fu*(arguments.length?e:1)))},ju.rgb=function(){return ot(this.h,this.c,this.l).rgb()},Xo.lab=ut;var Fu=18,Iu=.95047,qu=1,Ru=1.08883,Uu=ut.prototype=new nt;Uu.brighter=function(e){return new ut(Math.min(100,this.l+Fu*(arguments.length?e:1)),this.a,this.b)},Uu.darker=function(e){return new ut(Math.max(0,this.l-Fu*(arguments.length?e:1)),this.a,this.b)},Uu.rgb=function(){return at(this.l,this.a,this.b)},Xo.rgb=pt;var zu=pt.prototype=new nt;zu.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;return t||n||r?(t&&i>t&&(t=i),n&&i>n&&(n=i),r&&i>r&&(r=i),new pt(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))):new pt(i,i,i)},zu.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new pt(e*this.r,e*this.g,e*this.b)},zu.hsl=function(){return yt(this.r,this.g,this.b)},zu.toString=function(){return"#"+mt(this.r)+mt(this.g)+mt(this.b)};var Wu=Xo.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Wu.forEach(function(e,t){Wu.set(e,dt(t))}),Xo.functor=St,Xo.xhr=Tt(xt),Xo.dsv=function(e,t){function n(e,n,s){arguments.length<3&&(s=n,n=null);var o=Nt(e,t,null==n?r:i(n),s);return o.row=function(e){return arguments.length?o.response(null==(n=e)?r:i(e)):n},o}function r(e){return n.parse(e.responseText)}function i(e){return function(t){return n.parse(t.responseText,e)}}function s(t){return t.map(o).join(e)}function o(e){return u.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var u=new RegExp('["'+e+"\n]"),a=e.charCodeAt(0);return n.parse=function(e,t){var r;return n.parseRows(e,function(e,n){if(r)return r(e,n-1);var i=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");r=t?function(e,n){return t(i(e),n)}:i})},n.parseRows=function(e,t){function n(){if(l>=f)return o;if(i)return i=!1,s;var t=l;if(34===e.charCodeAt(t)){for(var n=t;n++<f;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}l=n+2;var r=e.charCodeAt(n+1);return 13===r?(i=!0,10===e.charCodeAt(n+2)&&++l):10===r&&(i=!0),e.substring(t+1,n).replace(/""/g,'"')}for(;f>l;){var r=e.charCodeAt(l++),u=1;if(10===r)i=!0;else if(13===r)i=!0,10===e.charCodeAt(l)&&(++l,++u);else if(r!==a)continue;return e.substring(t,l-u)}return e.substring(t)}for(var r,i,s={},o={},u=[],f=e.length,l=0,c=0;(r=n())!==o;){for(var h=[];r!==s&&r!==o;)h.push(r),r=n();(!t||(h=t(h,c++)))&&u.push(h)}return u},n.format=function(t){if(Array.isArray(t[0]))return n.formatRows(t);var r=new h,i=[];return t.forEach(function(e){for(var t in e)r.has(t)||i.push(r.add(t))}),[i.map(o).join(e)].concat(t.map(function(t){return i.map(function(e){return o(t[e])}).join(e)})).join("\n")},n.formatRows=function(e){return e.map(s).join("\n")},n},Xo.csv=Xo.dsv(",","text/csv"),Xo.tsv=Xo.dsv("	","text/tab-separated-values"),Xo.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=b().changedTouches),t)for(var r,i=0,s=t.length;s>i;++i)if((r=t[i]).identifier===n)return W(e,r)};var Xu,Vu,$u,Ju,Ku,Qu=Qo[d(Qo,"requestAnimationFrame")]||function(e){setTimeout(e,17)};Xo.timer=function(e,t,n){var r=arguments.length;2>r&&(t=0),3>r&&(n=Date.now());var i=n+t,s={c:e,t:i,f:!1,n:null};Vu?Vu.n=s:Xu=s,Vu=s,$u||(Ju=clearTimeout(Ju),$u=1,Qu(kt))},Xo.timer.flush=function(){Lt(),At()},Xo.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var Gu=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(Mt);Xo.formatPrefix=function(e,t){var n=0;return e&&(0>e&&(e*=-1),t&&(e=Xo.round(e,Ot(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),Gu[8+n/3]};var Yu=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Zu=Xo.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=Xo.round(e,Ot(e,t))).toFixed(Math.max(0,Math.min(20,Ot(e*(1+1e-15),t))))}}),ea=Xo.time={},ta=Date;Pt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){na.setUTCDate.apply(this._,arguments)},setDay:function(){na.setUTCDay.apply(this._,arguments)},setFullYear:function(){na.setUTCFullYear.apply(this._,arguments)},setHours:function(){na.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){na.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){na.setUTCMinutes.apply(this._,arguments)},setMonth:function(){na.setUTCMonth.apply(this._,arguments)},setSeconds:function(){na.setUTCSeconds.apply(this._,arguments)},setTime:function(){na.setTime.apply(this._,arguments)}};var na=Date.prototype;ea.year=Ht(function(e){return e=ea.day(e),e.setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),ea.years=ea.year.range,ea.years.utc=ea.year.utc.range,ea.day=Ht(function(e){var t=new ta(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),ea.days=ea.day.range,ea.days.utc=ea.day.utc.range,ea.dayOfYear=function(e){var t=ea.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var n=ea[e]=Ht(function(e){return(e=ea.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var n=ea.year(e).getDay();return Math.floor((ea.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});ea[e+"s"]=n.range,ea[e+"s"].utc=n.utc.range,ea[e+"OfYear"]=function(e){var n=ea.year(e).getDay();return Math.floor((ea.dayOfYear(e)+(n+t)%7)/7)}}),ea.week=ea.sunday,ea.weeks=ea.sunday.range,ea.weeks.utc=ea.sunday.utc.range,ea.weekOfYear=ea.sundayOfYear;var ra={"-":"",_:" ",0:"0"},ia=/^\s*\d+/,sa=/^%/;Xo.locale=function(e){return{numberFormat:_t(e),timeFormat:jt(e)}};var oa=Xo.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Xo.format=oa.numberFormat,Xo.geo={},sn.prototype={s:0,t:0,add:function(e){on(e,this.t,ua),on(ua.s,this.s,this),this.s?this.t+=ua.t:this.s=ua.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ua=new sn;Xo.geo.stream=function(e,t){e&&aa.hasOwnProperty(e.type)?aa[e.type](e,t):un(e,t)};var aa={Feature:function(e,t){un(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)un(n[r].geometry,t)}},fa={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){an(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)an(n[r],t,0)},Polygon:function(e,t){fn(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)fn(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)un(n[r],t)}};Xo.geo.area=function(e){return la=0,Xo.geo.stream(e,ha),la};var la,ca=new sn,ha={sphere:function(){la+=4*xu},point:v,lineStart:v,lineEnd:v,polygonStart:function(){ca.reset(),ha.lineStart=ln},polygonEnd:function(){var e=2*ca;la+=0>e?4*xu+e:e,ha.lineStart=ha.lineEnd=ha.point=v}};Xo.geo.bounds=function(){function e(e,t){b.push(w=[l=e,h=e]),c>t&&(c=t),t>p&&(p=t)}function t(t,n){var r=cn([t*Lu,n*Lu]);if(g){var i=pn(g,r),s=[i[1],-i[0],0],o=pn(s,i);mn(o),o=gn(o);var a=t-d,f=a>0?1:-1,v=o[0]*Au*f,m=su(a)>180;if(m^(v>f*d&&f*t>v)){var y=o[1]*Au;y>p&&(p=y)}else if(v=(v+360)%360-180,m^(v>f*d&&f*t>v)){var y=-o[1]*Au;c>y&&(c=y)}else c>n&&(c=n),n>p&&(p=n);m?d>t?u(l,t)>u(l,h)&&(h=t):u(t,h)>u(l,h)&&(l=t):h>=l?(l>t&&(l=t),t>h&&(h=t)):t>d?u(l,t)>u(l,h)&&(h=t):u(t,h)>u(l,h)&&(l=t)}else e(t,n);g=r,d=t}function n(){E.point=t}function r(){w[0]=l,w[1]=h,E.point=e,g=null}function i(e,n){if(g){var r=e-d;y+=su(r)>180?r+(r>0?360:-360):r}else v=e,m=n;ha.point(e,n),t(e,n)}function s(){ha.lineStart()}function o(){i(v,m),ha.lineEnd(),su(y)>Cu&&(l=-(h=180)),w[0]=l,w[1]=h,g=null}function u(e,t){return(t-=e)<0?t+360:t}function a(e,t){return e[0]-t[0]}function f(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var l,c,h,p,d,v,m,g,y,b,w,E={point:e,lineStart:n,lineEnd:r,polygonStart:function(){E.point=i,E.lineStart=s,E.lineEnd=o,y=0,ha.polygonStart()},polygonEnd:function(){ha.polygonEnd(),E.point=e,E.lineStart=n,E.lineEnd=r,0>ca?(l=-(h=180),c=-(p=90)):y>Cu?p=90:-Cu>y&&(c=-90),w[0]=l,w[1]=h}};return function(e){p=h=-(l=c=1/0),b=[],Xo.geo.stream(e,E);var t=b.length;if(t){b.sort(a);for(var n,r=1,i=b[0],s=[i];t>r;++r)n=b[r],f(n[0],i)||f(n[1],i)?(u(i[0],n[1])>u(i[0],i[1])&&(i[1]=n[1]),u(n[0],i[1])>u(i[0],i[1])&&(i[0]=n[0])):s.push(i=n);for(var o,n,d=-1/0,t=s.length-1,r=0,i=s[t];t>=r;i=n,++r)n=s[r],(o=u(i[1],n[0]))>d&&(d=o,l=n[0],h=i[1])}return b=w=null,1/0===l||1/0===c?[[0/0,0/0],[0/0,0/0]]:[[l,c],[h,p]]}}(),Xo.geo.centroid=function(e){pa=da=va=ma=ga=ya=ba=wa=Ea=Sa=xa=0,Xo.geo.stream(e,Ta);var t=Ea,n=Sa,r=xa,i=t*t+n*n+r*r;return ku>i&&(t=ya,n=ba,r=wa,Cu>da&&(t=va,n=ma,r=ga),i=t*t+n*n+r*r,ku>i)?[0/0,0/0]:[Math.atan2(n,t)*Au,G(r/Math.sqrt(i))*Au]};var pa,da,va,ma,ga,ya,ba,wa,Ea,Sa,xa,Ta={sphere:v,point:bn,lineStart:En,lineEnd:Sn,polygonStart:function(){Ta.lineStart=xn},polygonEnd:function(){Ta.lineStart=En}},Na=Ln(Tn,Dn,Hn,[-xu,-xu/2]),Ca=1e9;Xo.geo.clipExtent=function(){var e,t,n,r,i,s,o={stream:function(e){return i&&(i.valid=!1),i=s(e),i.valid=!0,i},extent:function(u){return arguments.length?(s=Fn(e=+u[0][0],t=+u[0][1],n=+u[1][0],r=+u[1][1]),i&&(i.valid=!1,i=null),o):[[e,t],[n,r]]}};return o.extent([[0,0],[960,500]])},(Xo.geo.conicEqualArea=function(){return qn(Rn)}).raw=Rn,Xo.geo.albers=function(){return Xo.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},Xo.geo.albersUsa=function(){function e(e){var s=e[0],o=e[1];return t=null,n(s,o),t||(r(s,o),t)||i(s,o),t}var t,n,r,i,s=Xo.geo.albers(),o=Xo.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=Xo.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a={point:function(e,n){t=[e,n]}};return e.invert=function(e){var t=s.scale(),n=s.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&.234>i&&r>=-.425&&-.214>r?o:i>=.166&&.234>i&&r>=-.214&&-.115>r?u:s).invert(e)},e.stream=function(e){var t=s.stream(e),n=o.stream(e),r=u.stream(e);return{point:function(e,i){t.point(e,i),n.point(e,i),r.point(e,i)},sphere:function(){t.sphere(),n.sphere(),r.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},e.precision=function(t){return arguments.length?(s.precision(t),o.precision(t),u.precision(t),e):s.precision()},e.scale=function(t){return arguments.length?(s.scale(t),o.scale(.35*t),u.scale(t),e.translate(s.translate())):s.scale()},e.translate=function(t){if(!arguments.length)return s.translate();var f=s.scale(),l=+t[0],c=+t[1];return n=s.translate(t).clipExtent([[l-.455*f,c-.238*f],[l+.455*f,c+.238*f]]).stream(a).point,r=o.translate([l-.307*f,c+.201*f]).clipExtent([[l-.425*f+Cu,c+.12*f+Cu],[l-.214*f-Cu,c+.234*f-Cu]]).stream(a).point,i=u.translate([l-.205*f,c+.212*f]).clipExtent([[l-.214*f+Cu,c+.166*f+Cu],[l-.115*f-Cu,c+.234*f-Cu]]).stream(a).point,e},e.scale(1070)};var ka,La,Aa,Oa,Ma,_a,Da={point:v,lineStart:v,lineEnd:v,polygonStart:function(){La=0,Da.lineStart=Un},polygonEnd:function(){Da.lineStart=Da.lineEnd=Da.point=v,ka+=su(La/2)}},Pa={point:zn,lineStart:v,lineEnd:v,polygonStart:v,polygonEnd:v},Ha={point:Vn,lineStart:$n,lineEnd:Jn,polygonStart:function(){Ha.lineStart=Kn},polygonEnd:function(){Ha.point=Vn,Ha.lineStart=$n,Ha.lineEnd=Jn}};Xo.geo.path=function(){function e(e){return e&&("function"==typeof u&&s.pointRadius(+u.apply(this,arguments)),o&&o.valid||(o=i(s)),Xo.geo.stream(e,o)),s.result()}function t(){return o=null,e}var n,r,i,s,o,u=4.5;return e.area=function(e){return ka=0,Xo.geo.stream(e,i(Da)),ka},e.centroid=function(e){return va=ma=ga=ya=ba=wa=Ea=Sa=xa=0,Xo.geo.stream(e,i(Ha)),xa?[Ea/xa,Sa/xa]:wa?[ya/wa,ba/wa]:ga?[va/ga,ma/ga]:[0/0,0/0]},e.bounds=function(e){return Ma=_a=-(Aa=Oa=1/0),Xo.geo.stream(e,i(Pa)),[[Aa,Oa],[Ma,_a]]},e.projection=function(e){return arguments.length?(i=(n=e)?e.stream||Yn(e):xt,t()):n},e.context=function(e){return arguments.length?(s=null==(r=e)?new Wn:new Qn(e),"function"!=typeof u&&s.pointRadius(u),t()):r},e.pointRadius=function(t){return arguments.length?(u="function"==typeof t?t:(s.pointRadius(+t),+t),e):u},e.projection(Xo.geo.albersUsa()).context(null)},Xo.geo.transform=function(e){return{stream:function(t){var n=new Zn(t);for(var r in e)n[r]=e[r];return n}}},Zn.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},Xo.geo.projection=tr,Xo.geo.projectionMutator=nr,(Xo.geo.equirectangular=function(){return tr(ir)}).raw=ir.invert=ir,Xo.geo.rotation=function(e){function t(t){return t=e(t[0]*Lu,t[1]*Lu),t[0]*=Au,t[1]*=Au,t}return e=or(e[0]%360*Lu,e[1]*Lu,e.length>2?e[2]*Lu:0),t.invert=function(t){return t=e.invert(t[0]*Lu,t[1]*Lu),t[0]*=Au,t[1]*=Au,t},t},sr.invert=ir,Xo.geo.circle=function(){function e(){var e="function"==typeof r?r.apply(this,arguments):r,t=or(-e[0]*Lu,-e[1]*Lu,0).invert,i=[];return n(null,null,1,{point:function(e,n){i.push(e=t(e,n)),e[0]*=Au,e[1]*=Au}}),{type:"Polygon",coordinates:[i]}}var t,n,r=[0,0],i=6;return e.origin=function(t){return arguments.length?(r=t,e):r},e.angle=function(r){return arguments.length?(n=lr((t=+r)*Lu,i*Lu),e):t},e.precision=function(r){return arguments.length?(n=lr(t*Lu,(i=+r)*Lu),e):i},e.angle(90)},Xo.geo.distance=function(e,t){var n,r=(t[0]-e[0])*Lu,i=e[1]*Lu,s=t[1]*Lu,o=Math.sin(r),u=Math.cos(r),a=Math.sin(i),f=Math.cos(i),l=Math.sin(s),c=Math.cos(s);return Math.atan2(Math.sqrt((n=c*o)*n+(n=f*l-a*c*u)*n),a*l+f*c*u)},Xo.geo.graticule=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return Xo.range(Math.ceil(s/m)*m,i,m).map(h).concat(Xo.range(Math.ceil(f/g)*g,a,g).map(p)).concat(Xo.range(Math.ceil(r/d)*d,n,d).filter(function(e){return su(e%m)>Cu}).map(l)).concat(Xo.range(Math.ceil(u/v)*v,o,v).filter(function(e){return su(e%g)>Cu}).map(c))}var n,r,i,s,o,u,a,f,l,c,h,p,d=10,v=d,m=90,g=360,y=2.5;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[h(s).concat(p(a).slice(1),h(i).reverse().slice(1),p(f).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.majorExtent(t).minorExtent(t):e.minorExtent()},e.majorExtent=function(t){return arguments.length?(s=+t[0][0],i=+t[1][0],f=+t[0][1],a=+t[1][1],s>i&&(t=s,s=i,i=t),f>a&&(t=f,f=a,a=t),e.precision(y)):[[s,f],[i,a]]},e.minorExtent=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],u=+t[0][1],o=+t[1][1],r>n&&(t=r,r=n,n=t),u>o&&(t=u,u=o,o=t),e.precision(y)):[[r,u],[n,o]]},e.step=function(t){return arguments.length?e.majorStep(t).minorStep(t):e.minorStep()},e.majorStep=function(t){return arguments.length?(m=+t[0],g=+t[1],e):[m,g]},e.minorStep=function(t){return arguments.length?(d=+t[0],v=+t[1],e):[d,v]},e.precision=function(t){return arguments.length?(y=+t,l=hr(u,o,90),c=pr(r,n,y),h=hr(f,a,90),p=pr(s,i,y),e):y},e.majorExtent([[-180,-90+Cu],[180,90-Cu]]).minorExtent([[-180,-80-Cu],[180,80+Cu]])},Xo.geo.greatArc=function(){function e(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),n||i.apply(this,arguments)]}}var t,n,r=dr,i=vr;return e.distance=function(){return Xo.geo.distance(t||r.apply(this,arguments),n||i.apply(this,arguments))},e.source=function(n){return arguments.length?(r=n,t="function"==typeof n?null:n,e):r},e.target=function(t){return arguments.length?(i=t,n="function"==typeof t?null:t,e):i},e.precision=function(){return arguments.length?e:0},e},Xo.geo.interpolate=function(e,t){return mr(e[0]*Lu,e[1]*Lu,t[0]*Lu,t[1]*Lu)},Xo.geo.length=function(e){return Ba=0,Xo.geo.stream(e,ja),Ba};var Ba,ja={sphere:v,point:v,lineStart:gr,lineEnd:v,polygonStart:v,polygonEnd:v},Fa=yr(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(Xo.geo.azimuthalEqualArea=function(){return tr(Fa)}).raw=Fa;var Ia=yr(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},xt);(Xo.geo.azimuthalEquidistant=function(){return tr(Ia)}).raw=Ia,(Xo.geo.conicConformal=function(){return qn(br)}).raw=br,(Xo.geo.conicEquidistant=function(){return qn(wr)}).raw=wr;var qa=yr(function(e){return 1/e},Math.atan);(Xo.geo.gnomonic=function(){return tr(qa)}).raw=qa,Er.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Nu]},(Xo.geo.mercator=function(){return Sr(Er)}).raw=Er;var Ra=yr(function(){return 1},Math.asin);(Xo.geo.orthographic=function(){return tr(Ra)}).raw=Ra;var Ua=yr(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(Xo.geo.stereographic=function(){return tr(Ua)}).raw=Ua,xr.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Nu]},(Xo.geo.transverseMercator=function(){var e=Sr(xr),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90])}).raw=xr,Xo.geom={},Xo.geom.hull=function(e){function t(e){if(e.length<3)return[];var t,i=St(n),s=St(r),o=e.length,u=[],a=[];for(t=0;o>t;t++)u.push([+i.call(this,e[t],t),+s.call(this,e[t],t),t]);for(u.sort(kr),t=0;o>t;t++)a.push([u[t][0],-u[t][1]]);var f=Cr(u),l=Cr(a),c=l[0]===f[0],h=l[l.length-1]===f[f.length-1],p=[];for(t=f.length-1;t>=0;--t)p.push(e[u[f[t]][2]]);for(t=+c;t<l.length-h;++t)p.push(e[u[l[t]][2]]);return p}var n=Tr,r=Nr;return arguments.length?t(e):(t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t)},Xo.geom.polygon=function(e){return lu(e,za),e};var za=Xo.geom.polygon.prototype=[];za.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],i=0;++t<n;)e=r,r=this[t],i+=e[1]*r[0]-e[0]*r[1];return.5*i},za.centroid=function(e){var t,n,r=-1,i=this.length,s=0,o=0,u=this[i-1];for(arguments.length||(e=-1/(6*this.area()));++r<i;)t=u,u=this[r],n=t[0]*u[1]-u[0]*t[1],s+=(t[0]+u[0])*n,o+=(t[1]+u[1])*n;return[s*e,o*e]},za.clip=function(e){for(var t,n,r,i,s,o,u=Or(e),a=-1,f=this.length-Or(this),l=this[f-1];++a<f;){for(t=e.slice(),e.length=0,i=this[a],s=t[(r=t.length-u)-1],n=-1;++n<r;)o=t[n],Lr(o,l,i)?(Lr(s,l,i)||e.push(Ar(s,o,l,i)),e.push(o)):Lr(s,l,i)&&e.push(Ar(s,o,l,i)),s=o;u&&e.push(e[0]),l=i}return e};var Wa,Xa,Va,$a,Ja,Ka=[],Qa=[];Fr.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)e=t[n].edge,e.b&&e.a||t.splice(n,1);return t.sort(qr),t.length},Qr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Gr.prototype={insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=ti(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(Zr(this,n),e=n,n=e.U),n.C=!1,r.C=!0,ei(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(ei(this,n),e=n,n=e.U),n.C=!1,r.C=!0,Zr(this,r))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,s=e.L,o=e.R;if(n=s?o?ti(o):s:o,i?i.L===e?i.L=n:i.R=n:this._=n,s&&o?(r=n.C,n.C=e.C,n.L=s,s.U=n,n!==o?(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=o,o.U=n):(n.U=i,i=n,e=n.R)):(r=e.C,e=n),e&&(e.U=i),!r){if(e&&e.C)return e.C=!1,void 0;do{if(e===this._)break;if(e===i.L){if(t=i.R,t.C&&(t.C=!1,i.C=!0,Zr(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ei(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,Zr(this,i),e=this._;break}}else if(t=i.L,t.C&&(t.C=!1,i.C=!0,ei(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,Zr(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,ei(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}},Xo.geom.voronoi=function(e){function t(e){var t=new Array(e.length),r=u[0][0],i=u[0][1],s=u[1][0],o=u[1][1];return ni(n(e),u).cells.forEach(function(n,u){var a=n.edges,f=n.site,l=t[u]=a.length?a.map(function(e){var t=e.start();return[t.x,t.y]}):f.x>=r&&f.x<=s&&f.y>=i&&f.y<=o?[[r,o],[s,o],[s,i],[r,i]]:[];l.point=e[u]}),t}function n(e){return e.map(function(e,t){return{x:Math.round(s(e,t)/Cu)*Cu,y:Math.round(o(e,t)/Cu)*Cu,i:t}})}var r=Tr,i=Nr,s=r,o=i,u=Ga;return e?t(e):(t.links=function(e){return ni(n(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},t.triangles=function(e){var t=[];return ni(n(e)).cells.forEach(function(n,r){for(var i,s,o=n.site,u=n.edges.sort(qr),a=-1,f=u.length,l=u[f-1].edge,c=l.l===o?l.r:l.l;++a<f;)i=l,s=c,l=u[a].edge,c=l.l===o?l.r:l.l,r<s.i&&r<c.i&&ii(o,s,c)<0&&t.push([e[r],e[s.i],e[c.i]])}),t},t.x=function(e){return arguments.length?(s=St(r=e),t):r},t.y=function(e){return arguments.length?(o=St(i=e),t):i},t.clipExtent=function(e){return arguments.length?(u=null==e?Ga:e,t):u===Ga?null:u},t.size=function(e){return arguments.length?t.clipExtent(e&&[[0,0],e]):u===Ga?null:u&&u[1]},t)};var Ga=[[-1e6,-1e6],[1e6,1e6]];Xo.geom.delaunay=function(e){return Xo.geom.voronoi().triangles(e)},Xo.geom.quadtree=function(e,t,n,r,i){function s(e){function s(e,t,n,r,i,s,o,u){if(!isNaN(n)&&!isNaN(r))if(e.leaf){var a=e.x,l=e.y;if(null!=a)if(su(a-n)+su(l-r)<.01)f(e,t,n,r,i,s,o,u);else{var c=e.point;e.x=e.y=e.point=null,f(e,c,a,l,i,s,o,u),f(e,t,n,r,i,s,o,u)}else e.x=n,e.y=r,e.point=t}else f(e,t,n,r,i,s,o,u)}function f(e,t,n,r,i,o,u,a){var f=.5*(i+u),l=.5*(o+a),c=n>=f,h=r>=l,p=(h<<1)+c;e.leaf=!1,e=e.nodes[p]||(e.nodes[p]=ui()),c?i=f:u=f,h?o=l:a=l,s(e,t,n,r,i,o,u,a)}var l,c,h,p,d,v,m,g,y,b=St(u),w=St(a);if(null!=t)v=t,m=n,g=r,y=i;else if(g=y=-(v=m=1/0),c=[],h=[],d=e.length,o)for(p=0;d>p;++p)l=e[p],l.x<v&&(v=l.x),l.y<m&&(m=l.y),l.x>g&&(g=l.x),l.y>y&&(y=l.y),c.push(l.x),h.push(l.y);else for(p=0;d>p;++p){var E=+b(l=e[p],p),S=+w(l,p);v>E&&(v=E),m>S&&(m=S),E>g&&(g=E),S>y&&(y=S),c.push(E),h.push(S)}var x=g-v,T=y-m;x>T?y=m+x:g=v+T;var N=ui();if(N.add=function(e){s(N,e,+b(e,++p),+w(e,p),v,m,g,y)},N.visit=function(e){ai(e,N,v,m,g,y)},p=-1,null==t){for(;++p<d;)s(N,e[p],c[p],h[p],v,m,g,y);--p}else e.forEach(N.add);return c=h=e=l=null,N}var o,u=Tr,a=Nr;return(o=arguments.length)?(u=si,a=oi,3===o&&(i=n,r=t,n=t=0),s(e)):(s.x=function(e){return arguments.length?(u=e,s):u},s.y=function(e){return arguments.length?(a=e,s):a},s.extent=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),s):null==t?null:[[t,n],[r,i]]},s.size=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=n=0,r=+e[0],i=+e[1]),s):null==t?null:[r-t,i-n]},s)},Xo.interpolateRgb=fi,Xo.interpolateObject=li,Xo.interpolateNumber=ci,Xo.interpolateString=hi;var Ya=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Za=new RegExp(Ya.source,"g");Xo.interpolate=pi,Xo.interpolators=[function(e,t){var n=typeof t;return("string"===n?Wu.has(t)||/^(#|rgb\(|hsl\()/.test(t)?fi:hi:t instanceof nt?fi:Array.isArray(t)?di:"object"===n&&isNaN(t)?li:ci)(e,t)}],Xo.interpolateArray=di;var ef=function(){return xt},tf=Xo.map({linear:ef,poly:Ei,quad:function(){return yi},cubic:function(){return bi},sin:function(){return Si},exp:function(){return xi},circle:function(){return Ti},elastic:Ni,back:Ci,bounce:function(){return ki}}),nf=Xo.map({"in":xt,out:mi,"in-out":gi,"out-in":function(e){return gi(mi(e))}});Xo.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.substring(0,t):e,r=t>=0?e.substring(t+1):"in";return n=tf.get(n)||ef,r=nf.get(r)||xt,vi(r(n.apply(null,Vo.call(arguments,1))))},Xo.interpolateHcl=Li,Xo.interpolateHsl=Ai,Xo.interpolateLab=Oi,Xo.interpolateRound=Mi,Xo.transform=function(e){var t=Jo.createElementNS(Xo.ns.prefix.svg,"g");return(Xo.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new _i(n?n.matrix:rf)})(e)},_i.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var rf={a:1,b:0,c:0,d:1,e:0,f:0};Xo.interpolateTransform=Bi,Xo.layout={},Xo.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(Ii(e[n]));return t}},Xo.layout.chord=function(){function e(){var e,f,c,h,p,d={},v=[],m=Xo.range(s),g=[];for(n=[],r=[],e=0,h=-1;++h<s;){for(f=0,p=-1;++p<s;)f+=i[h][p];v.push(f),g.push(Xo.range(s)),e+=f}for(o&&m.sort(function(e,t){return o(v[e],v[t])}),u&&g.forEach(function(e,t){e.sort(function(e,n){return u(i[t][e],i[t][n])})}),e=(Tu-l*s)/e,f=0,h=-1;++h<s;){for(c=f,p=-1;++p<s;){var y=m[h],b=g[y][p],w=i[y][b],E=f,S=f+=w*e;d[y+"-"+b]={index:y,subindex:b,startAngle:E,endAngle:S,value:w}}r[y]={index:y,startAngle:c,endAngle:f,value:(f-c)/e},f+=l}for(h=-1;++h<s;)for(p=h-1;++p<s;){var x=d[h+"-"+p],T=d[p+"-"+h];(x.value||T.value)&&n.push(x.value<T.value?{source:T,target:x}:{source:x,target:T})}a&&t()}function t(){n.sort(function(e,t){return a((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}var n,r,i,s,o,u,a,f={},l=0;return f.matrix=function(e){return arguments.length?(s=(i=e)&&i.length,n=r=null,f):i},f.padding=function(e){return arguments.length?(l=e,n=r=null,f):l},f.sortGroups=function(e){return arguments.length?(o=e,n=r=null,f):o},f.sortSubgroups=function(e){return arguments.length?(u=e,n=null,f):u},f.sortChords=function(e){return arguments.length?(a=e,n&&t(),f):a},f.chords=function(){return n||e(),n},f.groups=function(){return r||e(),r},f},Xo.layout.force=function(){function e(e){return function(t,n,r,i){if(t.point!==e){var s=t.cx-e.x,o=t.cy-e.y,u=i-n,a=s*s+o*o;if(a>u*u/m){if(d>a){var f=t.charge/a;e.px-=s*f,e.py-=o*f}return!0}if(t.point&&a&&d>a){var f=t.pointCharge/a;e.px-=s*f,e.py-=o*f}}return!t.charge}}function t(e){e.px=Xo.event.x,e.py=Xo.event.y,u.resume()}var n,r,i,s,o,u={},a=Xo.dispatch("start","tick","end"),f=[1,1],l=.9,c=sf,h=of,p=-30,d=uf,v=.1,m=.64,g=[],y=[];return u.tick=function(){if((r*=.99)<.005)return a.end({type:"end",alpha:r=0}),!0;var t,n,u,c,h,d,m,b,w,E=g.length,S=y.length;for(n=0;S>n;++n)u=y[n],c=u.source,h=u.target,b=h.x-c.x,w=h.y-c.y,(d=b*b+w*w)&&(d=r*s[n]*((d=Math.sqrt(d))-i[n])/d,b*=d,w*=d,h.x-=b*(m=c.weight/(h.weight+c.weight)),h.y-=w*m,c.x+=b*(m=1-m),c.y+=w*m);if((m=r*v)&&(b=f[0]/2,w=f[1]/2,n=-1,m))for(;++n<E;)u=g[n],u.x+=(b-u.x)*m,u.y+=(w-u.y)*m;if(p)for(Vi(t=Xo.geom.quadtree(g),r,o),n=-1;++n<E;)(u=g[n]).fixed||t.visit(e(u));for(n=-1;++n<E;)u=g[n],u.fixed?(u.x=u.px,u.y=u.py):(u.x-=(u.px-(u.px=u.x))*l,u.y-=(u.py-(u.py=u.y))*l);a.tick({type:"tick",alpha:r})},u.nodes=function(e){return arguments.length?(g=e,u):g},u.links=function(e){return arguments.length?(y=e,u):y},u.size=function(e){return arguments.length?(f=e,u):f},u.linkDistance=function(e){return arguments.length?(c="function"==typeof e?e:+e,u):c},u.distance=u.linkDistance,u.linkStrength=function(e){return arguments.length?(h="function"==typeof e?e:+e,u):h},u.friction=function(e){return arguments.length?(l=+e,u):l},u.charge=function(e){return arguments.length?(p="function"==typeof e?e:+e,u):p},u.chargeDistance=function(e){return arguments.length?(d=e*e,u):Math.sqrt(d)},u.gravity=function(e){return arguments.length?(v=+e,u):v},u.theta=function(e){return arguments.length?(m=e*e,u):Math.sqrt(m)},u.alpha=function(e){return arguments.length?(e=+e,r?r=e>0?e:0:e>0&&(a.start({type:"start",alpha:r=e}),Xo.timer(u.tick)),u):r},u.start=function(){function e(e,r){if(!n){for(n=new Array(a),u=0;a>u;++u)n[u]=[];for(u=0;f>u;++u){var i=y[u];n[i.source.index].push(i.target),n[i.target.index].push(i.source)}}for(var s,o=n[t],u=-1,f=o.length;++u<f;)if(!isNaN(s=o[u][e]))return s;return Math.random()*r}var t,n,r,a=g.length,l=y.length,d=f[0],v=f[1];for(t=0;a>t;++t)(r=g[t]).index=t,r.weight=0;for(t=0;l>t;++t)r=y[t],"number"==typeof r.source&&(r.source=g[r.source]),"number"==typeof r.target&&(r.target=g[r.target]),++r.source.weight,++r.target.weight;for(t=0;a>t;++t)r=g[t],isNaN(r.x)&&(r.x=e("x",d)),isNaN(r.y)&&(r.y=e("y",v)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(i=[],"function"==typeof c)for(t=0;l>t;++t)i[t]=+c.call(this,y[t],t);else for(t=0;l>t;++t)i[t]=c;if(s=[],"function"==typeof h)for(t=0;l>t;++t)s[t]=+h.call(this,y[t],t);else for(t=0;l>t;++t)s[t]=h;if(o=[],"function"==typeof p)for(t=0;a>t;++t)o[t]=+p.call(this,g[t],t);else for(t=0;a>t;++t)o[t]=p;return u.resume()},u.resume=function(){return u.alpha(.1)},u.stop=function(){return u.alpha(0)},u.drag=function(){return n||(n=Xo.behavior.drag().origin(xt).on("dragstart.force",Ui).on("drag.force",t).on("dragend.force",zi)),arguments.length?(this.on("mouseover.force",Wi).on("mouseout.force",Xi).call(n),void 0):n},Xo.rebind(u,a,"on")};var sf=20,of=1,uf=1/0;Xo.layout.hierarchy=function(){function e(i){var s,o=[i],u=[];for(i.depth=0;null!=(s=o.pop());)if(u.push(s),(f=n.call(e,s,s.depth))&&(a=f.length)){for(var a,f,l;--a>=0;)o.push(l=f[a]),l.parent=s,l.depth=s.depth+1;r&&(s.value=0),s.children=f}else r&&(s.value=+r.call(e,s,s.depth)||0),delete s.children;return Ki(i,function(e){var n,i;t&&(n=e.children)&&n.sort(t),r&&(i=e.parent)&&(i.value+=e.value)}),u}var t=Yi,n=Qi,r=Gi;return e.sort=function(n){return arguments.length?(t=n,e):t},e.children=function(t){return arguments.length?(n=t,e):n},e.value=function(t){return arguments.length?(r=t,e):r},e.revalue=function(t){return r&&(Ji(t,function(e){e.children&&(e.value=0)}),Ki(t,function(t){var n;t.children||(t.value=+r.call(e,t,t.depth)||0),(n=t.parent)&&(n.value+=t.value)})),t},e},Xo.layout.partition=function(){function e(t,n,r,i){var s=t.children;if(t.x=n,t.y=t.depth*i,t.dx=r,t.dy=i,s&&(o=s.length)){var o,u,a,f=-1;for(r=t.value?r/t.value:0;++f<o;)e(u=s[f],n,a=u.value*r,i),n+=a}}function t(e){var n=e.children,r=0;if(n&&(i=n.length))for(var i,s=-1;++s<i;)r=Math.max(r,t(n[s]));return 1+r}function n(n,s){var o=r.call(this,n,s);return e(o[0],0,i[0],i[1]/t(o[0])),o}var r=Xo.layout.hierarchy(),i=[1,1];return n.size=function(e){return arguments.length?(i=e,n):i},$i(n,r)},Xo.layout.pie=function(){function e(s){var o=s.map(function(n,r){return+t.call(e,n,r)}),u=+("function"==typeof r?r.apply(this,arguments):r),a=(("function"==typeof i?i.apply(this,arguments):i)-u)/Xo.sum(o),f=Xo.range(s.length);null!=n&&f.sort(n===af?function(e,t){return o[t]-o[e]}:function(e,t){return n(s[e],s[t])});var l=[];return f.forEach(function(e){var t;l[e]={data:s[e],value:t=o[e],startAngle:u,endAngle:u+=t*a}}),l}var t=Number,n=af,r=0,i=Tu;return e.value=function(n){return arguments.length?(t=n,e):t},e.sort=function(t){return arguments.length?(n=t,e):n},e.startAngle=function(t){return arguments.length?(r=t,e):r},e.endAngle=function(t){return arguments.length?(i=t,e):i},e};var af={};Xo.layout.stack=function(){function e(u,a){var f=u.map(function(n,r){return t.call(e,n,r)}),l=f.map(function(t){return t.map(function(t,n){return[s.call(e,t,n),o.call(e,t,n)]})}),c=n.call(e,l,a);f=Xo.permute(f,c),l=Xo.permute(l,c);var h,p,d,v=r.call(e,l,a),m=f.length,g=f[0].length;for(p=0;g>p;++p)for(i.call(e,f[0][p],d=v[p],l[0][p][1]),h=1;m>h;++h)i.call(e,f[h][p],d+=l[h-1][p][1],l[h][p][1]);return u}var t=xt,n=rs,r=is,i=ns,s=es,o=ts;return e.values=function(n){return arguments.length?(t=n,e):t},e.order=function(t){return arguments.length?(n="function"==typeof t?t:ff.get(t)||rs,e):n},e.offset=function(t){return arguments.length?(r="function"==typeof t?t:lf.get(t)||is,e):r},e.x=function(t){return arguments.length?(s=t,e):s},e.y=function(t){return arguments.length?(o=t,e):o},e.out=function(t){return arguments.length?(i=t,e):i},e};var ff=Xo.map({"inside-out":function(e){var t,n,r=e.length,i=e.map(ss),s=e.map(os),o=Xo.range(r).sort(function(e,t){return i[e]-i[t]}),u=0,a=0,f=[],l=[];for(t=0;r>t;++t)n=o[t],a>u?(u+=s[n],f.push(n)):(a+=s[n],l.push(n));return l.reverse().concat(f)},reverse:function(e){return Xo.range(e.length).reverse()},"default":rs}),lf=Xo.map({silhouette:function(e){var t,n,r,i=e.length,s=e[0].length,o=[],u=0,a=[];for(n=0;s>n;++n){for(t=0,r=0;i>t;t++)r+=e[t][n][1];r>u&&(u=r),o.push(r)}for(n=0;s>n;++n)a[n]=(u-o[n])/2;return a},wiggle:function(e){var t,n,r,i,s,o,u,a,f,l=e.length,c=e[0],h=c.length,p=[];for(p[0]=a=f=0,n=1;h>n;++n){for(t=0,i=0;l>t;++t)i+=e[t][n][1];for(t=0,s=0,u=c[n][0]-c[n-1][0];l>t;++t){for(r=0,o=(e[t][n][1]-e[t][n-1][1])/(2*u);t>r;++r)o+=(e[r][n][1]-e[r][n-1][1])/u;s+=o*e[t][n][1]}p[n]=a-=i?s/i*u:0,f>a&&(f=a)}for(n=0;h>n;++n)p[n]-=f;return p},expand:function(e){var t,n,r,i=e.length,s=e[0].length,o=1/i,u=[];for(n=0;s>n;++n){for(t=0,r=0;i>t;t++)r+=e[t][n][1];if(r)for(t=0;i>t;t++)e[t][n][1]/=r;else for(t=0;i>t;t++)e[t][n][1]=o}for(n=0;s>n;++n)u[n]=0;return u},zero:is});Xo.layout.histogram=function(){function e(e,s){for(var o,u,a=[],f=e.map(n,this),l=r.call(this,f,s),c=i.call(this,l,f,s),s=-1,h=f.length,p=c.length-1,d=t?1:1/h;++s<p;)o=a[s]=[],o.dx=c[s+1]-(o.x=c[s]),o.y=0;if(p>0)for(s=-1;++s<h;)u=f[s],u>=l[0]&&u<=l[1]&&(o=a[Xo.bisect(c,u,1,p)-1],o.y+=d,o.push(e[s]));return a}var t=!0,n=Number,r=ls,i=as;return e.value=function(t){return arguments.length?(n=t,e):n},e.range=function(t){return arguments.length?(r=St(t),e):r},e.bins=function(t){return arguments.length?(i="number"==typeof t?function(e){return fs(e,t)}:St(t),e):i},e.frequency=function(n){return arguments.length?(t=!!n,e):t},e},Xo.layout.pack=function(){function e(e,s){var o=n.call(this,e,s),u=o[0],a=i[0],f=i[1],l=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(u.x=u.y=0,Ki(u,function(e){e.r=+l(e.value)}),Ki(u,vs),r){var c=r*(t?1:Math.max(2*u.r/a,2*u.r/f))/2;Ki(u,function(e){e.r+=c}),Ki(u,vs),Ki(u,function(e){e.r-=c})}return ys(u,a/2,f/2,t?1:1/Math.max(2*u.r/a,2*u.r/f)),o}var t,n=Xo.layout.hierarchy().sort(cs),r=0,i=[1,1];return e.size=function(t){return arguments.length?(i=t,e):i},e.radius=function(n){return arguments.length?(t=null==n||"function"==typeof n?n:+n,e):t},e.padding=function(t){return arguments.length?(r=+t,e):r},$i(e,n)},Xo.layout.tree=function(){function e(e,i){var l=o.call(this,e,i),c=l[0],h=t(c);if(Ki(h,n),h.parent.m=-h.z,Ji(h,r),f)Ji(c,s);else{var p=c,d=c,v=c;Ji(c,function(e){e.x<p.x&&(p=e),e.x>d.x&&(d=e),e.depth>v.depth&&(v=e)});var m=u(p,d)/2-p.x,g=a[0]/(d.x+u(d,p)/2+m),y=a[1]/(v.depth||1);Ji(c,function(e){e.x=(e.x+m)*g,e.y=e.depth*y})}return l}function t(e){for(var t,n={A:null,children:[e]},r=[n];null!=(t=r.pop());)for(var i,s=t.children,o=0,u=s.length;u>o;++o)r.push((s[o]=i={_:s[o],parent:t,children:(i=s[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i);return n.children[0]}function n(e){var t=e.children,n=e.parent.children,r=e.i?n[e.i-1]:null;if(t.length){Ts(e);var s=(t[0].z+t[t.length-1].z)/2;r?(e.z=r.z+u(e._,r._),e.m=e.z-s):e.z=s}else r&&(e.z=r.z+u(e._,r._));e.parent.A=i(e,r,e.parent.A||n[0])}function r(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function i(e,t,n){if(t){for(var r,i=e,s=e,o=t,a=i.parent.children[0],f=i.m,l=s.m,c=o.m,h=a.m;o=Ss(o),i=Es(i),o&&i;)a=Es(a),s=Ss(s),s.a=e,r=o.z+c-i.z-f+u(o._,i._),r>0&&(xs(Ns(o,e,n),e,r),f+=r,l+=r),c+=o.m,f+=i.m,h+=a.m,l+=s.m;o&&!Ss(s)&&(s.t=o,s.m+=c-l),i&&!Es(a)&&(a.t=i,a.m+=f-h,n=e)}return n}function s(e){e.x*=a[0],e.y=e.depth*a[1]}var o=Xo.layout.hierarchy().sort(null).value(null),u=ws,a=[1,1],f=null;return e.separation=function(t){return arguments.length?(u=t,e):u},e.size=function(t){return arguments.length?(f=null==(a=t)?s:null,e):f?null:a},e.nodeSize=function(t){return arguments.length?(f=null==(a=t)?null:s,e):f?a:null},$i(e,o)},Xo.layout.cluster=function(){function e(e,s){var o,u=t.call(this,e,s),a=u[0],f=0;Ki(a,function(e){var t=e.children;t&&t.length?(e.x=ks(t),e.y=Cs(t)):(e.x=o?f+=n(e,o):0,e.y=0,o=e)});var l=Ls(a),c=As(a),h=l.x-n(l,c)/2,p=c.x+n(c,l)/2;return Ki(a,i?function(e){e.x=(e.x-a.x)*r[0],e.y=(a.y-e.y)*r[1]}:function(e){e.x=(e.x-h)/(p-h)*r[0],e.y=(1-(a.y?e.y/a.y:1))*r[1]}),u}var t=Xo.layout.hierarchy().sort(null).value(null),n=ws,r=[1,1],i=!1;return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(i=null==(r=t),e):i?null:r},e.nodeSize=function(t){return arguments.length?(i=null!=(r=t),e):i?r:null},$i(e,t)},Xo.layout.treemap=function(){function e(e,t){for(var n,r,i=-1,s=e.length;++i<s;)r=(n=e[i]).value*(0>t?0:t),n.area=isNaN(r)||0>=r?0:r}function t(n){var s=n.children;if(s&&s.length){var o,u,a,f=c(n),l=[],h=s.slice(),d=1/0,v="slice"===p?f.dx:"dice"===p?f.dy:"slice-dice"===p?1&n.depth?f.dy:f.dx:Math.min(f.dx,f.dy);for(e(h,f.dx*f.dy/n.value),l.area=0;(a=h.length)>0;)l.push(o=h[a-1]),l.area+=o.area,"squarify"!==p||(u=r(l,v))<=d?(h.pop(),d=u):(l.area-=l.pop().area,i(l,v,f,!1),v=Math.min(f.dx,f.dy),l.length=l.area=0,d=1/0);l.length&&(i(l,v,f,!0),l.length=l.area=0),s.forEach(t)}}function n(t){var r=t.children;if(r&&r.length){var s,o=c(t),u=r.slice(),a=[];for(e(u,o.dx*o.dy/t.value),a.area=0;s=u.pop();)a.push(s),a.area+=s.area,null!=s.z&&(i(a,s.z?o.dx:o.dy,o,!u.length),a.length=a.area=0);r.forEach(n)}}function r(e,t){for(var n,r=e.area,i=0,s=1/0,o=-1,u=e.length;++o<u;)(n=e[o].area)&&(s>n&&(s=n),n>i&&(i=n));return r*=r,t*=t,r?Math.max(t*i*d/r,r/(t*s*d)):1/0}function i(e,t,n,r){var i,s=-1,o=e.length,u=n.x,f=n.y,l=t?a(e.area/t):0;if(t==n.dx){for((r||l>n.dy)&&(l=n.dy);++s<o;)i=e[s],i.x=u,i.y=f,i.dy=l,u+=i.dx=Math.min(n.x+n.dx-u,l?a(i.area/l):0);i.z=!0,i.dx+=n.x+n.dx-u,n.y+=l,n.dy-=l}else{for((r||l>n.dx)&&(l=n.dx);++s<o;)i=e[s],i.x=u,i.y=f,i.dx=l,f+=i.dy=Math.min(n.y+n.dy-f,l?a(i.area/l):0);i.z=!1,i.dy+=n.y+n.dy-f,n.x+=l,n.dx-=l}}function s(r){var i=o||u(r),s=i[0];return s.x=0,s.y=0,s.dx=f[0],s.dy=f[1],o&&u.revalue(s),e([s],s.dx*s.dy/s.value),(o?n:t)(s),h&&(o=i),i}var o,u=Xo.layout.hierarchy(),a=Math.round,f=[1,1],l=null,c=Os,h=!1,p="squarify",d=.5*(1+Math.sqrt(5));return s.size=function(e){return arguments.length?(f=e,s):f},s.padding=function(e){function t(t){var n=e.call(s,t,t.depth);return null==n?Os(t):Ms(t,"number"==typeof n?[n,n,n,n]:n)}function n(t){return Ms(t,e)}if(!arguments.length)return l;var r;return c=null==(l=e)?Os:"function"==(r=typeof e)?t:"number"===r?(e=[e,e,e,e],n):n,s},s.round=function(e){return arguments.length?(a=e?Math.round:Number,s):a!=Number},s.sticky=function(e){return arguments.length?(h=e,o=null,s):h},s.ratio=function(e){return arguments.length?(d=e,s):d},s.mode=function(e){return arguments.length?(p=e+"",s):p},$i(s,u)},Xo.random={normal:function(e,t){var n=arguments.length;return 2>n&&(t=1),1>n&&(e=0),function(){var n,r,i;do n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r;while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=Xo.random.normal.apply(Xo,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=Xo.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;e>n;n++)t+=Math.random();return t}}},Xo.scale={};var cf={floor:xt,ceil:xt};Xo.scale.linear=function(){return Fs([0,1],[0,1],pi,!1)};var hf={s:1,g:1,p:1,r:1,e:1};Xo.scale.log=function(){return Vs(Xo.scale.linear().domain([0,1]),10,!0,[1,10])};var pf=Xo.format(".0e"),df={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};Xo.scale.pow=function(){return $s(Xo.scale.linear(),1,[0,1])},Xo.scale.sqrt=function(){return Xo.scale.pow().exponent(.5)},Xo.scale.ordinal=function(){return Ks([],{t:"range",a:[[]]})},Xo.scale.category10=function(){return Xo.scale.ordinal().range(vf)},Xo.scale.category20=function(){return Xo.scale.ordinal().range(mf)},Xo.scale.category20b=function(){return Xo.scale.ordinal().range(gf)},Xo.scale.category20c=function(){return Xo.scale.ordinal().range(yf)};var vf=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(vt),mf=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(vt),gf=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(vt),yf=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(vt);Xo.scale.quantile=function(){return Qs([],[])},Xo.scale.quantize=function(){return Gs(0,1,[0,1])},Xo.scale.threshold=function(){return Ys([.5],[0,1])},Xo.scale.identity=function(){return Zs([0,1])},Xo.svg={},Xo.svg.arc=function(){function e(){var e=t.apply(this,arguments),s=n.apply(this,arguments),o=r.apply(this,arguments)+bf,u=i.apply(this,arguments)+bf,a=(o>u&&(a=o,o=u,u=a),u-o),f=xu>a?"0":"1",l=Math.cos(o),c=Math.sin(o),h=Math.cos(u),p=Math.sin(u);return a>=wf?e?"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+ -s+"A"+s+","+s+" 0 1,1 0,"+s+"M0,"+e+"A"+e+","+e+" 0 1,0 0,"+ -e+"A"+e+","+e+" 0 1,0 0,"+e+"Z":"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+ -s+"A"+s+","+s+" 0 1,1 0,"+s+"Z":e?"M"+s*l+","+s*c+"A"+s+","+s+" 0 "+f+",1 "+s*h+","+s*p+"L"+e*h+","+e*p+"A"+e+","+e+" 0 "+f+",0 "+e*l+","+e*c+"Z":"M"+s*l+","+s*c+"A"+s+","+s+" 0 "+f+",1 "+s*h+","+s*p+"L0,0"+"Z"}var t=eo,n=to,r=no,i=ro;return e.innerRadius=function(n){return arguments.length?(t=St(n),e):t},e.outerRadius=function(t){return arguments.length?(n=St(t),e):n},e.startAngle=function(t){return arguments.length?(r=St(t),e):r},e.endAngle=function(t){return arguments.length?(i=St(t),e):i},e.centroid=function(){var e=(t.apply(this,arguments)+n.apply(this,arguments))/2,s=(r.apply(this,arguments)+i.apply(this,arguments))/2+bf;return[Math.cos(s)*e,Math.sin(s)*e]},e};var bf=-Nu,wf=Tu-Cu;Xo.svg.line=function(){return io(xt)};var Ef=Xo.map({linear:so,"linear-closed":oo,step:uo,"step-before":ao,"step-after":fo,basis:mo,"basis-open":go,"basis-closed":yo,bundle:bo,cardinal:ho,"cardinal-open":lo,"cardinal-closed":co,monotone:No});Ef.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var Sf=[0,2/3,1/3,0],xf=[0,1/3,2/3,0],Tf=[0,1/6,2/3,1/6];Xo.svg.line.radial=function(){var e=io(Co);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},ao.reverse=fo,fo.reverse=ao,Xo.svg.area=function(){return ko(xt)},Xo.svg.area.radial=function(){var e=ko(Co);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},Xo.svg.chord=function(){function e(e,u){var a=t(this,s,e,u),f=t(this,o,e,u);return"M"+a.p0+r(a.r,a.p1,a.a1-a.a0)+(n(a,f)?i(a.r,a.p1,a.r,a.p0):i(a.r,a.p1,f.r,f.p0)+r(f.r,f.p1,f.a1-f.a0)+i(f.r,f.p1,a.r,a.p0))+"Z"}function t(e,t,n,r){var i=t.call(e,n,r),s=u.call(e,i,r),o=a.call(e,i,r)+bf,l=f.call(e,i,r)+bf;return{r:s,a0:o,a1:l,p0:[s*Math.cos(o),s*Math.sin(o)],p1:[s*Math.cos(l),s*Math.sin(l)]}}function n(e,t){return e.a0==t.a0&&e.a1==t.a1}function r(e,t,n){return"A"+e+","+e+" 0 "+ +(n>xu)+",1 "+t}function i(e,t,n,r){return"Q 0,0 "+r}var s=dr,o=vr,u=Lo,a=no,f=ro;return e.radius=function(t){return arguments.length?(u=St(t),e):u},e.source=function(t){return arguments.length?(s=St(t),e):s},e.target=function(t){return arguments.length?(o=St(t),e):o},e.startAngle=function(t){return arguments.length?(a=St(t),e):a},e.endAngle=function(t){return arguments.length?(f=St(t),e):f},e},Xo.svg.diagonal=function(){function e(e,i){var s=t.call(this,e,i),o=n.call(this,e,i),u=(s.y+o.y)/2,a=[s,{x:s.x,y:u},{x:o.x,y:u},o];return a=a.map(r),"M"+a[0]+"C"+a[1]+" "+a[2]+" "+a[3]}var t=dr,n=vr,r=Ao;return e.source=function(n){return arguments.length?(t=St(n),e):t},e.target=function(t){return arguments.length?(n=St(t),e):n},e.projection=function(t){return arguments.length?(r=t,e):r},e},Xo.svg.diagonal.radial=function(){var e=Xo.svg.diagonal(),t=Ao,n=e.projection;return e.projection=function(e){return arguments.length?n(Oo(t=e)):t},e},Xo.svg.symbol=function(){function e(e,r){return(Nf.get(t.call(this,e,r))||Do)(n.call(this,e,r))}var t=_o,n=Mo;return e.type=function(n){return arguments.length?(t=St(n),e):t},e.size=function(t){return arguments.length?(n=St(t),e):n},e};var Nf=Xo.map({circle:Do,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+ -3*t+","+ -t+"H"+ -t+"V"+ -3*t+"H"+t+"V"+ -t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+ -t+"V"+t+"H"+ -3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Af)),n=t*Af;return"M0,"+ -t+"L"+n+",0"+" 0,"+t+" "+ -n+",0"+"Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+ -t+","+ -t+"L"+t+","+ -t+" "+t+","+t+" "+ -t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Lf),n=t*Lf/2;return"M0,"+n+"L"+t+","+ -n+" "+ -t+","+ -n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Lf),n=t*Lf/2;return"M0,"+ -n+"L"+t+","+n+" "+ -t+","+n+"Z"}});Xo.svg.symbolTypes=Nf.keys();var Cf,kf,Lf=Math.sqrt(3),Af=Math.tan(30*Lu),Of=[],Mf=0;Of.call=vu.call,Of.empty=vu.empty,Of.node=vu.node,Of.size=vu.size,Xo.transition=function(e){return arguments.length?Cf?e.transition():e:yu.transition()},Xo.transition.prototype=Of,Of.select=function(e){var t,n,r,i=this.id,s=[];e=S(e);for(var o=-1,u=this.length;++o<u;){s.push(t=[]);for(var a=this[o],f=-1,l=a.length;++f<l;)(r=a[f])&&(n=e.call(r,r.__data__,f,o))?("__data__"in r&&(n.__data__=r.__data__),jo(n,f,i,r.__transition__[i]),t.push(n)):t.push(null)}return Po(s,i)},Of.selectAll=function(e){var t,n,r,i,s,o=this.id,u=[];e=x(e);for(var a=-1,f=this.length;++a<f;)for(var l=this[a],c=-1,h=l.length;++c<h;)if(r=l[c]){s=r.__transition__[o],n=e.call(r,r.__data__,c,a),u.push(t=[]);for(var p=-1,d=n.length;++p<d;)(i=n[p])&&jo(i,p,o,s),t.push(i)}return Po(u,o)},Of.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=P(e));for(var s=0,o=this.length;o>s;s++){i.push(t=[]);for(var n=this[s],u=0,a=n.length;a>u;u++)(r=n[u])&&e.call(r,r.__data__,u,s)&&t.push(r)}return Po(i,this.id)},Of.tween=function(e,t){var n=this.id;return arguments.length<2?this.node().__transition__[n].tween.get(e):B(this,null==t?function(t){t.__transition__[n].tween.remove(e)}:function(r){r.__transition__[n].tween.set(e,t)})},Of.attr=function(e,t){function n(){this.removeAttribute(u)}function r(){this.removeAttributeNS(u.space,u.local)}function i(e){return null==e?n:(e+="",function(){var t,n=this.getAttribute(u);return n!==e&&(t=o(n,e),function(e){this.setAttribute(u,t(e))})})}function s(e){return null==e?r:(e+="",function(){var t,n=this.getAttributeNS(u.space,u.local);return n!==e&&(t=o(n,e),function(e){this.setAttributeNS(u.space,u.local,t(e))})})}if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var o="transform"==e?Bi:pi,u=Xo.ns.qualify(e);return Ho(this,"attr."+e,t,u.local?s:i)},Of.attrTween=function(e,t){function n(e,n){var r=t.call(this,e,n,this.getAttribute(i));return r&&function(e){this.setAttribute(i,r(e))}}function r(e,n){var r=t.call(this,e,n,this.getAttributeNS(i.space,i.local));return r&&function(e){this.setAttributeNS(i.space,i.local,r(e))}}var i=Xo.ns.qualify(e);return this.tween("attr."+e,i.local?r:n)},Of.style=function(e,t,n){function r(){this.style.removeProperty(e)}function i(t){return null==t?r:(t+="",function(){var r,i=Qo.getComputedStyle(this,null).getPropertyValue(e);return i!==t&&(r=pi(i,t),function(t){this.style.setProperty(e,r(t),n)})})}var s=arguments.length;if(3>s){if("string"!=typeof e){2>s&&(t="");for(n in e)this.style(n,e[n],t);return this}n=""}return Ho(this,"style."+e,t,i)},Of.styleTween=function(e,t,n){function r(r,i){var s=t.call(this,r,i,Qo.getComputedStyle(this,null).getPropertyValue(e));return s&&function(t){this.style.setProperty(e,s(t),n)}}return arguments.length<3&&(n=""),this.tween("style."+e,r)},Of.text=function(e){return Ho(this,"text",e,Bo)},Of.remove=function(){return this.each("end.transition",function(){var e;this.__transition__.count<2&&(e=this.parentNode)&&e.removeChild(this)})},Of.ease=function(e){var t=this.id;return arguments.length<1?this.node().__transition__[t].ease:("function"!=typeof e&&(e=Xo.ease.apply(Xo,arguments)),B(this,function(n){n.__transition__[t].ease=e}))},Of.delay=function(e){var t=this.id;return arguments.length<1?this.node().__transition__[t].delay:B(this,"function"==typeof e?function(n,r,i){n.__transition__[t].delay=+e.call(n,n.__data__,r,i)}:(e=+e,function(n){n.__transition__[t].delay=e}))},Of.duration=function(e){var t=this.id;return arguments.length<1?this.node().__transition__[t].duration:B(this,"function"==typeof e?function(n,r,i){n.__transition__[t].duration=Math.max(1,e.call(n,n.__data__,r,i))}:(e=Math.max(1,e),function(n){n.__transition__[t].duration=e}))},Of.each=function(e,t){var n=this.id;if(arguments.length<2){var r=kf,i=Cf;Cf=n,B(this,function(t,r,i){kf=t.__transition__[n],e.call(t,t.__data__,r,i)}),kf=r,Cf=i}else B(this,function(r){var i=r.__transition__[n];(i.event||(i.event=Xo.dispatch("start","end"))).on(e,t)});return this},Of.transition=function(){for(var e,t,n,r,i=this.id,s=++Mf,o=[],u=0,a=this.length;a>u;u++){o.push(e=[]);for(var t=this[u],f=0,l=t.length;l>f;f++)(n=t[f])&&(r=Object.create(n.__transition__[i]),r.delay+=r.duration,jo(n,f,s,r)),e.push(n)}return Po(o,s)},Xo.svg.axis=function(){function e(e){e.each(function(){var e,f=Xo.select(this),l=this.__chart__||n,c=this.__chart__=n.copy(),h=null==a?c.ticks?c.ticks.apply(c,u):c.domain():a,p=null==t?c.tickFormat?c.tickFormat.apply(c,u):xt:t,d=f.selectAll(".tick").data(h,c),v=d.enter().insert("g",".domain").attr("class","tick").style("opacity",Cu),m=Xo.transition(d.exit()).style("opacity",Cu).remove(),g=Xo.transition(d.order()).style("opacity",1),y=Ds(c),b=f.selectAll(".domain").data([0]),w=(b.enter().append("path").attr("class","domain"),Xo.transition(b));v.append("line"),v.append("text");var E=v.select("line"),S=g.select("line"),x=d.select("text").text(p),T=v.select("text"),N=g.select("text");switch(r){case"bottom":e=Fo,E.attr("y2",i),T.attr("y",Math.max(i,0)+o),S.attr("x2",0).attr("y2",i),N.attr("x",0).attr("y",Math.max(i,0)+o),x.attr("dy",".71em").style("text-anchor","middle"),w.attr("d","M"+y[0]+","+s+"V0H"+y[1]+"V"+s);break;case"top":e=Fo,E.attr("y2",-i),T.attr("y",-(Math.max(i,0)+o)),S.attr("x2",0).attr("y2",-i),N.attr("x",0).attr("y",-(Math.max(i,0)+o)),x.attr("dy","0em").style("text-anchor","middle"),w.attr("d","M"+y[0]+","+ -s+"V0H"+y[1]+"V"+ -s);break;case"left":e=Io,E.attr("x2",-i),T.attr("x",-(Math.max(i,0)+o)),S.attr("x2",-i).attr("y2",0),N.attr("x",-(Math.max(i,0)+o)).attr("y",0),x.attr("dy",".32em").style("text-anchor","end"),w.attr("d","M"+ -s+","+y[0]+"H0V"+y[1]+"H"+ -s);break;case"right":e=Io,E.attr("x2",i),T.attr("x",Math.max(i,0)+o),S.attr("x2",i).attr("y2",0),N.attr("x",Math.max(i,0)+o).attr("y",0),x.attr("dy",".32em").style("text-anchor","start"),w.attr("d","M"+s+","+y[0]+"H0V"+y[1]+"H"+s)}if(c.rangeBand){var C=c,k=C.rangeBand()/2;l=c=function(e){return C(e)+k}}else l.rangeBand?l=c:m.call(e,c);v.call(e,l),g.call(e,c)})}var t,n=Xo.scale.linear(),r=_f,i=6,s=6,o=3,u=[10],a=null;return e.scale=function(t){return arguments.length?(n=t,e):n},e.orient=function(t){return arguments.length?(r=t in Df?t+"":_f,e):r},e.ticks=function(){return arguments.length?(u=arguments,e):u},e.tickValues=function(t){return arguments.length?(a=t,e):a},e.tickFormat=function(n){return arguments.length?(t=n,e):t},e.tickSize=function(t){var n=arguments.length;return n?(i=+t,s=+arguments[n-1],e):i},e.innerTickSize=function(t){return arguments.length?(i=+t,e):i},e.outerTickSize=function(t){return arguments.length?(s=+t,e):s},e.tickPadding=function(t){return arguments.length?(o=+t,e):o},e.tickSubdivide=function(){return arguments.length&&e},e};var _f="bottom",Df={top:1,right:1,bottom:1,left:1};Xo.svg.brush=function(){function e(s){s.each(function(){var s=Xo.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",i).on("touchstart.brush",i),o=s.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),s.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var u=s.selectAll(".resize").data(d,xt);u.exit().remove(),u.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Pf[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),u.style("display",e.empty()?"none":null);var l,c=Xo.transition(s),h=Xo.transition(o);a&&(l=Ds(a),h.attr("x",l[0]).attr("width",l[1]-l[0]),n(c)),f&&(l=Ds(f),h.attr("y",l[0]).attr("height",l[1]-l[0]),r(c)),t(c)})}function t(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+l[+/e$/.test(e)]+","+c[+/^s/.test(e)]+")"})}function n(e){e.select(".extent").attr("x",l[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",l[1]-l[0])}function r(e){e.select(".extent").attr("y",c[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",c[1]-c[0])}function i(){function i(){32==Xo.event.keyCode&&(L||(b=null,O[0]-=l[1],O[1]-=c[1],L=2),y())}function d(){32==Xo.event.keyCode&&2==L&&(O[0]+=l[1],O[1]+=c[1],L=0,y())}function v(){var e=Xo.mouse(E),i=!1;w&&(e[0]+=w[0],e[1]+=w[1]),L||(Xo.event.altKey?(b||(b=[(l[0]+l[1])/2,(c[0]+c[1])/2]),O[0]=l[+(e[0]<b[0])],O[1]=c[+(e[1]<b[1])]):b=null),C&&m(e,a,0)&&(n(T),i=!0),k&&m(e,f,1)&&(r(T),i=!0),i&&(t(T),x({type:"brush",mode:L?"move":"resize"}))}function m(e,t,n){var r,i,u=Ds(t),a=u[0],f=u[1],d=O[n],v=n?c:l,m=v[1]-v[0];return L&&(a-=d,f-=m+d),r=(n?p:h)?Math.max(a,Math.min(f,e[n])):e[n],L?i=(r+=d)+m:(b&&(d=Math.max(a,Math.min(f,2*b[n]-r))),r>d?(i=r,r=d):i=d),v[0]!=r||v[1]!=i?(n?o=null:s=null,v[0]=r,v[1]=i,!0):void 0}function g(){v(),T.style("pointer-events","all").selectAll(".resize").style("display",e.empty()?"none":null),Xo.select("body").style("cursor",null),M.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),A(),x({type:"brushend"})}var b,w,E=this,S=Xo.select(Xo.event.target),x=u.of(E,arguments),T=Xo.select(E),N=S.datum(),C=!/^(n|s)$/.test(N)&&a,k=!/^(e|w)$/.test(N)&&f,L=S.classed("extent"),A=z(),O=Xo.mouse(E),M=Xo.select(Qo).on("keydown.brush",i).on("keyup.brush",d);if(Xo.event.changedTouches?M.on("touchmove.brush",v).on("touchend.brush",g):M.on("mousemove.brush",v).on("mouseup.brush",g),T.interrupt().selectAll("*").interrupt(),L)O[0]=l[0]-O[0],O[1]=c[0]-O[1];else if(N){var _=+/w$/.test(N),D=+/^n/.test(N);w=[l[1-_]-O[0],c[1-D]-O[1]],O[0]=l[_],O[1]=c[D]}else Xo.event.altKey&&(b=O.slice());T.style("pointer-events","none").selectAll(".resize").style("display",null),Xo.select("body").style("cursor",S.style("cursor")),x({type:"brushstart"}),v()}var s,o,u=w(e,"brushstart","brush","brushend"),a=null,f=null,l=[0,0],c=[0,0],h=!0,p=!0,d=Hf[0];return e.event=function(e){e.each(function(){var e=u.of(this,arguments),t={x:l,y:c,i:s,j:o},n=this.__chart__||t;this.__chart__=t,Cf?Xo.select(this).transition().each("start.brush",function(){s=n.i,o=n.j,l=n.x,c=n.y,e({type:"brushstart"})}).tween("brush:brush",function(){var n=di(l,t.x),r=di(c,t.y);return s=o=null,function(i){l=t.x=n(i),c=t.y=r(i),e({type:"brush",mode:"resize"})}}).each("end.brush",function(){s=t.i,o=t.j,e({type:"brush",mode:"resize"}),e({type:"brushend"})}):(e({type:"brushstart"}),e({type:"brush",mode:"resize"}),e({type:"brushend"}))})},e.x=function(t){return arguments.length?(a=t,d=Hf[!a<<1|!f],e):a},e.y=function(t){return arguments.length?(f=t,d=Hf[!a<<1|!f],e):f},e.clamp=function(t){return arguments.length?(a&&f?(h=!!t[0],p=!!t[1]):a?h=!!t:f&&(p=!!t),e):a&&f?[h,p]:a?h:f?p:null},e.extent=function(t){var n,r,i,u,h;return arguments.length?(a&&(n=t[0],r=t[1],f&&(n=n[0],r=r[0]),s=[n,r],a.invert&&(n=a(n),r=a(r)),n>r&&(h=n,n=r,r=h),(n!=l[0]||r!=l[1])&&(l=[n,r])),f&&(i=t[0],u=t[1],a&&(i=i[1],u=u[1]),o=[i,u],f.invert&&(i=f(i),u=f(u)),i>u&&(h=i,i=u,u=h),(i!=c[0]||u!=c[1])&&(c=[i,u])),e):(a&&(s?(n=s[0],r=s[1]):(n=l[0],r=l[1],a.invert&&(n=a.invert(n),r=a.invert(r)),n>r&&(h=n,n=r,r=h))),f&&(o?(i=o[0],u=o[1]):(i=c[0],u=c[1],f.invert&&(i=f.invert(i),u=f.invert(u)),i>u&&(h=i,i=u,u=h))),a&&f?[[n,i],[r,u]]:a?[n,r]:f&&[i,u])},e.clear=function(){return e.empty()||(l=[0,0],c=[0,0],s=o=null),e},e.empty=function(){return!!a&&l[0]==l[1]||!!f&&c[0]==c[1]},Xo.rebind(e,u,"on")};var Pf={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Hf=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Bf=ea.format=oa.timeFormat,jf=Bf.utc,Ff=jf("%Y-%m-%dT%H:%M:%S.%LZ");Bf.iso=Date.prototype.toISOString&&+(new Date("2000-01-01T00:00:00.000Z"))?qo:Ff,qo.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},qo.toString=Ff.toString,ea.second=Ht(function(e){return new ta(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),ea.seconds=ea.second.range,ea.seconds.utc=ea.second.utc.range,ea.minute=Ht(function(e){return new ta(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),ea.minutes=ea.minute.range,ea.minutes.utc=ea.minute.utc.range,ea.hour=Ht(function(e){var t=e.getTimezoneOffset()/60;return new ta(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),ea.hours=ea.hour.range,ea.hours.utc=ea.hour.utc.range,ea.month=Ht(function(e){return e=ea.day(e),e.setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),ea.months=ea.month.range,ea.months.utc=ea.month.utc.range;var If=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],qf=[[ea.second,1],[ea.second,5],[ea.second,15],[ea.second,30],[ea.minute,1],[ea.minute,5],[ea.minute,15],[ea.minute,30],[ea.hour,1],[ea.hour,3],[ea.hour,6],[ea.hour,12],[ea.day,1],[ea.day,2],[ea.week,1],[ea.month,1],[ea.month,3],[ea.year,1]],Rf=Bf.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",Tn]]),Uf={range:function(e,t,n){return Xo.range(Math.ceil(e/n)*n,+t,n).map(Uo)},floor:xt,ceil:xt};qf.year=ea.year,ea.scale=function(){return Ro(Xo.scale.linear(),qf,Rf)};var zf=qf.map(function(e){return[e[0].utc,e[1]]}),Wf=jf.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",Tn]]);zf.year=ea.year.utc,ea.scale.utc=function(){return Ro(Xo.scale.linear(),zf,Wf)},Xo.text=Tt(function(e){return e.responseText}),Xo.json=function(e,t){return Nt(e,"application/json",zo,t)},Xo.html=function(e,t){return Nt(e,"text/html",Wo,t)},Xo.xml=Tt(function(e){return e.responseXML}),"function"==typeof define&&define.amd?define(Xo):"object"==typeof module&&module.exports&&(module.exports=Xo),this.d3=Xo}();(function(){function e(e,t){return(new Date(t,e+1,0)).getDate()}function t(e,t,n){return function(r,i,s){var o=e(r),u=[];o<r&&t(o);if(s>1)while(o<i){var a=new Date(+o);n(a)%s===0&&u.push(a),t(o)}else while(o<i)u.push(new Date(+o)),t(o);return u}}var n=window.nv||{};n.version="1.1.15b",n.dev=!0,window.nv=n,n.tooltip=n.tooltip||{},n.utils=n.utils||{},n.models=n.models||{},n.charts={},n.graphs=[],n.logs={},n.dispatch=d3.dispatch("render_start","render_end"),n.dev&&(n.dispatch.on("render_start",function(e){n.logs.startTime=+(new Date)}),n.dispatch.on("render_end",function(e){n.logs.endTime=+(new Date),n.logs.totalTime=n.logs.endTime-n.logs.startTime,n.log("total",n.logs.totalTime)})),n.log=function(){if(n.dev&&console.log&&console.log.apply)console.log.apply(console,arguments);else if(n.dev&&typeof console.log=="function"&&Function.prototype.bind){var e=Function.prototype.bind.call(console.log,console);e.apply(console,arguments)}return arguments[arguments.length-1]},n.render=function(e){e=e||1,n.render.active=!0,n.dispatch.render_start(),setTimeout(function(){var t,r;for(var i=0;i<e&&(r=n.render.queue[i]);i++)t=r.generate(),typeof r.callback==typeof Function&&r.callback(t),n.graphs.push(t);n.render.queue.splice(0,i),n.render.queue.length?setTimeout(arguments.callee,0):(n.dispatch.render_end(),n.render.active=!1)},0)},n.render.active=!1,n.render.queue=[],n.addGraph=function(e){typeof arguments[0]==typeof Function&&(e={generate:arguments[0],callback:arguments[1]}),n.render.queue.push(e),n.render.active||n.render()},n.identity=function(e){return e},n.strip=function(e){return e.replace(/(\s|&)/g,"")},d3.time.monthEnd=function(e){return new Date(e.getFullYear(),e.getMonth(),0)},d3.time.monthEnds=t(d3.time.monthEnd,function(t){t.setUTCDate(t.getUTCDate()+1),t.setDate(e(t.getMonth()+1,t.getFullYear()))},function(e){return e.getMonth()}),n.interactiveGuideline=function(){"use strict";function e(u){u.each(function(u){function h(){var n=d3.mouse(this),r=n[0],i=n[1],u=!0,f=!1;c&&(r=d3.event.offsetX,i=d3.event.offsetY,d3.event.target.tagName!=="svg"&&(u=!1),d3.event.target.className.baseVal.match("nv-legend")&&(f=!0)),u&&(r-=s.left,i-=s.top);if(r<0||i<0||r>d||i>v||d3.event.relatedTarget&&d3.event.relatedTarget.ownerSVGElement===undefined||f){if(c&&d3.event.relatedTarget&&d3.event.relatedTarget.ownerSVGElement===undefined&&d3.event.relatedTarget.className.match(t.nvPointerEventsClass))return;a.elementMouseout({mouseX:r,mouseY:i}),e.renderGuideLine(null);return}var l=o.invert(r);a.elementMousemove({mouseX:r,mouseY:i,pointXValue:l}),d3.event.type==="dblclick"&&a.elementDblclick({mouseX:r,mouseY:i,pointXValue:l})}var p=d3.select(this),d=r||960,v=i||400,m=p.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([u]),g=m.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer");g.append("g").attr("class","nv-interactiveGuideLine");if(!l)return;l.on("mousemove",h,!0).on("mouseout",h,!0).on("dblclick",h),e.renderGuideLine=function(e){if(!f)return;var t=m.select(".nv-interactiveGuideLine").selectAll("line").data(e!=null?[n.utils.NaNtoZero(e)]:[],String);t.enter().append("line").attr("class","nv-guideline").attr("x1",function(e){return e}).attr("x2",function(e){return e}).attr("y1",v).attr("y2",0),t.exit().remove()}})}var t=n.models.tooltip(),r=null,i=null,s={left:0,top:0},o=d3.scale.linear(),u=d3.scale.linear(),a=d3.dispatch("elementMousemove","elementMouseout","elementDblclick"),f=!0,l=null,c=navigator.userAgent.indexOf("MSIE")!==-1;return e.dispatch=a,e.tooltip=t,e.margin=function(t){return arguments.length?(s.top=typeof t.top!="undefined"?t.top:s.top,s.left=typeof t.left!="undefined"?t.left:s.left,e):s},e.width=function(t){return arguments.length?(r=t,e):r},e.height=function(t){return arguments.length?(i=t,e):i},e.xScale=function(t){return arguments.length?(o=t,e):o},e.showGuideLine=function(t){return arguments.length?(f=t,e):f},e.svgContainer=function(t){return arguments.length?(l=t,e):l},e},n.interactiveBisect=function(e,t,n){"use strict";if(!e instanceof Array)return null;typeof n!="function"&&(n=function(e,t){return e.x});var r=d3.bisector(n).left,i=d3.max([0,r(e,t)-1]),s=n(e[i],i);typeof s=="undefined"&&(s=i);if(s===t)return i;var o=d3.min([i+1,e.length-1]),u=n(e[o],o);return typeof u=="undefined"&&(u=o),Math.abs(u-t)>=Math.abs(s-t)?i:o},n.nearestValueIndex=function(e,t,n){"use strict";var r=Infinity,i=null;return e.forEach(function(e,s){var o=Math.abs(t-e);o<=r&&o<n&&(r=o,i=s)}),i},function(){"use strict";window.nv.tooltip={},window.nv.models.tooltip=function(){function e(){if(c){var e=d3.select(c);e.node().tagName!=="svg"&&(e=e.select("svg"));var t=e.node()?e.attr("viewBox"):null;if(t){t=t.split(" ");var n=parseInt(e.style("width"))/t[2];p.left=p.left*n,p.top=p.top*n}}}function t(e){var t;c?t=d3.select(c):t=d3.select("body");var n=t.select(".nvtooltip");return n.node()===null&&(n=t.append("div").attr("class","nvtooltip "+(l?l:"xy-tooltip")).attr("id",v)),n.node().innerHTML=e,n.style("top",0).style("left",0).style("opacity",0),n.selectAll("div, table, td, tr").classed(m,!0),n.classed(m,!0),n.node()}function r(){if(!d)return;if(!w(s))return;e();var i=p.left,l=f!=null?f:p.top,v=t(b(s));h=v;if(c){var m=c.getElementsByTagName("svg")[0],g=m?m.getBoundingClientRect():c.getBoundingClientRect(),y={left:0,top:0};if(m){var E=m.getBoundingClientRect(),S=c.getBoundingClientRect(),x=E.top;if(x<0){var T=c.getBoundingClientRect();x=Math.abs(x)>T.height?0:x}y.top=Math.abs(x-S.top),y.left=Math.abs(E.left-S.left)}i+=c.offsetLeft+y.left-2*c.scrollLeft,l+=c.offsetTop+y.top-2*c.scrollTop}return a&&a>0&&(l=Math.floor(l/a)*a),n.tooltip.calcTooltipPosition([i,l],o,u,v),r}var i=null,s=null,o="w",u=50,a=25,f=null,l=null,c=null,h=null,p={left:null,top:null},d=!0,v="nvtooltip-"+Math.floor(Math.random()*1e5),m="nv-pointer-events-none",g=function(e,t){return e},y=function(e){return e},b=function(e){if(i!=null)return i;if(e==null)return"";var t=d3.select(document.createElement("table")),n=t.selectAll("thead").data([e]).enter().append("thead");n.append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(y(e.value));var r=t.selectAll("tbody").data([e]).enter().append("tbody"),s=r.selectAll("tr").data(function(e){return e.series}).enter().append("tr").classed("highlight",function(e){return e.highlight});s.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(e){return e.color}),s.append("td").classed("key",!0).html(function(e){return e.key}),s.append("td").classed("value",!0).html(function(e,t){return g(e.value,t)}),s.selectAll("td").each(function(e){if(e.highlight){var t=d3.scale.linear().domain([0,1]).range(["#fff",e.color]),n=.6;d3.select(this).style("border-bottom-color",t(n)).style("border-top-color",t(n))}});var o=t.node().outerHTML;return e.footer!==undefined&&(o+="<div class='footer'>"+e.footer+"</div>"),o},w=function(e){return e&&e.series&&e.series.length>0?!0:!1};return r.nvPointerEventsClass=m,r.content=function(e){return arguments.length?(i=e,r):i},r.tooltipElem=function(){return h},r.contentGenerator=function(e){return arguments.length?(typeof e=="function"&&(b=e),r):b},r.data=function(e){return arguments.length?(s=e,r):s},r.gravity=function(e){return arguments.length?(o=e,r):o},r.distance=function(e){return arguments.length?(u=e,r):u},r.snapDistance=function(e){return arguments.length?(a=e,r):a},r.classes=function(e){return arguments.length?(l=e,r):l},r.chartContainer=function(e){return arguments.length?(c=e,r):c},r.position=function(e){return arguments.length?(p.left=typeof e.left!="undefined"?e.left:p.left,p.top=typeof e.top!="undefined"?e.top:p.top,r):p},r.fixedTop=function(e){return arguments.length?(f=e,r):f},r.enabled=function(e){return arguments.length?(d=e,r):d},r.valueFormatter=function(e){return arguments.length?(typeof e=="function"&&(g=e),r):g},r.headerFormatter=function(e){return arguments.length?(typeof e=="function"&&(y=e),r):y},r.id=function(){return v},r},n.tooltip.show=function(e,t,r,i,s,o){var u=document.createElement("div");u.className="nvtooltip "+(o?o:"xy-tooltip");var a=s;if(!s||s.tagName.match(/g|svg/i))a=document.getElementsByTagName("body")[0];u.style.left=0,u.style.top=0,u.style.opacity=0,u.innerHTML=t,a.appendChild(u),s&&(e[0]=e[0]-s.scrollLeft,e[1]=e[1]-s.scrollTop),n.tooltip.calcTooltipPosition(e,r,i,u)},n.tooltip.findFirstNonSVGParent=function(e){while(e.tagName.match(/^g|svg$/i)!==null)e=e.parentNode;return e},n.tooltip.findTotalOffsetTop=function(e,t){var n=t;do isNaN(e.offsetTop)||(n+=e.offsetTop);while(e=e.offsetParent);return n},n.tooltip.findTotalOffsetLeft=function(e,t){var n=t;do isNaN(e.offsetLeft)||(n+=e.offsetLeft);while(e=e.offsetParent);return n},n.tooltip.calcTooltipPosition=function(e,t,r,i){var s=parseInt(i.offsetHeight),o=parseInt(i.offsetWidth),u=n.utils.windowSize().width,a=n.utils.windowSize().height,f=window.pageYOffset,l=window.pageXOffset,c,h;a=window.innerWidth>=document.body.scrollWidth?a:a-16,u=window.innerHeight>=document.body.scrollHeight?u:u-16,t=t||"s",r=r||20;var p=function(e){return n.tooltip.findTotalOffsetTop(e,h)},d=function(e){return n.tooltip.findTotalOffsetLeft(e,c)};switch(t){case"e":c=e[0]-o-r,h=e[1]-s/2;var v=d(i),m=p(i);v<l&&(c=e[0]+r>l?e[0]+r:l-v+c),m<f&&(h=f-m+h),m+s>f+a&&(h=f+a-m+h-s);break;case"w":c=e[0]+r,h=e[1]-s/2;var v=d(i),m=p(i);v+o>u&&(c=e[0]-o-r),m<f&&(h=f+5),m+s>f+a&&(h=f+a-m+h-s);break;case"n":c=e[0]-o/2-5,h=e[1]+r;var v=d(i),m=p(i);v<l&&(c=l+5),v+o>u&&(c=c-o/2+5),m+s>f+a&&(h=f+a-m+h-s);break;case"s":c=e[0]-o/2,h=e[1]-s-r;var v=d(i),m=p(i);v<l&&(c=l+5),v+o>u&&(c=c-o/2+5),f>m&&(h=f);break;case"none":c=e[0],h=e[1]-r;var v=d(i),m=p(i)}return i.style.left=c+"px",i.style.top=h+"px",i.style.opacity=1,i.style.position="absolute",i},n.tooltip.cleanup=function(){var e=document.getElementsByClassName("nvtooltip"),t=[];while(e.length)t.push(e[0]),e[0].style.transitionDelay="0 !important",e[0].style.opacity=0,e[0].className="nvtooltip-pending-removal";setTimeout(function(){while(t.length){var e=t.pop();e.parentNode.removeChild(e)}},500)}}(),n.utils.windowSize=function(){var e={width:640,height:480};return document.body&&document.body.offsetWidth&&(e.width=document.body.offsetWidth,e.height=document.body.offsetHeight),document.compatMode=="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth&&(e.width=document.documentElement.offsetWidth,e.height=document.documentElement.offsetHeight),window.innerWidth&&window.innerHeight&&(e.width=window.innerWidth,e.height=window.innerHeight),e},n.utils.windowResize=function(e){if(e===undefined)return;var t=window.onresize;window.onresize=function(n){typeof t=="function"&&t(n),e(n)}},n.utils.getColor=function(e){return arguments.length?Object.prototype.toString.call(e)==="[object Array]"?function(t,n){return t.color||e[n%e.length]}:e:n.utils.defaultColor()},n.utils.defaultColor=function(){var e=d3.scale.category20().range();return function(t,n){return t.color||e[n%e.length]}},n.utils.customTheme=function(e,t,n){t=t||function(e){return e.key},n=n||d3.scale.category20().range();var r=n.length;return function(i,s){var o=t(i);return r||(r=n.length),typeof e[o]!="undefined"?typeof e[o]=="function"?e[o]():e[o]:n[--r]}},n.utils.pjax=function(e,t){function r(r){d3.html(r,function(r){var i=d3.select(t).node();i.parentNode.replaceChild(d3.select(r).select(t).node(),i),n.utils.pjax(e,t)})}d3.selectAll(e).on("click",function(){history.pushState(this.href,this.textContent,this.href),r(this.href),d3.event.preventDefault()}),d3.select(window).on("popstate",function(){d3.event.state&&r(d3.event.state)})},n.utils.calcApproxTextWidth=function(e){if(typeof e.style=="function"&&typeof e.text=="function"){var t=parseInt(e.style("font-size").replace("px","")),n=e.text().length;return n*t*.5}return 0},n.utils.NaNtoZero=function(e){return typeof e!="number"||isNaN(e)||e===null||e===Infinity?0:e},n.utils.optionsFunc=function(e){return e&&d3.map(e).forEach(function(e,t){typeof this[e]=="function"&&this[e](t)}.bind(this)),this},n.models.axis=function(){"use strict";function e(n){return n.each(function(e){var n=d3.select(this),s=n.selectAll("g.nv-wrap.nv-axis").data([e]),g=s.enter().append("g").attr("class","nvd3 nv-wrap nv-axis"),y=g.append("g"),b=s.select("g");d!==null?t.ticks(d):(t.orient()=="top"||t.orient()=="bottom")&&t.ticks(Math.abs(o.range()[1]-o.range()[0])/100),b.transition().call(t),m=m||t.scale();var w=t.tickFormat();w==null&&(w=m.tickFormat());var E=b.selectAll("text.nv-axislabel").data([u||null]);E.exit().remove();switch(t.orient()){case"top":E.enter().append("text").attr("class","nv-axislabel");var S=o.range().length==2?o.range()[1]:o.range()[o.range().length-1]+(o.range()[1]-o.range()[0]);E.attr("text-anchor","middle").attr("y",0).attr("x",S/2);if(a){var x=s.selectAll("g.nv-axisMaxMin").data(o.domain());x.enter().append("g").attr("class","nv-axisMaxMin").append("text"),x.exit().remove(),x.attr("transform",function(e,t){return"translate("+o(e)+",0)"}).select("text").attr("dy","-0.5em").attr("y",-t.tickPadding()).attr("text-anchor","middle").text(function(e,t){var n=w(e);return(""+n).match("NaN")?"":n}),x.transition().attr("transform",function(e,t){return"translate("+o.range()[t]+",0)"})}break;case"bottom":var T=36,N=30,C=b.selectAll("g").select("text");if(l%360){C.each(function(e,t){var n=this.getBBox().width;n>N&&(N=n)});var k=Math.abs(Math.sin(l*Math.PI/180)),T=(k?k*N:N)+30;C.attr("transform",function(e,t,n){return"rotate("+l+" 0,0)"}).style("text-anchor",l%360>0?"start":"end")}E.enter().append("text").attr("class","nv-axislabel");var S=o.range().length==2?o.range()[1]:o.range()[o.range().length-1]+(o.range()[1]-o.range()[0]);E.attr("text-anchor","middle").attr("y",T).attr("x",S/2);if(a){var x=s.selectAll("g.nv-axisMaxMin").data([o.domain()[0],o.domain()[o.domain().length-1]]);x.enter().append("g").attr("class","nv-axisMaxMin").append("text"),x.exit().remove(),x.attr("transform",function(e,t){return"translate("+(o(e)+(p?o.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",t.tickPadding()).attr("transform",function(e,t,n){return"rotate("+l+" 0,0)"}).style("text-anchor",l?l%360>0?"start":"end":"middle").text(function(e,t){var n=w(e);return(""+n).match("NaN")?"":n}),x.transition().attr("transform",function(e,t){return"translate("+(o(e)+(p?o.rangeBand()/2:0))+",0)"})}h&&C.attr("transform",function(e,t){return"translate(0,"+(t%2==0?"0":"12")+")"});break;case"right":E.enter().append("text").attr("class","nv-axislabel"),E.style("text-anchor",c?"middle":"begin").attr("transform",c?"rotate(90)":"").attr("y",c?-Math.max(r.right,i)+12:-10).attr("x",c?o.range()[0]/2:t.tickPadding());if(a){var x=s.selectAll("g.nv-axisMaxMin").data(o.domain());x.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),x.exit().remove(),x.attr("transform",function(e,t){return"translate(0,"+o(e)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",t.tickPadding()).style("text-anchor","start").text(function(e,t){var n=w(e);return(""+n).match("NaN")?"":n}),x.transition().attr("transform",function(e,t){return"translate(0,"+o.range()[t]+")"}).select("text").style("opacity",1)}break;case"left":E.enter().append("text").attr("class","nv-axislabel"),E.style("text-anchor",c?"middle":"end").attr("transform",c?"rotate(-90)":"").attr("y",c?-Math.max(r.left,i)+v:-10).attr("x",c?-o.range()[0]/2:-t.tickPadding());if(a){var x=s.selectAll("g.nv-axisMaxMin").data(o.domain());x.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),x.exit().remove(),x.attr("transform",function(e,t){return"translate(0,"+m(e)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-t.tickPadding()).attr("text-anchor","end").text(function(e,t){var n=w(e);return(""+n).match("NaN")?"":n}),x.transition().attr("transform",function(e,t){return"translate(0,"+o.range()[t]+")"}).select("text").style("opacity",1)}}E.text(function(e){return e}),a&&(t.orient()==="left"||t.orient()==="right")&&(b.selectAll("g").each(function(e,t){d3.select(this).select("text").attr("opacity",1);if(o(e)<o.range()[1]+10||o(e)>o.range()[0]-10)(e>1e-10||e<-1e-10)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0)}),o.domain()[0]==o.domain()[1]&&o.domain()[0]==0&&s.selectAll("g.nv-axisMaxMin").style("opacity",function(e,t){return t?0:1}));if(a&&(t.orient()==="top"||t.orient()==="bottom")){var L=[];s.selectAll("g.nv-axisMaxMin").each(function(e,t){try{t?L.push(o(e)-this.getBBox().width-4):L.push(o(e)+this.getBBox().width+4)}catch(n){t?L.push(o(e)-4):L.push(o(e)+4)}}),b.selectAll("g").each(function(e,t){if(o(e)<L[0]||o(e)>L[1])e>1e-10||e<-1e-10?d3.select(this).remove():d3.select(this).select("text").remove()})}f&&b.selectAll(".tick").filter(function(e){return!parseFloat(Math.round(e.__data__*1e5)/1e6)&&e.__data__!==undefined}).classed("zero",!0),m=o.copy()}),e}var t=d3.svg.axis(),r={top:0,right:0,bottom:0,left:0},i=75,s=60,o=d3.scale.linear(),u=null,a=!0,f=!0,l=0,c=!0,h=!1,p=!1,d=null,v=12;t.scale(o).orient("bottom").tickFormat(function(e){return e});var m;return e.axis=t,d3.rebind(e,t,"orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"),d3.rebind(e,o,"domain","range","rangeBand","rangeBands"),e.options=n.utils.optionsFunc.bind(e),e.margin=function(t){return arguments.length?(r.top=typeof t.top!="undefined"?t.top:r.top,r.right=typeof t.right!="undefined"?t.right:r.right,r.bottom=typeof t.bottom!="undefined"?t.bottom:r.bottom,r.left=typeof t.left!="undefined"?t.left:r.left,e):r},e.width=function(t){return arguments.length?(i=t,e):i},e.ticks=function(t){return arguments.length?(d=t,e):d},e.height=function(t){return arguments.length?(s=t,e):s},e.axisLabel=function(t){return arguments.length?(u=t,e):u},e.showMaxMin=function(t){return arguments.length?(a=t,e):a},e.highlightZero=function(t){return arguments.length?(f=t,e):f},e.scale=function(n){return arguments.length?(o=n,t.scale(o),p=typeof o.rangeBands=="function",d3.rebind(e,o,"domain","range","rangeBand","rangeBands"),e):o},e.rotateYLabel=function(t){return arguments.length?(c=t,e):c},e.rotateLabels=function(t){return arguments.length?(l=t,e):l},e.staggerLabels=function(t){return arguments.length?(h=t,e):h},e.axisLabelDistance=function(t){return arguments.length?(v=t,e):v},e},n.models.bullet=function(){"use strict";function e(n){return n.each(function(e,n){var r=h-t.left-t.right,d=p-t.top-t.bottom,g=d3.select(this),y=s.call(this,e,n).slice().sort(d3.descending),b=o.call(this,e,n).slice().sort(d3.descending),w=u.call(this,e,n).slice().sort(d3.descending),E=a.call(this,e,n).slice(),S=f.call(this,e,n).slice(),x=l.call(this,e,n).slice(),T=d3.scale.linear().domain(d3.extent(d3.merge([c,y]))).range(i?[r,0]:[0,r]),N=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(T.range());this.__chart__=T;var C=d3.min(y),k=d3.max(y),L=y[1],A=g.selectAll("g.nv-wrap.nv-bullet").data([e]),O=A.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet"),M=O.append("g"),_=A.select("g");M.append("rect").attr("class","nv-range nv-rangeMax"),M.append("rect").attr("class","nv-range nv-rangeAvg"),M.append("rect").attr("class","nv-range nv-rangeMin"),M.append("rect").attr("class","nv-measure"),M.append("path").attr("class","nv-markerTriangle"),A.attr("transform","translate("+t.left+","+t.top+")");var D=function(e){return Math.abs(N(e)-N(0))},P=function(e){return Math.abs(T(e)-T(0))},H=function(e){return e<0?N(e):N(0)},B=function(e){return e<0?T(e):T(0)};_.select("rect.nv-rangeMax").attr("height",d).attr("width",P(k>0?k:C)).attr("x",B(k>0?k:C)).datum(k>0?k:C),_.select("rect.nv-rangeAvg").attr("height",d).attr("width",P(L)).attr("x",B(L)).datum(L),_.select("rect.nv-rangeMin").attr("height",d).attr("width",P(k)).attr("x",B(k)).attr("width",P(k>0?C:k)).attr("x",B(k>0?C:k)).datum(k>0?C:k),_.select("rect.nv-measure").style("fill",v).attr("height",d/3).attr("y",d/3).attr("width",w<0?T(0)-T(w[0]):T(w[0])-T(0)).attr("x",B(w)).on("mouseover",function(){m.elementMouseover({value:w[0],label:x[0]||"Current",pos:[T(w[0]),d/2]})}).on("mouseout",function(){m.elementMouseout({value:w[0],label:x[0]||"Current"})});var j=d/6;b[0]?_.selectAll("path.nv-markerTriangle").attr("transform",function(e){return"translate("+T(b[0])+","+d/2+")"}).attr("d","M0,"+j+"L"+j+","+ -j+" "+ -j+","+ -j+"Z").on("mouseover",function(){m.elementMouseover({value:b[0],label:S[0]||"Previous",pos:[T(b[0]),d/2]})}).on("mouseout",function(){m.elementMouseout({value:b[0],label:S[0]||"Previous"})}):_.selectAll("path.nv-markerTriangle").remove(),A.selectAll(".nv-range").on("mouseover",function(e,t){var n=E[t]||(t?t==1?"Mean":"Minimum":"Maximum");m.elementMouseover({value:e,label:n,pos:[T(e),d/2]})}).on("mouseout",function(e,t){var n=E[t]||(t?t==1?"Mean":"Minimum":"Maximum");m.elementMouseout({value:e,label:n})})}),e}var t={top:0,right:0,bottom:0,left:0},r="left",i=!1,s=function(e){return e.ranges},o=function(e){return e.markers},u=function(e){return e.measures},a=function(e){return e.rangeLabels?e.rangeLabels:[]},f=function(e){return e.markerLabels?e.markerLabels:[]},l=function(e){return e.measureLabels?e.measureLabels:[]},c=[0],h=380,p=30,d=null,v=n.utils.getColor(["#1f77b4"]),m=d3.dispatch("elementMouseover","elementMouseout");return e.dispatch=m,e.options=n.utils.optionsFunc.bind(e),e.orient=function(t){return arguments.length?(r=t,i=r=="right"||r=="bottom",e):r},e.ranges=function(t){return arguments.length?(s=t,e):s},e.markers=function(t){return arguments.length?(o=t,e):o},e.measures=function(t){return arguments.length?(u=t,e):u},e.forceX=function(t){return arguments.length?(c=t,e):c},e.width=function(t){return arguments.length?(h=t,e):h},e.height=function(t){return arguments.length?(p=t,e):p},e.margin=function(n){return arguments.length?(t.top=typeof n.top!="undefined"?n.top:t.top,t.right=typeof n.right!="undefined"?n.right:t.right,t.bottom=typeof n.bottom!="undefined"?n.bottom:t.bottom,t.left=typeof n.left!="undefined"?n.left:t.left,e):t},e.tickFormat=function(t){return arguments.length?(d=t,e):d},e.color=function(t){return arguments.length?(v=n.utils.getColor(t),e):v},e},n.models.bulletChart=function(){"use strict";function e(n){return n.each(function(r,p){var g=d3.select(this),y=(f||parseInt(g.style("width"))||960)-s.left-s.right,b=l-s.top-s.bottom,w=this;e.update=function(){e(n)},e.container=this;if(!r||!o.call(this,r,p)){var E=g.selectAll(".nv-noData").data([d]);return E.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),E.attr("x",s.left+y/2).attr("y",18+s.top+b/2).text(function(e){return e}),e}g.selectAll(".nv-noData").remove();var S=o.call(this,r,p).slice().sort(d3.descending),x=u.call(this,r,p).slice().sort(d3.descending),T=a.call(this,r,p).slice().sort(d3.descending),N=g.selectAll("g.nv-wrap.nv-bulletChart").data([r]),C=N.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart"),k=C.append("g"),L=N.select("g");k.append("g").attr("class","nv-bulletWrap"),k.append("g").attr("class","nv-titles"),N.attr("transform","translate("+s.left+","+s.top+")");var A=d3.scale.linear().domain([0,Math.max(S[0],x[0],T[0])]).range(i?[y,0]:[0,y]),O=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(A.range());this.__chart__=A;var M=function(e){return Math.abs(O(e)-O(0))},_=function(e){return Math.abs(A(e)-A(0))},D=k.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(l-s.top-s.bottom)/2+")");D.append("text").attr("class","nv-title").text(function(e){return e.title}),D.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(e){return e.subtitle}),t.width(y).height(b);var P=L.select(".nv-bulletWrap");d3.transition(P).call(t);var H=c||A.tickFormat(y/100),B=L.selectAll("g.nv-tick").data(A.ticks(y/50),function(e){return this.textContent||H(e)}),j=B.enter().append("g").attr("class","nv-tick").attr("transform",function(e){return"translate("+O(e)+",0)"}).style("opacity",1e-6);j.append("line").attr("y1",b).attr("y2",b*7/6),j.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",b*7/6).text(H);var F=d3.transition(B).attr("transform",function(e){return"translate("+A(e)+",0)"}).style("opacity",1);F.select("line").attr("y1",b).attr("y2",b*7/6),F.select("text").attr("y",b*7/6),d3.transition(B.exit()).attr("transform",function(e){return"translate("+A(e)+",0)"}).style("opacity",1e-6).remove(),v.on("tooltipShow",function(e){e.key=r.title,h&&m(e,w.parentNode)})}),d3.timer.flush(),e}var t=n.models.bullet(),r="left",i=!1,s={top:5,right:40,bottom:20,left:120},o=function(e){return e.ranges},u=function(e){return e.markers},a=function(e){return e.measures},f=null,l=55,c=null,h=!0,p=function(e,t,n,r,i){return"<h3>"+t+"</h3>"+"<p>"+n+"</p>"},d="No Data Available.",v=d3.dispatch("tooltipShow","tooltipHide"),m=function(t,r){var i=t.pos[0]+(r.offsetLeft||0)+s.left,o=t.pos[1]+(r.offsetTop||0)+s.top,u=p(t.key,t.label,t.value,t,e);n.tooltip.show([i,o],u,t.value<0?"e":"w",null,r)};return t.dispatch.on("elementMouseover.tooltip",function(e){v.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){v.tooltipHide(e)}),v.on("tooltipHide",function(){h&&n.tooltip.cleanup()}),e.dispatch=v,e.bullet=t,d3.rebind(e,t,"color"),e.options=n.utils.optionsFunc.bind(e),e.orient=function(t){return arguments.length?(r=t,i=r=="right"||r=="bottom",e):r},e.ranges=function(t){return arguments.length?(o=t,e):o},e.markers=function(t){return arguments.length?(u=t,e):u},e.measures=function(t){return arguments.length?(a=t,e):a},e.width=function(t){return arguments.length?(f=t,e):f},e.height=function(t){return arguments.length?(l=t,e):l},e.margin=function(t){return arguments.length?(s.top=typeof t.top!="undefined"?t.top:s.top,s.right=typeof t.right!="undefined"?t.right:s.right,s.bottom=typeof t.bottom!="undefined"?t.bottom:s.bottom,s.left=typeof t.left!="undefined"?t.left:s.left,e):s},e.tickFormat=function(t){return arguments.length?(c=t,e):c},e.tooltips=function(t){return arguments.length?(h=t,e):h},e.tooltipContent=function(t){return arguments.length?(p=t,e):p},e.noData=function(t){return arguments.length?(d=t,e):d},e},n.models.cumulativeLineChart=function(){"use strict";function e(E){return E.each(function(E){function M(t,n){d3.select(e.container).style("cursor","ew-resize")}function H(e,t){D.x=d3.event.x,D.i=Math.round(_.invert(D.x)),j()}function B(t,n){d3.select(e.container).style("cursor","auto"),N.index=D.i,A.stateChange(N)}function j(){rt.data([D]);var t=e.transitionDuration();e.transitionDuration(0),e.update(),e.transitionDuration(t)}var F=d3.select(this).classed("nv-chart-"+T,!0),I=this,q=(c||parseInt(F.style("width"))||960)-f.left-f.right,R=(h||parseInt(F.style("height"))||400)-f.top-f.bottom;e.update=function(){F.transition().duration(O).call(e)},e.container=this,N.disabled=E.map(function(e){return!!e.disabled});if(!C){var U;C={};for(U in N)N[U]instanceof Array?C[U]=N[U].slice(0):C[U]=N[U]}var z=d3.behavior.drag().on("dragstart",M).on("drag",H).on("dragend",B);if(!E||!E.length||!E.filter(function(e){return e.values.length}).length){var W=F.selectAll(".nv-noData").data([k]);return W.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),W.attr("x",f.left+q/2).attr("y",f.top+R/2).text(function(e){return e}),e}F.selectAll(".nv-noData").remove(),S=r.xScale(),x=r.yScale();if(!w){var X=E.filter(function(e){return!e.disabled}).map(function(e,t){var n=d3.extent(e.values,r.y());return n[0]<-.95&&(n[0]=-.95),[(n[0]-n[1])/(1+n[1]),(n[1]-n[0])/(1+n[0])]}),V=[d3.min(X,function(e){return e[0]}),d3.max(X,function(e){return e[1]})];r.yDomain(V)}else r.yDomain(null);_.domain([0,E[0].values.length-1]).range([0,q]).clamp(!0);var E=t(D.i,E),$=b?"none":"all",J=F.selectAll("g.nv-wrap.nv-cumulativeLine").data([E]),K=J.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),Q=J.select("g");K.append("g").attr("class","nv-interactive"),K.append("g").attr("class","nv-x nv-axis").style("pointer-events","none"),K.append("g").attr("class","nv-y nv-axis"),K.append("g").attr("class","nv-background"),K.append("g").attr("class","nv-linesWrap").style("pointer-events",$),K.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none"),K.append("g").attr("class","nv-legendWrap"),K.append("g").attr("class","nv-controlsWrap"),p&&(o.width(q),Q.select(".nv-legendWrap").datum(E).call(o),f.top!=o.height()&&(f.top=o.height(),R=(h||parseInt(F.style("height"))||400)-f.top-f.bottom),Q.select(".nv-legendWrap").attr("transform","translate(0,"+ -f.top+")"));if(y){var G=[{key:"Re-scale y-axis",disabled:!w}];u.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),Q.select(".nv-controlsWrap").datum(G).attr("transform","translate(0,"+ -f.top+")").call(u)}J.attr("transform","translate("+f.left+","+f.top+")"),m&&Q.select(".nv-y.nv-axis").attr("transform","translate("+q+",0)");var Y=E.filter(function(e){return e.tempDisabled});J.select(".tempDisabled").remove(),Y.length&&J.append("text").attr("class","tempDisabled").attr("x",q/2).attr("y","-.71em").style("text-anchor","end").text(Y.map(function(e){return e.key}).join(", ")+" values cannot be calculated for this time period."),b&&(a.width(q).height(R).margin({left:f.left,top:f.top}).svgContainer(F).xScale(S),J.select(".nv-interactive").call(a)),K.select(".nv-background").append("rect"),Q.select(".nv-background rect").attr("width",q).attr("height",R),r.y(function(e){return e.display.y}).width(q).height(R).color(E.map(function(e,t){return e.color||l(e,t)}).filter(function(e,t){return!E[t].disabled&&!E[t].tempDisabled}));var Z=Q.select(".nv-linesWrap").datum(E.filter(function(e){return!e.disabled&&!e.tempDisabled}));Z.call(r),E.forEach(function(e,t){e.seriesIndex=t});var et=E.filter(function(e){return!e.disabled&&!!L(e)}),tt=Q.select(".nv-avgLinesWrap").selectAll("line").data(et,function(e){return e.key}),nt=function(e){var t=x(L(e));return t<0?0:t>R?R:t};tt.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(e,t){return r.color()(e,e.seriesIndex)}).attr("x1",0).attr("x2",q).attr("y1",nt).attr("y2",nt),tt.style("stroke-opacity",function(e){var t=x(L(e));return t<0||t>R?0:1}).attr("x1",0).attr("x2",q).attr("y1",nt).attr("y2",nt),tt.exit().remove();var rt=Z.selectAll(".nv-indexLine").data([D]);rt.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(z),rt.attr("transform",function(e){return"translate("+_(e.i)+",0)"}).attr("height",R),d&&(i.scale(S).ticks(Math.min(E[0].values.length,q/70)).tickSize(-R,0),Q.select(".nv-x.nv-axis").attr("transform","translate(0,"+x.range()[0]+")"),d3.transition(Q.select(".nv-x.nv-axis")).call(i)),v&&(s.scale(x).ticks(R/36).tickSize(-q,0),d3.transition(Q.select(".nv-y.nv-axis")).call(s)),Q.select(".nv-background rect").on("click",function(){D.x=d3.mouse(this)[0],D.i=Math.round(_.invert(D.x)),N.index=D.i,A.stateChange(N),j()}),r.dispatch.on("elementClick",function(e){D.i=e.pointIndex,D.x=_(D.i),N.index=D.i,A.stateChange(N),j()}),u.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,w=!t.disabled,N.rescaleY=w,A.stateChange(N),e.update()}),o.dispatch.on("stateChange",function(t){N.disabled=t.disabled,A.stateChange(N),e.update()}),a.dispatch.on("elementMousemove",function(t){r.clearHighlights();var o,u,c,h=[];E.filter(function(e,t){return e.seriesIndex=t,!e.disabled}).forEach(function(i,s){u=n.interactiveBisect(i.values,t.pointXValue,e.x()),r.highlightPoint(s,u,!0);var a=i.values[u];if(typeof a=="undefined")return;typeof o=="undefined"&&(o=a),typeof c=="undefined"&&(c=e.xScale()(e.x()(a,u))),h.push({key:i.key,value:e.y()(a,u),color:l(i,i.seriesIndex)})});if(h.length>2){var p=e.yScale().invert(t.mouseY),d=Math.abs(e.yScale().domain()[0]-e.yScale().domain()[1]),v=.03*d,m=n.nearestValueIndex(h.map(function(e){return e.value}),p,v);m!==null&&(h[m].highlight=!0)}var y=i.tickFormat()(e.x()(o,u),u);a.tooltip.position({left:c+f.left,top:t.mouseY+f.top}).chartContainer(I.parentNode).enabled(g).valueFormatter(function(e,t){return s.tickFormat()(e)}).data({value:y,series:h})(),a.renderGuideLine(c)}),a.dispatch.on("elementMouseout",function(e){A.tooltipHide(),r.clearHighlights()}),A.on("tooltipShow",function(e){g&&P(e,I.parentNode)}),A.on("changeState",function(t){typeof t.disabled!="undefined"&&(E.forEach(function(e,n){e.disabled=t.disabled[n]}),N.disabled=t.disabled),typeof t.index!="undefined"&&(D.i=t.index,D.x=_(D.i),N.index=t.index,rt.data([D])),typeof t.rescaleY!="undefined"&&(w=t.rescaleY),e.update()})}),e}function t(e,t){return t.map(function(t,n){if(!t.values)return t;var i=r.y()(t.values[e],e);return i<-.95&&!M?(t.tempDisabled=!0,t):(t.tempDisabled=!1,t.values=t.values.map(function(e,t){return e.display={y:(r.y()(e,t)-i)/(1+i)},e}),t)})}var r=n.models.line(),i=n.models.axis(),s=n.models.axis(),o=n.models.legend(),u=n.models.legend(),a=n.interactiveGuideline(),f={top:30,right:30,bottom:50,left:60},l=n.utils.defaultColor(),c=null,h=null,p=!0,d=!0,v=!0,m=!1,g=!0,y=!0,b=!1,w=!0,E=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" at "+t+"</p>"},S,x,T=r.id(),N={index:0,rescaleY:w},C=null,k="No Data Available.",L=function(e){return e.average},A=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),O=250,M=!1;i.orient("bottom").tickPadding(7),s.orient(m?"right":"left"),u.updateState(!1);var _=d3.scale.linear(),D={i:0,x:0},P=function(t,o){var u=t.pos[0]+(o.offsetLeft||0),a=t.pos[1]+(o.offsetTop||0),f=i.tickFormat()(r.x()(t.point,t.pointIndex)),l=s.tickFormat()(r.y()(t.point,t.pointIndex)),c=E(t.series.key,f,l,t,e);n.tooltip.show([u,a],c,null,null,o)};return r.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+f.left,e.pos[1]+f.top],A.tooltipShow(e)}),r.dispatch.on("elementMouseout.tooltip",function(e){A.tooltipHide(e)}),A.on("tooltipHide",function(){g&&n.tooltip.cleanup()}),e.dispatch=A,e.lines=r,e.legend=o,e.xAxis=i,e.yAxis=s,e.interactiveLayer=a,d3.rebind(e,r,"defined","isArea","x","y","xScale","yScale","size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","useVoronoi","id"),e.options=n.utils.optionsFunc.bind(e),e.margin=function(t){return arguments.length?(f.top=typeof t.top!="undefined"?t.top:f.top,f.right=typeof t.right!="undefined"?t.right:f.right,f.bottom=typeof t.bottom!="undefined"?t.bottom:f.bottom,f.left=typeof t.left!="undefined"?t.left:f.left,e):f},e.width=function(t){return arguments.length?(c=t,e):c},e.height=function(t){return arguments.length?(h=t,e):h},e.color=function(t){return arguments.length?(l=n.utils.getColor(t),o.color(l),e):l},e.rescaleY=function(t){return arguments.length?(w=t,e):w},e.showControls=function(t){return arguments.length?(y=t,e):y},e.useInteractiveGuideline=function(t){return arguments.length?(b=t,t===!0&&(e.interactive(!1),e.useVoronoi(!1)),e):b},e.showLegend=function(t){return arguments.length?(p=t,e):p},e.showXAxis=function(t){return arguments.length?(d=t,e):d},e.showYAxis=function(t){return arguments.length?(v=t,e):v},e.rightAlignYAxis=function(t){return arguments.length?(m=t,s.orient(t?"right":"left"),e):m},e.tooltips=function(t){return arguments.length?(g=t,e):g},e.tooltipContent=function(t){return arguments.length?(E=t,e):E},e.state=function(t){return arguments.length?(N=t,e):N},e.defaultState=function(t){return arguments.length?(C=t,e):C},e.noData=function(t){return arguments.length?(k=t,e):k},e.average=function(t){return arguments.length?(L=t,e):L},e.transitionDuration=function(t){return arguments.length?(O=t,e):O},e.noErrorCheck=function(t){return arguments.length?(M=t,e):M},e},n.models.discreteBar=function(){"use strict";function e(n){return n.each(function(e){var n=r-t.left-t.right,s=i-t.top-t.bottom,S=d3.select(this);e.forEach(function(e,t){e.values.forEach(function(e){e.series=t})});var x=d&&v?[]:e.map(function(e){return e.values.map(function(e,t){return{x:a(e,t),y:f(e,t),y0:e.y0}})});o.domain(d||d3.merge(x).map(function(e){return e.x})).rangeBands(m||[0,n],.1),u.domain(v||d3.extent(d3.merge(x).map(function(e){return e.y}).concat(l))),h?u.range(g||[s-(u.domain()[0]<0?12:0),u.domain()[1]>0?12:0]):u.range(g||[s,0]),w=w||o,E=E||u.copy().range([u(0),u(0)]);var T=S.selectAll("g.nv-wrap.nv-discretebar").data([e]),N=T.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar"),C=N.append("g"),k=T.select("g");C.append("g").attr("class","nv-groups"),T.attr("transform","translate("+t.left+","+t.top+")");var L=T.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});L.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),L.exit().transition().style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),L.attr("class",function(e,t){return"nv-group nv-series-"+t}).classed("hover",function(e){return e.hover}),L.transition().style("stroke-opacity",1).style("fill-opacity",.75);var A=L.selectAll("g.nv-bar").data(function(e){return e.values});A.exit().remove();var O=A.enter().append("g").attr("transform",function(e,t,n){return"translate("+(o(a(e,t))+o.rangeBand()*.05)+", "+u(0)+")"}).on("mouseover",function(t,n){d3.select(this).classed("hover",!0),y.elementMouseover({value:f(t,n),point:t,series:e[t.series],pos:[o(a(t,n))+o.rangeBand()*(t.series+.5)/e.length,u(f(t,n))],pointIndex:n,seriesIndex:t.series,e:d3.event})}).on("mouseout",function(t,n){d3.select(this).classed("hover",!1),y.elementMouseout({value:f(t,n),point:t,series:e[t.series],pointIndex:n,seriesIndex:t.series,e:d3.event})}).on("click",function(t,n){y.elementClick({value:f(t,n),point:t,series:e[t.series],pos:[o(a(t,n))+o.rangeBand()*(t.series+.5)/e.length,u(f(t,n))],pointIndex:n,seriesIndex:t.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(t,n){y.elementDblClick({value:f(t,n),point:t,series:e[t.series],pos:[o(a(t,n))+o.rangeBand()*(t.series+.5)/e.length,u(f(t,n))],pointIndex:n,seriesIndex:t.series,e:d3.event}),d3.event.stopPropagation()});O.append("rect").attr("height",0).attr("width",o.rangeBand()*.9/e.length),h?(O.append("text").attr("text-anchor","middle"),A.select("text").text(function(e,t){return p(f(e,t))}).transition().attr("x",o.rangeBand()*.9/2).attr("y",function(e,t){return f(e,t)<0?u(f(e,t))-u(0)+12:-4})):A.selectAll("text").remove(),A.attr("class",function(e,t){return f(e,t)<0?"nv-bar negative":"nv-bar positive"}).style("fill",function(e,t){return e.color||c(e,t)}).style("stroke",function(e,t){return e.color||c(e,t)}).select("rect").attr("class",b).transition().attr("width",o.rangeBand()*.9/e.length),A.transition().attr("transform",function(e,t){var n=o(a(e,t))+o.rangeBand()*.05,r=f(e,t)<0?u(0):u(0)-u(f(e,t))<1?u(0)-1:u(f(e,t));return"translate("+n+", "+r+")"}).select("rect").attr("height",function(e,t){return Math.max(Math.abs(u(f(e,t))-u(v&&v[0]||0))||1)}),w=o.copy(),E=u.copy()}),e}var t={top:0,right:0,bottom:0,left:0},r=960,i=500,s=Math.floor(Math.random()*1e4),o=d3.scale.ordinal(),u=d3.scale.linear(),a=function(e){return e.x},f=function(e){return e.y},l=[0],c=n.utils.defaultColor(),h=!1,p=d3.format(",.2f"),d,v,m,g,y=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),b="discreteBar",w,E;return e.dispatch=y,e.options=n.utils.optionsFunc.bind(e),e.x=function(t){return arguments.length?(a=t,e):a},e.y=function(t){return arguments.length?(f=t,e):f},e.margin=function(n){return arguments.length?(t.top=typeof n.top!="undefined"?n.top:t.top,t.right=typeof n.right!="undefined"?n.right:t.right,t.bottom=typeof n.bottom!="undefined"?n.bottom:t.bottom,t.left=typeof n.left!="undefined"?n.left:t.left,e):t},e.width=function(t){return arguments.length?(r=t,e):r},e.height=function(t){return arguments.length?(i=t,e):i},e.xScale=function(t){return arguments.length?(o=t,e):o},e.yScale=function(t){return arguments.length?(u=t,e):u},e.xDomain=function(t){return arguments.length?(d=t,e):d},e.yDomain=function(t){return arguments.length?(v=t,e):v},e.xRange=function(t){return arguments.length?(m=t,e):m},e.yRange=function(t){return arguments.length?(g=t,e):g},e.forceY=function(t){return arguments.length?(l=t,e):l},e.color=function(t){return arguments.length?(c=n.utils.getColor(t),e):c},e.id=function(t){return arguments.length?(s=t,e):s},e.showValues=function(t){return arguments.length?(h=t,e):h},e.valueFormat=function(t){return arguments.length?(p=t,e):p},e.rectClass=function(t){return arguments.length?(b=t,e):b},e},n.models.discreteBarChart=function(){"use strict";function e(n){return n.each(function(n){var a=d3.select(this),d=this,E=(o||parseInt(a.style("width"))||960)-s.left-s.right,S=(u||parseInt(a.style("height"))||400)-s.top-s.bottom;e.update=function(){y.beforeUpdate(),a.transition().duration(b).call(e)},e.container=this;if(!n||!n.length||!n.filter(function(e){return e.values.length}).length){var x=a.selectAll(".nv-noData").data([g]);return x.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),x.attr("x",s.left+E/2).attr("y",s.top+S/2).text(function(e){return e}),e}a.selectAll(".nv-noData").remove(),v=t.xScale(),m=t.yScale().clamp(!0);var T=a.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([n]),N=T.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),C=N.append("defs"),k=T.select("g");N.append("g").attr("class","nv-x nv-axis"),N.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),N.append("g").attr("class","nv-barsWrap"),k.attr("transform","translate("+s.left+","+s.top+")"),c&&k.select(".nv-y.nv-axis").attr("transform","translate("+E+",0)"),t.width(E).height(S);var L=k.select(".nv-barsWrap").datum(n.filter(function(e){return!e.disabled}));L.transition().call(t),C.append("clipPath").attr("id","nv-x-label-clip-"+t.id()).append("rect"),k.select("#nv-x-label-clip-"+t.id()+" rect").attr("width",v.rangeBand()*(h?2:1)).attr("height",16).attr("x",-v.rangeBand()/(h?1:2));if(f){r.scale(v).ticks(E/100).tickSize(-S,0),k.select(".nv-x.nv-axis").attr("transform","translate(0,"+(m.range()[0]+(t.showValues()&&m.domain()[0]<0?16:0))+")"),k.select(".nv-x.nv-axis").transition().call(r);var A=k.select(".nv-x.nv-axis").selectAll("g");h&&A.selectAll("text").attr("transform",function(e,t,n){return"translate(0,"+(n%2==0?"5":"17")+")"})}l&&(i.scale(m).ticks(S/36).tickSize(-E,0),k.select(".nv-y.nv-axis").transition().call(i)),k.select(".nv-zeroLine line").attr("x1",0).attr("x2",E).attr("y1",m(0)).attr("y2",m(0)),y.on("tooltipShow",function(e){p&&w(e,d.parentNode)})}),e}var t=n.models.discreteBar(),r=n.models.axis(),i=n.models.axis(),s={top:15,right:10,bottom:50,left:60},o=null,u=null,a=n.utils.getColor(),f=!0,l=!0,c=!1,h=!1,p=!0,d=function(e,t,n,r,i){return"<h3>"+t+"</h3>"+"<p>"+n+"</p>"},v,m,g="No Data Available.",y=d3.dispatch("tooltipShow","tooltipHide","beforeUpdate"),b=250;r.orient("bottom").highlightZero(!1).showMaxMin(!1).tickFormat(function(e){return e}),i.orient(c?"right":"left").tickFormat(d3.format(",.1f"));var w=function(s,o){var u=s.pos[0]+(o.offsetLeft||0),a=s.pos[1]+(o.offsetTop||0),f=r.tickFormat()(t.x()(s.point,s.pointIndex)),l=i.tickFormat()(t.y()(s.point,s.pointIndex)),c=d(s.series.key,f,l,s,e);n.tooltip.show([u,a],c,s.value<0?"n":"s",null,o)};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+s.left,e.pos[1]+s.top],y.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){y.tooltipHide(e)}),y.on("tooltipHide",function(){p&&n.tooltip.cleanup()}),e.dispatch=y,e.discretebar=t,e.xAxis=r,e.yAxis=i,d3.rebind(e,t,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","id","showValues","valueFormat"),e.options=n.utils.optionsFunc.bind(e),e.margin=function(t){return arguments.length?(s.top=typeof t.top!="undefined"?t.top:s.top,s.right=typeof t.right!="undefined"?t.right:s.right,s.bottom=typeof t.bottom!="undefined"?t.bottom:s.bottom,s.left=typeof t.left!="undefined"?t.left:s.left,e):s},e.width=function(t){return arguments.length?(o=t,e):o},e.height=function(t){return arguments.length?(u=t,e):u},e.color=function(r){return arguments.length?(a=n.utils.getColor(r),t.color(a),e):a},e.showXAxis=function(t){return arguments.length?(f=t,e):f},e.showYAxis=function(t){return arguments.length?(l=t,e):l},e.rightAlignYAxis=function(t){return arguments.length?(c=t,i.orient(t?"right":"left"),e):c},e.staggerLabels=function(t){return arguments.length?(h=t,e):h},e.tooltips=function(t){return arguments.length?(p=t,e):p},e.tooltipContent=function(t){return arguments.length?(d=t,e):d},e.noData=function(t){return arguments.length?(g=t,e):g},e.transitionDuration=function(t){return arguments.length?(b=t,e):b},e},n.models.distribution=function(){"use strict";function e(n){return n.each(function(e){var n=r-(s==="x"?t.left+t.right:t.top+t.bottom),f=s=="x"?"y":"x",c=d3.select(this);l=l||a;var h=c.selectAll("g.nv-distribution").data([e]),p=h.enter().append("g").attr("class","nvd3 nv-distribution"),d=p.append("g"),v=h.select("g");h.attr("transform","translate("+t.left+","+t.top+")");var m=v.selectAll("g.nv-dist").data(function(e){return e},function(e){return e.key});m.enter().append("g"),m.attr("class",function(e,t){return"nv-dist nv-series-"+t}).style("stroke",function(e,t){return u(e,t)});var g=m.selectAll("line.nv-dist"+s).data(function(e){return e.values});g.enter().append("line").attr(s+"1",function(e,t){return l(o(e,t))}).attr(s+"2",function(e,t){return l(o(e,t))}),m.exit().selectAll("line.nv-dist"+s).transition().attr(s+"1",function(e,t){return a(o(e,t))}).attr(s+"2",function(e,t){return a(o(e,t))}).style("stroke-opacity",0).remove(),g.attr("class",function(e,t){return"nv-dist"+s+" nv-dist"+s+"-"+t}).attr(f+"1",0).attr(f+"2",i),g.transition().attr(s+"1",function(e,t){return a(o(e,t))}).attr(s+"2",function(e,t){return a(o(e,t))}),l=a.copy()}),e}var t={top:0,right:0,bottom:0,left:0},r=400,i=8,s="x",o=function(e){return e[s]},u=n.utils.defaultColor(),a=d3.scale.linear(),f,l;return e.options=n.utils.optionsFunc.bind(e),e.margin=function(n){return arguments.length?(t.top=typeof n.top!="undefined"?n.top:t.top,t.right=typeof n.right!="undefined"?n.right:t.right,t.bottom=typeof n.bottom!="undefined"?n.bottom:t.bottom,t.left=typeof n.left!="undefined"?n.left:t.left,e):t},e.width=function(t){return arguments.length?(r=t,e):r},e.axis=function(t){return arguments.length?(s=t,e):s},e.size=function(t){return arguments.length?(i=t,e):i},e.getData=function(t){return arguments.length?(o=d3.functor(t),e):o},e.scale=function(t){return arguments.length?(a=t,e):a},e.color=function(t){return arguments.length?(u=n.utils.getColor(t),e):u},e},n.models.historicalBar=function(){"use strict";function e(E){return E.each(function(e){var E=r-t.left-t.right,S=i-t.top-t.bottom,x=d3.select(this);o.domain(v||d3.extent(e[0].values.map(a).concat(l))),h?o.range(g||[E*.5/e[0].values.length,E*(e[0].values.length-.5)/e[0].values.length]):o.range(g||[0,E]),u.domain(m||d3.extent(e[0].values.map(f).concat(c))).range(y||[S,0]),o.domain()[0]===o.domain()[1]&&(o.domain()[0]?o.domain([o.domain()[0]-o.domain()[0]*.01,o.domain()[1]+o.domain()[1]*.01]):o.domain([-1,1])),u.domain()[0]===u.domain()[1]&&(u.domain()[0]?u.domain([u.domain()[0]+u.domain()[0]*.01,u.domain()[1]-u.domain()[1]*.01]):u.domain([-1,1]));var T=x.selectAll("g.nv-wrap.nv-historicalBar-"+s).data([e[0].values]),N=T.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+s),C=N.append("defs"),k=N.append("g"),L=T.select("g");k.append("g").attr("class","nv-bars"),T.attr("transform","translate("+t.left+","+t.top+")"),x.on("click",function(e,t){b.chartClick({data:e,index:t,pos:d3.event,id:s})}),C.append("clipPath").attr("id","nv-chart-clip-path-"+s).append("rect"),T.select("#nv-chart-clip-path-"+s+" rect").attr("width",E).attr("height",S),L.attr("clip-path",p?"url(#nv-chart-clip-path-"+s+")":"");var A=T.select(".nv-bars").selectAll(".nv-bar").data(function(e){return e},function(e,t){return a(e,t)});A.exit().remove();var O=A.enter().append("rect").attr("x",0).attr("y",function(e,t){return n.utils.NaNtoZero(u(Math.max(0,f(e,t))))}).attr("height",function(e,t){return n.utils.NaNtoZero(Math.abs(u(f(e,t))-u(0)))}).attr("transform",function(t,n){return"translate("+(o(a(t,n))-E/e[0].values.length*.45)+",0)"}).on("mouseover",function(t,n){if(!w)return;d3.select(this).classed("hover",!0),b.elementMouseover({point:t,series:e[0],pos:[o(a(t,n)),u(f(t,n))],pointIndex:n,seriesIndex:0,e:d3.event})}).on("mouseout",function(t,n){if(!w)return;d3.select(this).classed("hover",!1),b.elementMouseout({point:t,series:e[0],pointIndex:n,seriesIndex:0,e:d3.event})}).on("click",function(e,t){if(!w)return;b.elementClick({value:f(e,t),data:e,index:t,pos:[o(a(e,t)),u(f(e,t))],e:d3.event,id:s}),d3.event.stopPropagation()}).on("dblclick",function(e,t){if(!w)return;b.elementDblClick({value:f(e,t),data:e,index:t,pos:[o(a(e,t)),u(f(e,t))],e:d3.event,id:s}),d3.event.stopPropagation()});A.attr("fill",function(e,t){return d(e,t)}).attr("class",function(e,t,n){return(f(e,t)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+n+"-"+t}).transition().attr("transform",function(t,n){return"translate("+(o(a(t,n))-E/e[0].values.length*.45)+",0)"}).attr("width",E/e[0].values.length*.9),A.transition().attr("y",function(e,t){var r=f(e,t)<0?u(0):u(0)-u(f(e,t))<1?u(0)-1:u(f(e,t));return n.utils.NaNtoZero(r)}).attr("height",function(e,t){return n.utils.NaNtoZero(Math.max(Math.abs(u(f(e,t))-u(0)),1))})}),e}var t={top:0,right:0,bottom:0,left:0},r=960,i=500,s=Math.floor(Math.random()*1e4),o=d3.scale.linear(),u=d3.scale.linear(),a=function(e){return e.x},f=function(e){return e.y},l=[],c=[0],h=!1,p=!0,d=n.utils.defaultColor(),v,m,g,y,b=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),w=!0;return e.highlightPoint=function(e,t){d3.select(".nv-historicalBar-"+s).select(".nv-bars .nv-bar-0-"+e).classed("hover",t)},e.clearHighlights=function(){d3.select(".nv-historicalBar-"+s).select(".nv-bars .nv-bar.hover").classed("hover",!1)},e.dispatch=b,e.options=n.utils.optionsFunc.bind(e),e.x=function(t){return arguments.length?(a=t,e):a},e.y=function(t){return arguments.length?(f=t,e):f},e.margin=function(n){return arguments.length?(t.top=typeof n.top!="undefined"?n.top:t.top,t.right=typeof n.right!="undefined"?n.right:t.right,t.bottom=typeof n.bottom!="undefined"?n.bottom:t.bottom,t.left=typeof n.left!="undefined"?n.left:t.left,e):t},e.width=function(t){return arguments.length?(r=t,e):r},e.height=function(t){return arguments.length?(i=t,e):i},e.xScale=function(t){return arguments.length?(o=t,e):o},e.yScale=function(t){return arguments.length?(u=t,e):u},e.xDomain=function(t){return arguments.length?(v=t,e):v},e.yDomain=function(t){return arguments.length?(m=t,e):m},e.xRange=function(t){return arguments.length?(g=t,e):g},e.yRange=function(t){return arguments.length?(y=t,e):y},e.forceX=function(t){return arguments.length?(l=t,e):l},e.forceY=function(t){return arguments.length?(c=t,e):c},e.padData=function(t){return arguments.length?(h=t,e):h},e.clipEdge=function(t){return arguments.length?(p=t,e):p},e.color=function(t){return arguments.length?(d=n.utils.getColor(t),e):d},e.id=function(t){return arguments.length?(s=t,e):s},e.interactive=function(t){return arguments.length?(w=!1,e):w},e},n.models.historicalBarChart=function(){"use strict";function e(n){return n.each(function(v){var T=d3.select(this),N=this,C=(a||parseInt(T.style("width"))||960)-o.left-o.right,k=(f||parseInt(T.style("height"))||400)-o.top-o.bottom;e.update=function(){T.transition().duration(S).call(e)},e.container=this,y.disabled=v.map(function(e){return!!e.disabled});if(!b){var L;b={};for(L in y)y[L]instanceof Array?b[L]=y[L].slice(0):b[L]=y[L]}if(!v||!v.length||!v.filter(function(e){return e.values.length}).length){var A=T.selectAll(".nv-noData").data([w]);return A.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),A.attr("x",o.left+C/2).attr("y",o.top+k/2).text(function(e){return e}),e}T.selectAll(".nv-noData").remove(),m=t.xScale(),g=t.yScale();var O=T.selectAll("g.nv-wrap.nv-historicalBarChart").data([v]),M=O.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g"),_=O.select("g");M.append("g").attr("class","nv-x nv-axis"),M.append("g").attr("class","nv-y nv-axis"),M.append("g").attr("class","nv-barsWrap"),M.append("g").attr("class","nv-legendWrap"),l&&(s.width(C),_.select(".nv-legendWrap").datum(v).call(s),o.top!=s.height()&&(o.top=s.height(),k=(f||parseInt(T.style("height"))||400)-o.top-o.bottom),O.select(".nv-legendWrap").attr("transform","translate(0,"+ -o.top+")")),O.attr("transform","translate("+o.left+","+o.top+")"),p&&_.select(".nv-y.nv-axis").attr("transform","translate("+C+",0)"),t.width(C).height(k).color(v.map(function(e,t){return e.color||u(e,t)}).filter(function(e,t){return!v[t].disabled}));var D=_.select(".nv-barsWrap").datum(v.filter(function(e){return!e.disabled}));D.transition().call(t),c&&(r.scale(m).tickSize(-k,0),_.select(".nv-x.nv-axis").attr("transform","translate(0,"+g.range()[0]+")"),_.select(".nv-x.nv-axis").transition().call(r)),h&&(i.scale(g).ticks(k/36).tickSize(-C,0),_.select(".nv-y.nv-axis").transition().call(i)),s.dispatch.on("legendClick",function(t,r){t.disabled=!t.disabled,v.filter(function(e){return!e.disabled}).length||v.map(function(e){return e.disabled=!1,O.selectAll(".nv-series").classed("disabled",!1),e}),y.disabled=v.map(function(e){return!!e.disabled}),E.stateChange(y),n.transition().call(e)}),s.dispatch.on("legendDblclick",function(t){v.forEach(function(e){e.disabled=!0}),t.disabled=!1,y.disabled=v.map(function(e){return!!e.disabled}),E.stateChange(y),e.update()}),E.on("tooltipShow",function(e){d&&x(e,N.parentNode)}),E.on("changeState",function(t){typeof t.disabled!="undefined"&&(v.forEach(function(e,n){e.disabled=t.disabled[n]}),y.disabled=t.disabled),e.update()})}),e}var t=n.models.historicalBar(),r=n.models.axis(),i=n.models.axis(),s=n.models.legend(),o={top:30,right:90,bottom:50,left:90},u=n.utils.defaultColor(),a=null,f=null,l=!1,c=!0,h=!0,p=!1,d=!0,v=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" at "+t+"</p>"},m,g,y={},b=null,w="No Data Available.",E=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),S=250;r.orient("bottom").tickPadding(7),i.orient(p?"right":"left");var x=function(s,o){if(o){var u=d3.select(o).select("svg"),a=u.node()?u.attr("viewBox"):null;if(a){a=a.split(" ");var f=parseInt(u.style("width"))/a[2];s.pos[0]=s.pos[0]*f,s.pos[1]=s.pos[1]*f}}var l=s.pos[0]+(o.offsetLeft||0),c=s.pos[1]+(o.offsetTop||0),h=r.tickFormat()(t.x()(s.point,s.pointIndex)),p=i.tickFormat()(t.y()(s.point,s.pointIndex)),d=v(s.series.key,h,p,s,e);n.tooltip.show([l,c],d,null,null,o)};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+o.left,e.pos[1]+o.top],E.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){E.tooltipHide(e)}),E.on("tooltipHide",function(){d&&n.tooltip.cleanup()}),e.dispatch=E,e.bars=t,e.legend=s,e.xAxis=r,e.yAxis=i,d3.rebind(e,t,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id","interpolate","highlightPoint","clearHighlights","interactive"),e.options=n.utils.optionsFunc.bind(e),e.margin=function(t){return arguments.length?(o.top=typeof t.top!="undefined"?t.top:o.top,o.right=typeof t.right!="undefined"?t.right:o.right,o.bottom=typeof t.bottom!="undefined"?t.bottom:o.bottom,o.left=typeof t.left!="undefined"?t.left:o.left,e):o},e.width=function(t){return arguments.length?(a=t,e):a},e.height=function(t){return arguments.length?(f=t,e):f},e.color=function(t){return arguments.length?(u=n.utils.getColor(t),s.color(u),e):u},e.showLegend=function(t){return arguments.length?(l=t,e):l},e.showXAxis=function(t){return arguments.length?(c=t,e):c},e.showYAxis=function(t){return arguments.length?(h=t,e):h},e.rightAlignYAxis=function(t){return arguments.length?(p=t,i.orient(t?"right":"left"),e):p},e.tooltips=function(t){return arguments.length?(d=t,e):d},e.tooltipContent=function(t){return arguments.length?(v=t,e):v},e.state=function(t){return arguments.length?(y=t,e):y},e.defaultState=function(t){return arguments.length?(b=t,e):b},e.noData=function(t){return arguments.length?(w=t,e):w},e.transitionDuration=function(t){return arguments.length?(S=t,e):S},e},n.models.indentedTree=function(){"use strict";function e(t){return t.each(function(t){function n(t,r,i){d3.event.stopPropagation();if(d3.event.shiftKey&&!i)return d3.event.shiftKey=!1,t.values&&t.values.forEach(function(e){(e.values||e._values)&&n(e,0,!0)}),!0;if(!o(t))return!0;t.values?(t._values=t.values,t.values=null):(t.values=t._values,t._values=null),e.update()}function r(e){return e._values&&e._values.length?p:e.values&&e.values.length?d:""}function s(e){return e._values&&e._values.length}function o(e){var t=e.values||e._values;return t&&t.length}var y=1,b=d3.select(this),w=d3.layout.tree().children(function(e){return e.values}).size([i,l]);e.update=function(){b.transition().duration(600).call(e)},t[0]||(t[0]={key:f});var E=w.nodes(t[0]),S=d3.select(this).selectAll("div").data([[E]]),x=S.enter().append("div").attr("class","nvd3 nv-wrap nv-indentedtree"),T=x.append("table"),N=S.select("table").attr("width","100%").attr("class",h);if(u){var C=T.append("thead"),k=C.append("tr");c.forEach(function(e){k.append("th").attr("width",e.width?e.width:"10%").style("text-align",e.type=="numeric"?"right":"left").append("span").text(e.label)})}var L=N.selectAll("tbody").data(function(e){return e});L.enter().append("tbody"),y=d3.max(E,function(e){return e.depth}),w.size([i,y*l]);var A=L.selectAll("tr").data(function(e){return e.filter(function(e){return a&&!e.children?a(e):!0})},function(e,t){return e.id||e.id||++g});A.exit().remove(),A.select("img.nv-treeicon").attr("src",r).classed("folded",s);var O=A.enter().append("tr");c.forEach(function(e,t){var i=O.append("td").style("padding-left",function(e){return(t?0:e.depth*l+12+(r(e)?0:16))+"px"},"important").style("text-align",e.type=="numeric"?"right":"left");t==0&&i.append("img").classed("nv-treeicon",!0).classed("nv-folded",s).attr("src",r).style("width","14px").style("height","14px").style("padding","0 1px").style("display",function(e){return r(e)?"inline-block":"none"}).on("click",n),i.each(function(n){!t&&m(n)?d3.select(this).append("a").attr("href",m).attr("class",d3.functor(e.classes)).append("span"):d3.select(this).append("span"),d3.select(this).select("span").attr("class",d3.functor(e.classes)).text(function(t){return e.format?e.format(t):t[e.key]||"-"})}),e.showCount&&(i.append("span").attr("class","nv-childrenCount"),A.selectAll("span.nv-childrenCount").text(function(e){return e.values&&e.values.length||e._values&&e._values.length?"("+(e.values&&e.values.filter(function(e){return a?a(e):!0}).length||e._values&&e._values.filter(function(e){return a?a(e):!0}).length||0)+")":""}))}),A.order().on("click",function(e){v.elementClick({row:this,data:e,pos:[e.x,e.y]})}).on("dblclick",function(e){v.elementDblclick({row:this,data:e,pos:[e.x,e.y]})}).on("mouseover",function(e){v.elementMouseover({row:this,data:e,pos:[e.x,e.y]})}).on("mouseout",function(e){v.elementMouseout({row:this,data:e,pos:[e.x,e.y]})})}),e}var t={top:0,right:0,bottom:0,left:0},r=960,i=500,s=n.utils.defaultColor(),o=Math.floor(Math.random()*1e4),u=!0,a=!1,f="No Data Available.",l=20,c=[{key:"key",label:"Name",type:"text"}],h=null,p="images/grey-plus.png",d="images/grey-minus.png",v=d3.dispatch("elementClick","elementDblclick","elementMouseover","elementMouseout"),m=function(e){return e.url},g=0;return e.options=n.utils.optionsFunc.bind(e),e.margin=function(n){return arguments.length?(t.top=typeof n.top!="undefined"?n.top:t.top,t.right=typeof n.right!="undefined"?n.right:t.right,t.bottom=typeof n.bottom!="undefined"?n.bottom:t.bottom,t.left=typeof n.left!="undefined"?n.left:t.left,e):t},e.width=function(t){return arguments.length?(r=t,e):r},e.height=function(t){return arguments.length?(i=t,e):i},e.color=function(t){return arguments.length?(s=n.utils.getColor(t),scatter.color(s),e):s},e.id=function(t){return arguments.length?(o=t,e):o},e.header=function(t){return arguments.length?(u=t,e):u},e.noData=function(t){return arguments.length?(f=t,e):f},e.filterZero=function(t){return arguments.length?(a=t,e):a},e.columns=function(t){return arguments.length?(c=t,e):c},e.tableClass=function(t){return arguments.length?(h=t,e):h},e.iconOpen=function(t){return arguments.length?(p=t,e):p},e.iconClose=function(t){return arguments.length?(d=t,e):d},e.getUrl=function(t){return arguments.length?(m=t,e):m},e},n.models.legend=function(){"use strict";function e(h){return h.each(function(e){var h=r-t.left-t.right,p=d3.select(this),d=p.selectAll("g.nv-legend").data([e]),v=d.enter().append("g").attr("class","nvd3 nv-legend").append("g"),m=d.select("g");d.attr("transform","translate("+t.left+","+t.top+")");var g=m.selectAll(".nv-series").data(function(e){return e}),y=g.enter().append("g").attr("class","nv-series").on("mouseover",function(e,t){c.legendMouseover(e,t)}).on("mouseout",function(e,t){c.legendMouseout(e,t)}).on("click",function(t,n){c.legendClick(t,n),f&&(l?(e.forEach(function(e){e.disabled=!0}),t.disabled=!1):(t.disabled=!t.disabled,e.every(function(e){return e.disabled})&&e.forEach(function(e){e.disabled=!1})),c.stateChange({disabled:e.map(function(e){return!!e.disabled})}))}).on("dblclick",function(t,n){c.legendDblclick(t,n),f&&(e.forEach(function(e){e.disabled=!0}),t.disabled=!1,c.stateChange({disabled:e.map(function(e){return!!e.disabled})}))});y.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),y.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8"),g.classed("disabled",function(e){return e.disabled}),g.exit().remove(),g.select("circle").style("fill",function(e,t){return e.color||o(e,t)}).style("stroke",function(e,t){return e.color||o(e,t)}),g.select("text").text(s);if(u){var b=[];g.each(function(e,t){var r=d3.select(this).select("text"),i;try{i=r.getComputedTextLength();if(i<=0)throw Error()}catch(s){i=n.utils.calcApproxTextWidth(r)}b.push(i+28)});var w=0,E=0,S=[];while(E<h&&w<b.length)S[w]=b[w],E+=b[w++];w===0&&(w=1);while(E>h&&w>1){S=[],w--;for(var x=0;x<b.length;x++)b[x]>(S[x%w]||0)&&(S[x%w]=b[x]);E=S.reduce(function(e,t,n,r){return e+t})}var T=[];for(var N=0,C=0;N<w;N++)T[N]=C,C+=S[N];g.attr("transform",function(e,t){return"translate("+T[t%w]+","+(5+Math.floor(t/w)*20)+")"}),a?m.attr("transform","translate("+(r-t.right-E)+","+t.top+")"):m.attr("transform","translate(0,"+t.top+")"),i=t.top+t.bottom+Math.ceil(b.length/w)*20}else{var k=5,L=5,A=0,O;g.attr("transform",function(e,n){var i=d3.select(this).select("text").node().getComputedTextLength()+28;return O=L,r<t.left+t.right+O+i&&(L=O=5,k+=20),L+=i,L>A&&(A=L),"translate("+O+","+k+")"}),m.attr("transform","translate("+(r-t.right-A)+","+t.top+")"),i=t.top+t.bottom+k+15}}),e}var t={top:5,right:0,bottom:5,left:0},r=400,i=20,s=function(e){return e.key},o=n.utils.defaultColor(),u=!0,a=!0,f=!0,l=!1,c=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange");return e.dispatch=c,e.options=n.utils.optionsFunc.bind(e),e.margin=function(n){return arguments.length?(t.top=typeof n.top!="undefined"?n.top:t.top,t.right=typeof n.right!="undefined"?n.right:t.right,t.bottom=typeof n.bottom!="undefined"?n.bottom:t.bottom,t.left=typeof n.left!="undefined"?n.left:t.left,e):t},e.width=function(t){return arguments.length?(r=t,e):r},e.height=function(t){return arguments.length?(i=t,e):i},e.key=function(t){return arguments.length?(s=t,e):s},e.color=function(t){return arguments.length?(o=n.utils.getColor(t),e):o},e.align=function(t){return arguments.length?(u=t,e):u},e.rightAlign=function(t){return arguments.length?(a=t,e):a},e.updateState=function(t){return arguments.length?(f=t,e):f},e.radioButtonMode=function(t){return arguments.length?(l=t,e):l},e},n.models.line=function(){"use strict";function e(g){return g.each(function(e){var g=i-r.left-r.right,y=s-r.top-r.bottom,b=d3.select(this);h=t.xScale(),p=t.yScale(),v=v||h,m=m||p;var w=b.selectAll("g.nv-wrap.nv-line").data([e]),E=w.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),S=E.append("defs"),x=E.append("g"),T=w.select("g");x.append("g").attr("class","nv-groups"),x.append("g").attr("class","nv-scatterWrap"),w.attr("transform","translate("+r.left+","+r.top+")"),t.width(g).height(y);var N=w.select(".nv-scatterWrap");N.transition().call(t),S.append("clipPath").attr("id","nv-edge-clip-"+t.id()).append("rect"),w.select("#nv-edge-clip-"+t.id()+" rect").attr("width",g).attr("height",y),T.attr("clip-path",c?"url(#nv-edge-clip-"+t.id()+")":""),N.attr("clip-path",c?"url(#nv-edge-clip-"+t.id()+")":"");var C=w.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});C.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),C.exit().remove(),C.attr("class",function(e,t){return"nv-group nv-series-"+t}).classed("hover",function(e){return e.hover}).style("fill",function(e,t){return o(e,t)}).style("stroke",function(e,t){return o(e,t)}),C.transition().style("stroke-opacity",1).style("fill-opacity",.5);var k=C.selectAll("path.nv-area").data(function(e){return l(e)?[e]:[]});k.enter().append("path").attr("class","nv-area").attr("d",function(e){return d3.svg.area().interpolate(d).defined(f).x(function(e,t){return n.utils.NaNtoZero(v(u(e,t)))}).y0(function(e,t){return n.utils.NaNtoZero(m(a(e,t)))}).y1(function(e,t){return m(p.domain()[0]<=0?p.domain()[1]>=0?0:p.domain()[1]:p.domain()[0])}).apply(this,[e.values])}),C.exit().selectAll("path.nv-area").remove(),k.transition().attr("d",function(e){return d3.svg.area().interpolate(d).defined(f).x(function(e,t){return n.utils.NaNtoZero(h(u(e,t)))}).y0(function(e,t){return n.utils.NaNtoZero(p(a(e,t)))}).y1(function(e,t){return p(p.domain()[0]<=0?p.domain()[1]>=0?0:p.domain()[1]:p.domain()[0])}).apply(this,[e.values])});var L=C.selectAll("path.nv-line").data(function(e){return[e.values]});L.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(d).defined(f).x(function(e,t){return n.utils.NaNtoZero(v(u(e,t)))}).y(function(e,t){return n.utils.NaNtoZero(m(a(e,t)))})),L.transition().attr("d",d3.svg.line().interpolate(d).defined(f).x(function(e,t){return n.utils.NaNtoZero(h(u(e,t)))}).y(function(e,t){return n.utils.NaNtoZero(p(a(e,t)))})),v=h.copy(),m=p.copy()}),e}var t=n.models.scatter(),r={top:0,right:0,bottom:0,left:0},i=960,s=500,o=n.utils.defaultColor(),u=function(e){return e.x},a=function(e){return e.y},f=function(e,t){return!isNaN(a(e,t))&&a(e,t)!==null},l=function(e){return e.area},c=!1,h,p,d="linear";t.size(16).sizeDomain([16,256]);var v,m;return e.dispatch=t.dispatch,e.scatter=t,d3.rebind(e,t,"id","interactive","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","padData","highlightPoint","clearHighlights"),e.options=n.utils.optionsFunc.bind(e),e.margin=function(t){return arguments.length?(r.top=typeof t.top!="undefined"?t.top:r.top,r.right=typeof t.right!="undefined"?t.right:r.right,r.bottom=typeof t.bottom!="undefined"?t.bottom:r.bottom,r.left=typeof t.left!="undefined"?t.left:r.left,e):r},e.width=function(t){return arguments.length?(i=t,e):i},e.height=function(t){return arguments.length?(s=t,e):s},e.x=function(n){return arguments.length?(u=n,t.x(n),e):u},e.y=function(n){return arguments.length?(a=n,t.y(n),e):a},e.clipEdge=function(t){return arguments.length?(c=t,e):c},e.color=function(r){return arguments.length?(o=n.utils.getColor(r),t.color(o),e):o},e.interpolate=function(t){return arguments.length?(d=t,e):d},e.defined=function(t){return arguments.length?(f=t,e):f},e.isArea=function(t){return arguments.length?(l=d3.functor(t),e):l},e},n.models.lineChart=function(){"use strict";function e(g){return g.each(function(g){var C=d3.select(this),k=this,L=(f||parseInt(C.style("width"))||960)-u.left-u.right,A=(l||parseInt(C.style("height"))||400)-u.top-u.bottom;e.update=function(){C.transition().duration(T).call(e)},e.container=this,w.disabled=g.map(function(e){return!!e.disabled});if(!E){var O;E={};for(O in w)w[O]instanceof Array?E[O]=w[O].slice(0):E[O]=w[O]}if(!g||!g.length||!g.filter(function(e){return e.values.length}).length){var M=C.selectAll(".nv-noData").data([S]);return M.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),M.attr("x",u.left+L/2).attr("y",u.top+A/2).text(function(e){return e}),e}C.selectAll(".nv-noData").remove(),y=t.xScale(),b=t.yScale();var _=C.selectAll("g.nv-wrap.nv-lineChart").data([g]),D=_.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),P=_.select("g");D.append("rect").style("opacity",0),D.append("g").attr("class","nv-x nv-axis"),D.append("g").attr("class","nv-y nv-axis"),D.append("g").attr("class","nv-linesWrap"),D.append("g").attr("class","nv-legendWrap"),D.append("g").attr("class","nv-interactive"),P.select("rect").attr("width",L).attr("height",A>0?A:0),c&&(s.width(L),P.select(".nv-legendWrap").datum(g).call(s),u.top!=s.height()&&(u.top=s.height(),A=(l||parseInt(C.style("height"))||400)-u.top-u.bottom),_.select(".nv-legendWrap").attr("transform","translate(0,"+ -u.top+")")),_.attr("transform","translate("+u.left+","+u.top+")"),d&&P.select(".nv-y.nv-axis").attr("transform","translate("+L+",0)"),v&&(o.width(L).height(A).margin({left:u.left,top:u.top}).svgContainer(C).xScale(y),_.select(".nv-interactive").call(o)),t.width(L).height(A).color(g.map(function(e,t){return e.color||a(e,t)}).filter(function(e,t){return!g[t].disabled}));var H=P.select(".nv-linesWrap").datum(g.filter(function(e){return!e.disabled}));H.transition().call(t),h&&(r.scale(y).ticks(L/100).tickSize(-A,0),P.select(".nv-x.nv-axis").attr("transform","translate(0,"+b.range()[0]+")"),P.select(".nv-x.nv-axis").transition().call(r)),p&&(i.scale(b).ticks(A/36).tickSize(-L,0),P.select(".nv-y.nv-axis").transition().call(i)),s.dispatch.on("stateChange",function(t){w=t,x.stateChange(w),e.update()}),o.dispatch.on("elementMousemove",function(s){t.clearHighlights();var f,l,c,h=[];g.filter(function(e,t){return e.seriesIndex=t,!e.disabled}).forEach(function(r,i){l=n.interactiveBisect(r.values,s.pointXValue,e.x()),t.highlightPoint(i,l,!0);var o=r.values[l];if(typeof o=="undefined")return;typeof f=="undefined"&&(f=o),typeof c=="undefined"&&(c=e.xScale()(e.x()(o,l))),h.push({key:r.key,value:e.y()(o,l),color:a(r,r.seriesIndex)})});if(h.length>2){var p=e.yScale().invert(s.mouseY),d=Math.abs(e.yScale().domain()[0]-e.yScale().domain()[1]),v=.03*d,y=n.nearestValueIndex(h.map(function(e){return e.value}),p,v);y!==null&&(h[y].highlight=!0)}var b=r.tickFormat()(e.x()(f,l));o.tooltip.position({left:c+u.left,top:s.mouseY+u.top}).chartContainer(k.parentNode).enabled(m).valueFormatter(function(e,t){return i.tickFormat()(e)}).data({value:b,series:h})(),o.renderGuideLine(c)}),o.dispatch.on("elementMouseout",function(e){x.tooltipHide(),t.clearHighlights()}),x.on("tooltipShow",function(e){m&&N(e,k.parentNode)}),x.on("changeState",function(t){typeof t.disabled!="undefined"&&g.length===t.disabled.length&&(g.forEach(function(e,n){e.disabled=t.disabled[n]}),w.disabled=t.disabled),e.update()})}),e}var t=n.models.line(),r=n.models.axis(),i=n.models.axis(),s=n.models.legend(),o=n.interactiveGuideline(),u={top:30,right:20,bottom:50,left:60},a=n.utils.defaultColor(),f=null,l=null,c=!0,h=!0,p=!0,d=!1,v=!1,m=!0,g=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" at "+t+"</p>"},y,b,w={},E=null,S="No Data Available.",x=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),T=250;r.orient("bottom").tickPadding(7),i.orient(d?"right":"left");var N=function(s,o){var u=s.pos[0]+(o.offsetLeft||0),a=s.pos[1]+(o.offsetTop||0),f=r.tickFormat()(t.x()(s.point,s.pointIndex)),l=i.tickFormat()(t.y()(s.point,s.pointIndex)),c=g(s.series.key,f,l,s,e);n.tooltip.show([u,a],c,null,null,o)};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+u.left,e.pos[1]+u.top],x.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){x.tooltipHide(e)}),x.on("tooltipHide",function(){m&&n.tooltip.cleanup()}),e.dispatch=x,e.lines=t,e.legend=s,e.xAxis=r,e.yAxis=i,e.interactiveLayer=o,d3.rebind(e,t,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","useVoronoi","id","interpolate"),e.options=n.utils.optionsFunc.bind(e),e.margin=function(t){return arguments.length?(u.top=typeof t.top!="undefined"?t.top:u.top,u.right=typeof t.right!="undefined"?t.right:u.right,u.bottom=typeof t.bottom!="undefined"?t.bottom:u.bottom,u.left=typeof t.left!="undefined"?t.left:u.left,e):u},e.width=function(t){return arguments.length?(f=t,e):f},e.height=function(t){return arguments.length?(l=t,e):l},e.color=function(t){return arguments.length?(a=n.utils.getColor(t),s.color(a),e):a},e.showLegend=function(t){return arguments.length?(c=t,e):c},e.showXAxis=function(t){return arguments.length?(h=t,e):h},e.showYAxis=function(t){return arguments.length?(p=t,e):p},e.rightAlignYAxis=function(t){return arguments.length?(d=t,i.orient(t?"right":"left"),e):d},e.useInteractiveGuideline=function(t){return arguments.length?(v=t,t===!0&&(e.interactive(!1),e.useVoronoi(!1)),e):v},e.tooltips=function(t){return arguments.length?(m=t,e):m},e.tooltipContent=function(t){return arguments.length?(g=t,e):g},e.state=function(t){return arguments.length?(w=t,e):w},e.defaultState=function(t){return arguments.length?(E=t,e):E},e.noData=function(t){return arguments.length?(S=t,e):S},e.transitionDuration=function(t){return arguments.length?(T=t,e):T},e},n.models.linePlusBarChart=function(){"use strict";function e(n){return n.each(function(n){var c=d3.select(this),h=this,m=(f||parseInt(c.style("width"))||960)-a.left-a.right,N=(l||parseInt(c.style("height"))||400)-a.top-a.bottom;e.update=function(){c.transition().call(e)},w.disabled=n.map(function(e){return!!e.disabled});if(!E){var C;E={};for(C in w)w[C]instanceof Array?E[C]=w[C].slice(0):E[C]=w[C]}if(!n||!n.length||!n.filter(function(e){return e.values.length}).length){var k=c.selectAll(".nv-noData").data([S]);return k.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),k.attr("x",a.left+m/2).attr("y",a.top+N/2).text(function(e){return e}),e}c.selectAll(".nv-noData").remove();var L=n.filter(function(e){return!e.disabled&&e.bar}),A=n.filter(function(e){return!e.bar});g=A.filter(function(e){return!e.disabled}).length&&A.filter(function(e){return!e.disabled})[0].values.length?t.xScale():r.xScale(),y=r.yScale(),b=t.yScale();var O=d3.select(this).selectAll("g.nv-wrap.nv-linePlusBar").data([n]),M=O.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),_=O.select("g");M.append("g").attr("class","nv-x nv-axis"),M.append("g").attr("class","nv-y1 nv-axis"),M.append("g").attr("class","nv-y2 nv-axis"),M.append("g").attr("class","nv-barsWrap"),M.append("g").attr("class","nv-linesWrap"),M.append("g").attr("class","nv-legendWrap"),d&&(u.width(m/2),_.select(".nv-legendWrap").datum(n.map(function(e){return e.originalKey=e.originalKey===undefined?e.key:e.originalKey,e.key=e.originalKey+(e.bar?" (left axis)":" (right axis)"),e})).call(u),a.top!=u.height()&&(a.top=u.height(),N=(l||parseInt(c.style("height"))||400)-a.top-a.bottom),_.select(".nv-legendWrap").attr("transform","translate("+m/2+","+ -a.top+")")),O.attr("transform","translate("+a.left+","+a.top+")"),t.width(m).height(N).color(n.map(function(e,t){return e.color||p(e,t)}).filter(function(e,t){return!n[t].disabled&&!n[t].bar})),r.width(m).height(N).color(n.map(function(e,t){return e.color||p(e,t)}).filter(function(e,t){return!n[t].disabled&&n[t].bar}));var D=_.select(".nv-barsWrap").datum(L.length?L:[{values:[]}]),P=_.select(".nv-linesWrap").datum(A[0]&&!A[0].disabled?A:[{values:[]}]);d3.transition(D).call(r),d3.transition(P).call(t),i.scale(g).ticks(m/100).tickSize(-N,0),_.select(".nv-x.nv-axis").attr("transform","translate(0,"+y.range()[0]+")"),d3.transition(_.select(".nv-x.nv-axis")).call(i),s.scale(y).ticks(N/36).tickSize(-m,0),d3.transition(_.select(".nv-y1.nv-axis")).style("opacity",L.length?1:0).call(s),o.scale(b).ticks(N/36).tickSize(L.length?0:-m,0),_.select(".nv-y2.nv-axis").style("opacity",A.length?1:0).attr("transform","translate("+m+",0)"),d3.transition(_.select(".nv-y2.nv-axis")).call(o),u.dispatch.on("stateChange",function(t){w=t,x.stateChange(w),e.update()}),x.on("tooltipShow",function(e){v&&T(e,h.parentNode)}),x.on("changeState",function(t){typeof t.disabled!="undefined"&&(n.forEach(function(e,n){e.disabled=t.disabled[n]}),w.disabled=t.disabled),e.update()})}),e}var t=n.models.line(),r=n.models.historicalBar(),i=n.models.axis(),s=n.models.axis(),o=n.models.axis(),u=n.models.legend(),a={top:30,right:60,bottom:50,left:60},f=null,l=null,c=function(e){return e.x},h=function(e){return e.y},p=n.utils.defaultColor(),d=!0,v=!0,m=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" at "+t+"</p>"},g,y,b,w={},E=null,S="No Data Available.",x=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState");r.padData(!0),t.clipEdge(!1).padData(!0),i.orient("bottom").tickPadding(7).highlightZero(!1),s.orient("left"),o.orient("right");var T=function(r,u){var a=r.pos[0]+(u.offsetLeft||0),f=r.pos[1]+(u.offsetTop||0),l=i.tickFormat()(t.x()(r.point,r.pointIndex)),c=(r.series.bar?s:o).tickFormat()(t.y()(r.point,r.pointIndex)),h=m(r.series.key,l,c,r,e);n.tooltip.show([a,f],h,r.value<0?"n":"s",null,u)};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+a.left,e.pos[1]+a.top],x.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){x.tooltipHide(e)}),r.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+a.left,e.pos[1]+a.top],x.tooltipShow(e)}),r.dispatch.on("elementMouseout.tooltip",function(e){x.tooltipHide(e)}),x.on("tooltipHide",function(){v&&n.tooltip.cleanup()}),e.dispatch=x,e.legend=u,e.lines=t,e.bars=r,e.xAxis=i,e.y1Axis=s,e.y2Axis=o,d3.rebind(e,t,"defined","size","clipVoronoi","interpolate"),e.options=n.utils.optionsFunc.bind(e),e.x=function(n){return arguments.length?(c=n,t.x(n),r.x(n),e):c},e.y=function(n){return arguments.length?(h=n,t.y(n),r.y(n),e):h},e.margin=function(t){return arguments.length?(a.top=typeof t.top!="undefined"?t.top:a.top,a.right=typeof t.right!="undefined"?t.right:a.right,a.bottom=typeof t.bottom!="undefined"?t.bottom:a.bottom,a.left=typeof t.left!="undefined"?t.left:a.left,e):a},e.width=function(t){return arguments.length?(f=t,e):f},e.height=function(t){return arguments.length?(l=t,e):l},e.color=function(t){return arguments.length?(p=n.utils.getColor(t),u.color(p),e):p},e.showLegend=function(t){return arguments.length?(d=t,e):d},e.tooltips=function(t){return arguments.length?(v=t,e):v},e.tooltipContent=function(t){return arguments.length?(m=t,e):m},e.state=function(t){return arguments.length?(w=t,e):w},e.defaultState=function(t){return arguments.length?(E=t,e):E},e.noData=function(t){return arguments.length?(S=t,e):S},e},n.models.lineWithFocusChart=function(){"use strict";function e(n){return n.each(function(n){function x(e){var t=+(e=="e"),n=t?1:-1,r=P/3;return"M"+.5*n+","+r+"A6,6 0 0 "+t+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+t+" "+.5*n+","+2*r+"Z"+"M"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)}function L(){f.empty()||f.extent(E),U.data([f.empty()?y.domain():E]).each(function(e,t){var n=y(e[0])-m.range()[0],r=m.range()[1]-y(e[1]);d3.select(this).select(".left").attr("width",n<0?0:n),d3.select(this).select(".right").attr("x",y(e[1])).attr("width",r<0?0:r)})}function A(){E=f.empty()?null:f.extent();var e=f.empty()?y.domain():f.extent();if(Math.abs(e[0]-e[1])<=1)return;N.brush({extent:e,brush:f}),L();var r=F.select(".nv-focus .nv-linesWrap").datum(n.filter(function(e){return!e.disabled}).map(function(n,r){return{key:n.key,values:n.values.filter(function(n,r){return t.x()(n,r)>=e[0]&&t.x()(n,r)<=e[1]})}}));r.transition().duration(C).call(t),F.select(".nv-focus .nv-x.nv-axis").transition().duration(C).call(i),F.select(".nv-focus .nv-y.nv-axis").transition().duration(C).call(s)}var O=d3.select(this),M=this,_=(p||parseInt(O.style("width"))||960)-l.left-l.right,D=(d||parseInt(O.style("height"))||400)-l.top-l.bottom-v,P=v-c.top-c.bottom;e.update=function(){O.transition().duration(C).call(e)},e.container=this;if(!n||!n.length||!n.filter(function(e){return e.values.length}).length){var H=O.selectAll(".nv-noData").data([T]);return H.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),H.attr("x",l.left+_/2).attr("y",l.top+D/2).text(function(e){return e}),e}O.selectAll(".nv-noData").remove(),m=t.xScale(),g=t.yScale(),y=r.xScale(),b=r.yScale();var B=O.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([n]),j=B.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),F=B.select("g");j.append("g").attr("class","nv-legendWrap");var I=j.append("g").attr("class","nv-focus");I.append("g").attr("class","nv-x nv-axis"),I.append("g").attr("class","nv-y nv-axis"),I.append("g").attr("class","nv-linesWrap");var q=j.append("g").attr("class","nv-context");q.append("g").attr("class","nv-x nv-axis"),q.append("g").attr("class","nv-y nv-axis"),q.append("g").attr("class","nv-linesWrap"),q.append("g").attr("class","nv-brushBackground"),q.append("g").attr("class","nv-x nv-brush"),w&&(a.width(_),F.select(".nv-legendWrap").datum(n).call(a),l.top!=a.height()&&(l.top=a.height(),D=(d||parseInt(O.style("height"))||400)-l.top-l.bottom-v),F.select(".nv-legendWrap").attr("transform","translate(0,"+ -l.top+")")),B.attr("transform","translate("+l.left+","+l.top+")"),t.width(_).height(D).color(n.map(function(e,t){return e.color||h(e,t)}).filter(function(e,t){return!n[t].disabled})),r.defined(t.defined()).width(_).height(P).color(n.map(function(e,t){return e.color||h(e,t)}).filter(function(e,t){return!n[t].disabled})),F.select(".nv-context").attr("transform","translate(0,"+(D+l.bottom+c.top)+")");var R=F.select(".nv-context .nv-linesWrap").datum(n.filter(function(e){return!e.disabled}));d3.transition(R).call(r),i.scale(m).ticks(_/100).tickSize(-D,0),s.scale(g).ticks(D/36).tickSize(-_,0),F.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+D+")"),f.x(y).on("brush",function(){var t=e.transitionDuration();e.transitionDuration(0),A(),e.transitionDuration(t)}),E&&f.extent(E);var U=F.select(".nv-brushBackground").selectAll("g").data([E||f.extent()]),z=U.enter().append("g");z.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",P),z.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",P);var W=F.select(".nv-x.nv-brush").call(f);W.selectAll("rect").attr("height",P),W.selectAll(".resize").append("path").attr("d",x),A(),o.scale(y).ticks(_/100).tickSize(-P,0),F.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+b.range()[0]+")"),d3.transition(F.select(".nv-context .nv-x.nv-axis")).call(o),u.scale(b).ticks(P/36).tickSize(-_,0),d3.transition(F.select(".nv-context .nv-y.nv-axis")).call(u),F.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+b.range()[0]+")"),a.dispatch.on("stateChange",function(t){e.update()}),N.on("tooltipShow",function(e){S&&k(e,M.parentNode)})}),e}var t=n.models.line(),r=n.models.line(),i=n.models.axis(),s=n.models.axis(),o=n.models.axis(),u=n.models.axis(),a=n.models.legend(),f=d3.svg.brush(),l={top:30,right:30,bottom:30,left:60},c={top:0,right:30,bottom:20,left:60},h=n.utils.defaultColor(),p=null,d=null,v=100,m,g,y,b,w=!0,E=null,S=!0,x=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" at "+t+"</p>"},T="No Data Available.",N=d3.dispatch("tooltipShow","tooltipHide","brush"),C=250;t.clipEdge(!0),r.interactive(!1),i.orient("bottom").tickPadding(5),s.orient("left"),o.orient("bottom").tickPadding(5),u.orient("left");var k=function(r,o){var u=r.pos[0]+(o.offsetLeft||0),a=r.pos[1]+(o.offsetTop||0),f=i.tickFormat()(t.x()(r.point,r.pointIndex)),l=s.tickFormat()(t.y()(r.point,r.pointIndex)),c=x(r.series.key,f,l,r,e);n.tooltip.show([u,a],c,null,null,o)};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+l.left,e.pos[1]+l.top],N.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){N.tooltipHide(e)}),N.on("tooltipHide",function(){S&&n.tooltip.cleanup()}),e.dispatch=N,e.legend=a,e.lines=t,e.lines2=r,e.xAxis=i,e.yAxis=s,e.x2Axis=o,e.y2Axis=u,d3.rebind(e,t,"defined","isArea","size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id"),e.options=n.utils.optionsFunc.bind(e),e.x=function(n){return arguments.length?(t.x(n),r.x(n),e):t.x},e.y=function(n){return arguments.length?(t.y(n),r.y(n),e):t.y},e.margin=function(t){return arguments.length?(l.top=typeof t.top!="undefined"?t.top:l.top,l.right=typeof t.right!="undefined"?t.right:l.right,l.bottom=typeof t.bottom!="undefined"?t.bottom:l.bottom,l.left=typeof t.left!="undefined"?t.left:l.left,e):l},e.margin2=function(t){return arguments.length?(c=t,e):c},e.width=function(t){return arguments.length?(p=t,e):p},e.height=function(t){return arguments.length?(d=t,e):d},e.height2=function(t){return arguments.length?(v=t,e):v},e.color=function(t){return arguments.length?(h=n.utils.getColor(t),a.color(h),e):h},e.showLegend=function(t){return arguments.length?(w=t,e):w},e.tooltips=function(t){return arguments.length?(S=t,e):S},e.tooltipContent=function(t){return arguments.length?(x=t,e):x},e.interpolate=function(n){return arguments.length?(t.interpolate(n),r.interpolate(n),e):t.interpolate()},e.noData=function(t){return arguments.length?(T=t,e):T},e.xTickFormat=function(t){return arguments.length?(i.tickFormat(t),o.tickFormat(t),e):i.tickFormat()},e.yTickFormat=function(t){return arguments.length?(s.tickFormat(t),u.tickFormat(t),e):s.tickFormat()},e.brushExtent=function(t){return arguments.length?(E=t,e):E},e.transitionDuration=function(t){return arguments.length?(C=t,e):C},e},n.models.linePlusBarWithFocusChart=function(){"use strict";function e(n){return n.each(function(n){function C(e){var t=+(e=="e"),n=t?1:-1,r=z/3;return"M"+.5*n+","+r+"A6,6 0 0 "+t+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+t+" "+.5*n+","+2*r+"Z"+"M"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)}function j(){p.empty()||p.extent(T),nt.data([p.empty()?L.domain():T]).each(function(e,t){var n=L(e[0])-L.range()[0],r=L.range()[1]-L(e[1]);d3.select(this).select(".left").attr("width",n<0?0:n),d3.select(this).select(".right").attr("x",L(e[1])).attr("width",r<0?0:r)})}function F(){T=p.empty()?null:p.extent(),x=p.empty()?L.domain():p.extent(),P.brush({extent:x,brush:p}),j(),i.width(R).height(U).color(n.map(function(e,t){return e.color||E(e,t)}).filter(function(e,t){return!n[t].disabled&&n[t].bar})),t.width(R).height(U).color(n.map(function(e,t){return e.color||E(e,t)}).filter(function(e,t){return!n[t].disabled&&!n[t].bar}));var e=G.select(".nv-focus .nv-barsWrap").datum(X.length?X.map(function(e,t){return{key:e.key,values:e.values.filter(function(e,t){return i.x()(e,t)>=x[0]&&i.x()(e,t)<=x[1]})}}):[{values:[]}]),r=G.select(".nv-focus .nv-linesWrap").datum(V[0].disabled?[{values:[]}]:V.map(function(e,n){return{key:e.key,values:e.values.filter(function(e,n){return t.x()(e,n)>=x[0]&&t.x()(e,n)<=x[1]})}}));X.length?k=i.xScale():k=t.xScale(),o.scale(k).ticks(R/100).tickSize(-U,0),o.domain([Math.ceil(x[0]),Math.floor(x[1])]),G.select(".nv-x.nv-axis").transition().duration(H).call(o),e.transition().duration(H).call(i),r.transition().duration(H).call(t),G.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+A.range()[0]+")"),a.scale(A).ticks(U/36).tickSize(-R,0),G.select(".nv-focus .nv-y1.nv-axis").style("opacity",X.length?1:0),f.scale(O).ticks(U/36).tickSize(X.length?0:-R,0),G.select(".nv-focus .nv-y2.nv-axis").style("opacity",V.length?1:0).attr("transform","translate("+k.range()[1]+",0)"),G.select(".nv-focus .nv-y1.nv-axis").transition().duration(H).call(a),G.select(".nv-focus .nv-y2.nv-axis").transition().duration(H).call(f)}var I=d3.select(this),q=this,R=(m||parseInt(I.style("width"))||960)-d.left-d.right,U=(g||parseInt(I.style("height"))||400)-d.top-d.bottom-y,z=y-v.top-v.bottom;e.update=function(){I.transition().duration(H).call(e)},e.container=this;if(!n||!n.length||!n.filter(function(e){return e.values.length}).length){var W=I.selectAll(".nv-noData").data([D]);return W.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),W.attr("x",d.left+R/2).attr("y",d.top+U/2).text(function(e){return e}),e}I.selectAll(".nv-noData").remove();var X=n.filter(function(e){return!e.disabled&&e.bar}),V=n.filter(function(e){return!e.bar});k=i.xScale(),L=u.scale(),A=i.yScale(),O=t.yScale(),M=s.yScale(),_=r.yScale();var $=n.filter(function(e){return!e.disabled&&e.bar}).map(function(e){return e.values.map(function(e,t){return{x:b(e,t),y:w(e,t)}})}),J=n.filter(function(e){return!e.disabled&&!e.bar}).map(function(e){return e.values.map(function(e,t){return{x:b(e,t),y:w(e,t)}})});k.range([0,R]),L.domain(d3.extent(d3.merge($.concat(J)),function(e){return e.x})).range([0,R]);var K=I.selectAll("g.nv-wrap.nv-linePlusBar").data([n]),Q=K.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),G=K.select("g");Q.append("g").attr("class","nv-legendWrap");var Y=Q.append("g").attr("class","nv-focus");Y.append("g").attr("class","nv-x nv-axis"),Y.append("g").attr("class","nv-y1 nv-axis"),Y.append("g").attr("class","nv-y2 nv-axis"),Y.append("g").attr("class","nv-barsWrap"),Y.append("g").attr("class","nv-linesWrap");var Z=Q.append("g").attr("class","nv-context");Z.append("g").attr("class","nv-x nv-axis"),Z.append("g").attr("class","nv-y1 nv-axis"),Z.append("g").attr("class","nv-y2 nv-axis"),Z.append("g").attr("class","nv-barsWrap"),Z.append("g").attr("class","nv-linesWrap"),Z.append("g").attr("class","nv-brushBackground"),Z.append("g").attr("class","nv-x nv-brush"),S&&(h.width(R/2),G.select(".nv-legendWrap").datum(n.map(function(e){return e.originalKey=e.originalKey===undefined?e.key:e.originalKey,e.key=e.originalKey+(e.bar?" (left axis)":" (right axis)"),e})).call(h),d.top!=h.height()&&(d.top=h.height(),U=(g||parseInt(I.style("height"))||400)-d.top-d.bottom-y),G.select(".nv-legendWrap").attr("transform","translate("+R/2+","+ -d.top+")")),K.attr("transform","translate("+d.left+","+d.top+")"),s.width(R).height(z).color(n.map(function(e,t){return e.color||E(e,t)}).filter(function(e,t){return!n[t].disabled&&n[t].bar})),r.width(R).height(z).color(n.map(function(e,t){return e.color||E(e,t)}).filter(function(e,t){return!n[t].disabled&&!n[t].bar}));var et=G.select(".nv-context .nv-barsWrap").datum(X.length?X:[{values:[]}]),tt=G.select(".nv-context .nv-linesWrap").datum(V[0].disabled?[{values:[]}]:V);G.select(".nv-context").attr("transform","translate(0,"+(U+d.bottom+v.top)+")"),et.transition().call(s),tt.transition().call(r),p.x(L).on("brush",F),T&&p.extent(T);var nt=G.select(".nv-brushBackground").selectAll("g").data([T||p.extent()]),rt=nt.enter().append("g");rt.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",z),rt.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",z);var it=G.select(".nv-x.nv-brush").call(p);it.selectAll("rect").attr("height",z),it.selectAll(".resize").append("path").attr("d",C),u.ticks(R/100).tickSize(-z,0),G.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+M.range()[0]+")"),G.select(".nv-context .nv-x.nv-axis").transition().call(u),l.scale(M).ticks(z/36).tickSize(-R,0),G.select(".nv-context .nv-y1.nv-axis").style("opacity",X.length?1:0).attr("transform","translate(0,"+L.range()[0]+")"),G.select(".nv-context .nv-y1.nv-axis").transition().call(l),c.scale(_).ticks(z/36).tickSize(X.length?0:-R,0),G.select(".nv-context .nv-y2.nv-axis").style("opacity",V.length?1:0).attr("transform","translate("+L.range()[1]+",0)"),G.select(".nv-context .nv-y2.nv-axis").transition().call(c),h.dispatch.on("stateChange",function(t){e.update()}),P.on("tooltipShow",function(e){N&&B(e,q.parentNode)}),F()}),e}var t=n.models.line(),r=n.models.line(),i=n.models.historicalBar(),s=n.models.historicalBar(),o=n.models.axis(),u=n.models.axis(),a=n.models.axis(),f=n.models.axis(),l=n.models.axis(),c=n.models.axis(),h=n.models.legend(),p=d3.svg.brush(),d={top:30,right:30,bottom:30,left:60},v={top:0,right:30,bottom:20,left:60},m=null,g=null,y=100,b=function(e){return e.x},w=function(e){return e.y},E=n.utils.defaultColor(),S=!0,x,T=null,N=!0,C=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" at "+t+"</p>"},k,L,A,O,M,_,D="No Data Available.",P=d3.dispatch("tooltipShow","tooltipHide","brush"),H=0;t.clipEdge(!0),r.interactive(!1),o.orient("bottom").tickPadding(5),a.orient("left"),f.orient("right"),u.orient("bottom").tickPadding(5),l.orient("left"),c.orient("right");var B=function(r,i){x&&(r.pointIndex+=Math.ceil(x[0]));var s=r.pos[0]+(i.offsetLeft||0),u=r.pos[1]+(i.offsetTop||0),l=o.tickFormat()(t.x()(r.point,r.pointIndex)),c=(r.series.bar?a:f).tickFormat()(t.y()(r.point,r.pointIndex)),h=C(r.series.key,l,c,r,e);n.tooltip.show([s,u],h,r.value<0?"n":"s",null,i)};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+d.left,e.pos[1]+d.top],P.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){P.tooltipHide(e)}),i.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+d.left,e.pos[1]+d.top],P.tooltipShow(e)}),i.dispatch.on("elementMouseout.tooltip",function(e){P.tooltipHide(e)}),P.on("tooltipHide",function(){N&&n.tooltip.cleanup()}),e.dispatch=P,e.legend=h,e.lines=t,e.lines2=r,e.bars=i,e.bars2=s,e.xAxis=o,e.x2Axis=u,e.y1Axis=a,e.y2Axis=f,e.y3Axis=l,e.y4Axis=c,d3.rebind(e,t,"defined","size","clipVoronoi","interpolate"),e.options=n.utils.optionsFunc.bind(e),e.x=function(n){return arguments.length?(b=n,t.x(n),i.x(n),e):b},e.y=function(n){return arguments.length?(w=n,t.y(n),i.y(n),e):w},e.margin=function(t){return arguments.length?(d.top=typeof t.top!="undefined"?t.top:d.top,d.right=typeof t.right!="undefined"?t.right:d.right,d.bottom=typeof t.bottom!="undefined"?t.bottom:d.bottom,d.left=typeof t.left!="undefined"?t.left:d.left,e):d},e.width=function(t){return arguments.length?(m=t,e):m},e.height=function(t){return arguments.length?(g=t,e):g},e.color=function(t){return arguments.length?(E=n.utils.getColor(t),h.color(E),e):E},e.showLegend=function(t){return arguments.length?(S=t,e):S},e.tooltips=function(t){return arguments.length?(N=t,e):N},e.tooltipContent=function(t){return arguments.length?(C=t,e):C},e.noData=function(t){return arguments.length?(D=t,e):D},e.brushExtent=function(t){return arguments.length?(T=t,e):T},e},n.models.multiBar=function(){"use strict";function e(n){return n.each(function(e){var n=r-t.left-t.right,k=i-t.top-t.bottom,L=d3.select(this);v&&e.length&&(v=[{values:e[0].values.map(function(e){return{x:e.x,y:0,series:e.series,size:.01}})}]),h&&(e=d3.layout.stack().offset(p).values(function(e){return e.values}).y(f)(!e.length&&v?v:e)),e.forEach(function(e,t){e.values.forEach(function(e){e.series=t})}),h&&e[0].values.map(function(t,n){var r=0,i=0;e.map(function(e){var t=e.values[n];t.size=Math.abs(t.y),t.y<0?(t.y1=i,i-=t.size):(t.y1=t.size+r,r+=t.size)})});var A=b&&w?[]:e.map(function(e){return e.values.map(function(e,t){return{x:a(e,t),y:f(e,t),y0:e.y0,y1:e.y1}})});s.domain(b||d3.merge(A).map(function(e){return e.x})).rangeBands(E||[0,n],x),o.domain(w||d3.extent(d3.merge(A).map(function(e){return h?e.y>0?e.y1:e.y1+e.y:e.y}).concat(l))).range(S||[k,0]),s.domain()[0]===s.domain()[1]&&(s.domain()[0]?s.domain([s.domain()[0]-s.domain()[0]*.01,s.domain()[1]+s.domain()[1]*.01]):s.domain([-1,1])),o.domain()[0]===o.domain()[1]&&(o.domain()[0]?o.domain([o.domain()[0]+o.domain()[0]*.01,o.domain()[1]-o.domain()[1]*.01]):o.domain([-1,1])),N=N||s,C=C||o;var O=L.selectAll("g.nv-wrap.nv-multibar").data([e]),M=O.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),_=M.append("defs"),D=M.append("g"),P=O.select("g");D.append("g").attr("class","nv-groups"),O.attr("transform","translate("+t.left+","+t.top+")"),_.append("clipPath").attr("id","nv-edge-clip-"+u).append("rect"),O.select("#nv-edge-clip-"+u+" rect").attr("width",n).attr("height",k),P.attr("clip-path",c?"url(#nv-edge-clip-"+u+")":"");var H=O.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e,t){return t});H.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),H.exit().transition().selectAll("rect.nv-bar").delay(function(t,n){return n*y/e[0].values.length}).attr("y",function(e){return h?C(e.y0):C(0)}).attr("height",0).remove(),H.attr("class",function(e,t){return"nv-group nv-series-"+t}).classed("hover",function(e){return e.hover}).style("fill",function(e,t){return d(e,t)}).style("stroke",function(e,t){return d(e,t)}),H.transition().style("stroke-opacity",1).style("fill-opacity",.75);var B=H.selectAll("rect.nv-bar").data(function(t){return v&&!e.length?v.values:t.values});B.exit().remove();var j=B.enter().append("rect").attr("class",function(e,t){return f(e,t)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(t,n,r){return h?0:r*s.rangeBand()/e.length}).attr("y",function(e){return C(h?e.y0:0)}).attr("height",0).attr("width",s.rangeBand()/(h?1:e.length)).attr("transform",function(e,t){return"translate("+s(a(e,t))+",0)"});B.style("fill",function(e,t,n){return d(e,n,t)}).style("stroke",function(e,t,n){return d(e,n,t)}).on("mouseover",function(t,n){d3.select(this).classed("hover",!0),T.elementMouseover({value:f(t,n),point:t,series:e[t.series],pos:[s(a(t,n))+s.rangeBand()*(h?e.length/2:t.series+.5)/e.length,o(f(t,n)+(h?t.y0:0))],pointIndex:n,seriesIndex:t.series,e:d3.event})}).on("mouseout",function(t,n){d3.select(this).classed("hover",!1),T.elementMouseout({value:f(t,n),point:t,series:e[t.series],pointIndex:n,seriesIndex:t.series,e:d3.event})}).on("click",function(t,n){T.elementClick({value:f(t,n),point:t,series:e[t.series],pos:[s(a(t,n))+s.rangeBand()*(h?e.length/2:t.series+.5)/e.length,o(f(t,n)+(h?t.y0:0))],pointIndex:n,seriesIndex:t.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(t,n){T.elementDblClick({value:f(t,n),point:t,series:e[t.series],pos:[s(a(t,n))+s.rangeBand()*(h?e.length/2:t.series+.5)/e.length,o(f(t,n)+(h?t.y0:0))],pointIndex:n,seriesIndex:t.series,e:d3.event}),d3.event.stopPropagation()}),B.attr("class",function(e,t){return f(e,t)<0?"nv-bar negative":"nv-bar positive"}).transition().attr("transform",function(e,t){return"translate("+s(a(e,t))+",0)"}),m&&(g||(g=e.map(function(){return!0})),B.style("fill",function(e,t,n){return d3.rgb(m(e,t)).darker(g.map(function(e,t){return t}).filter(function(e,t){return!g[t]})[n]).toString()}).style("stroke",function(e,t,n){return d3.rgb(m(e,t)).darker(g.map(function(e,t){return t}).filter(function(e,t){return!g[t]})[n]).toString()})),h?B.transition().delay(function(t,n){return n*y/e[0].values.length}).attr("y",function(e,t){return o(h?e.y1:0)}).attr("height",function(e,t){return Math.max(Math.abs(o(e.y+(h?e.y0:0))-o(h?e.y0:0)),1)}).attr("x",function(t,n){return h?0:t.series*s.rangeBand()/e.length}).attr("width",s.rangeBand()/(h?1:e.length)):B.transition().delay(function(t,n){return n*y/e[0].values.length}).attr("x",function(t,n){return t.series*s.rangeBand()/e.length}).attr("width",s.rangeBand()/e.length).attr("y",function(e,t){return f(e,t)<0?o(0):o(0)-o(f(e,t))<1?o(0)-1:o(f(e,t))||0}).attr("height",function(e,t){return Math.max(Math.abs(o(f(e,t))-o(0)),1)||0}),N=s.copy(),C=o.copy()}),e}var t={top:0,right:0,bottom:0,left:0},r=960,i=500,s=d3.scale.ordinal(),o=d3.scale.linear(),u=Math.floor(Math.random()*1e4),a=function(e){return e.x},f=function(e){return e.y},l=[0],c=!0,h=!1,p="zero",d=n.utils.defaultColor(),v=!1,m=null,g,y=1200,b,w,E,S,x=.1,T=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),N,C;return e.dispatch=T,e.options=n.utils.optionsFunc.bind(e),e.x=function(t){return arguments.length?(a=t,e):a},e.y=function(t){return arguments.length?(f=t,e):f},e.margin=function(n){return arguments.length?(t.top=typeof n.top!="undefined"?n.top:t.top,t.right=typeof n.right!="undefined"?n.right:t.right,t.bottom=typeof n.bottom!="undefined"?n.bottom:t.bottom,t.left=typeof n.left!="undefined"?n.left:t.left,e):t},e.width=function(t){return arguments.length?(r=t,e):r},e.height=function(t){return arguments.length?(i=t,e):i},e.xScale=function(t){return arguments.length?(s=t,e):s},e.yScale=function(t){return arguments.length?(o=t,e):o},e.xDomain=function(t){return arguments.length?(b=t,e):b},e.yDomain=function(t){return arguments.length?(w=t,e):w},e.xRange=function(t){return arguments.length?(E=t,e):E},e.yRange=function(t){return arguments.length?(S=t,e):S},e.forceY=function(t){return arguments.length?(l=t,e):l},e.stacked=function(t){return arguments.length?(h=t,e):h},e.stackOffset=function(t){return arguments.length?(p=t,e):p},e.clipEdge=function(t){return arguments.length?(c=t,e):c},e.color=function(t){return arguments.length?(d=n.utils.getColor(t),e):d},e.barColor=function(t){return arguments.length?(m=n.utils.getColor(t),e):m},e.disabled=function(t){return arguments.length?(g=t,e):g},e.id=function(t){return arguments.length?(u=t,e):u},e.hideable=function(t){return arguments.length?(v=t,e):v},e.delay=function(t){return arguments.length?(y=t,e):y},e.groupSpacing=function(t){return arguments.length?(x=t,e):x},e},n.models.multiBarChart=function(){"use strict";function e(n){return n.each(function(n){var w=d3.select(this),O=this,M=(a||parseInt(w.style("width"))||960)-u.left-u.right,_=(f||parseInt(w.style("height"))||400)-u.top-u.bottom;e.update=function(){w.transition().duration(L).call(e)},e.container=this,x.disabled=n.map(function(e){return!!e.disabled});if(!T){var D;T={};for(D in x)x[D]instanceof Array?T[D]=x[D].slice(0):T[D]=x[D]}if(!n||!n.length||!n.filter(function(e){return e.values.length}).length){var P=w.selectAll(".nv-noData").data([N]);return P.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),P.attr("x",u.left+M/2).attr("y",u.top+_/2).text(function(e){return e}),e}w.selectAll(".nv-noData").remove(),E=t.xScale(),S=t.yScale();var H=w.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([n]),B=H.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),j=H.select("g");B.append("g").attr("class","nv-x nv-axis"),B.append("g").attr("class","nv-y nv-axis"),B.append("g").attr("class","nv-barsWrap"),B.append("g").attr("class","nv-legendWrap"),B.append("g").attr("class","nv-controlsWrap"),h&&(s.width(M-k()),t.barColor()&&n.forEach(function(e,t){e.color=d3.rgb("#ccc").darker(t*1.5).toString()}),j.select(".nv-legendWrap").datum(n).call(s),u.top!=s.height()&&(u.top=s.height(),_=(f||parseInt(w.style("height"))||400)-u.top-u.bottom),j.select(".nv-legendWrap").attr("transform","translate("+k()+","+ -u.top+")"));if(c){var F=[{key:"Grouped",disabled:t.stacked()},{key:"Stacked",disabled:!t.stacked()}];o.width(k()).color(["#444","#444","#444"]),j.select(".nv-controlsWrap").datum(F).attr("transform","translate(0,"+ -u.top+")").call(o)}H.attr("transform","translate("+u.left+","+u.top+")"),v&&j.select(".nv-y.nv-axis").attr("transform","translate("+M+",0)"),t.disabled(n.map(function(e){return e.disabled})).width(M).height(_).color(n.map(function(e,t){return e.color||l(e,t)}).filter(function(e,t){return!n[t].disabled}));var I=j.select(".nv-barsWrap").datum(n.filter(function(e){return!e.disabled}));I.transition().call(t);if(p){r.scale(E).ticks(M/100).tickSize(-_,0),j.select(".nv-x.nv-axis").attr("transform","translate(0,"+S.range()[0]+")"),j.select(".nv-x.nv-axis").transition().call(r);var q=j.select(".nv-x.nv-axis > g").selectAll("g");q.selectAll("line, text").style("opacity",1);if(g){var R=function(e,t){return"translate("+e+","+t+")"},U=5,z=17;q.selectAll("text").attr("transform",function(e,t,n){return R(0,n%2==0?U:z)});var W=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;j.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(e,t){return R(0,t===0||W%2!==0?z:U)})}m&&q.filter(function(e,t){return t%Math.ceil(n[0].values.length/(M/100))!==0}).selectAll("text, line").style("opacity",0),y&&q.selectAll(".tick text").attr("transform","rotate("+y+" 0,0)").style("text-anchor",y>0?"start":"end"),j.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}d&&(i.scale(S).ticks(_/36).tickSize(-M,0),j.select(".nv-y.nv-axis").transition().call(i)),s.dispatch.on("stateChange",function(t){x=t,C.stateChange(x),e.update()}),o.dispatch.on("legendClick",function(n,r){if(!n.disabled)return;F=F.map(function(e){return e.disabled=!0,e}),n.disabled=!1;switch(n.key){case"Grouped":t.stacked(!1);break;case"Stacked":t.stacked(!0)}x.stacked=t.stacked(),C.stateChange(x),e.update()}),C.on("tooltipShow",function(e){b&&A(e,O.parentNode)}),C.on("changeState",function(r){typeof r.disabled!="undefined"&&(n.forEach(function(e,t){e.disabled=r.disabled[t]}),x.disabled=r.disabled),typeof r.stacked!="undefined"&&(t.stacked(r.stacked),x.stacked=r.stacked),e.update()})}),e}var t=n.models.multiBar(),r=n.models.axis(),i=n.models.axis(),s=n.models.legend(),o=n.models.legend(),u={top:30,right:20,bottom:50,left:60},a=null,f=null,l=n.utils.defaultColor(),c=!0,h=!0,p=!0,d=!0,v=!1,m=!0,g=!1,y=0,b=!0,w=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" on "+t+"</p>"},E,S,x={stacked:!1},T=null,N="No Data Available.",C=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),k=function(){return c?180:0},L=250;t.stacked(!1),r.orient("bottom").tickPadding(7).highlightZero(!0).showMaxMin(!1).tickFormat(function(e){return e}),i.orient(v?"right":"left").tickFormat(d3.format(",.1f")),o.updateState(!1);var A=function(s,o){var u=s.pos[0]+(o.offsetLeft||0),a=s.pos[1]+(o.offsetTop||0),f=r.tickFormat()(t.x()(s.point,s.pointIndex)),l=i.tickFormat()(t.y()(s.point,s.pointIndex)),c=w(s.series.key,f,l,s,e);n.tooltip.show([u,a],c,s.value<0?"n":"s",null,o)};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+u.left,e.pos[1]+u.top],C.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){C.tooltipHide(e)}),C.on("tooltipHide",function(){b&&n.tooltip.cleanup()}),e.dispatch=C,e.multibar=t,e.legend=s,e.xAxis=r,e.yAxis=i,d3.rebind(e,t,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","stacked","stackOffset","delay","barColor","groupSpacing"),e.options=n.utils.optionsFunc.bind(e),e.margin=function(t){return arguments.length?(u.top=typeof t.top!="undefined"?t.top:u.top,u.right=typeof t.right!="undefined"?t.right:u.right,u.bottom=typeof t.bottom!="undefined"?t.bottom:u.bottom,u.left=typeof t.left!="undefined"?t.left:u.left,e):u},e.width=function(t){return arguments.length?(a=t,e):a},e.height=function(t){return arguments.length?(f=t,e):f},e.color=function(t){return arguments.length?(l=n.utils.getColor(t),s.color(l),e):l},e.showControls=function(t){return arguments.length?(c=t,e):c},e.showLegend=function(t){return arguments.length?(h=t,e):h},e.showXAxis=function(t){return arguments.length?(p=t,e):p},e.showYAxis=function(t){return arguments.length?(d=t,e):d},e.rightAlignYAxis=function(t){return arguments.length?(v=t,i.orient(t?"right":"left"),e):v},e.reduceXTicks=function(t){return arguments.length?(m=t,e):m},e.rotateLabels=function(t){return arguments.length?(y=t,e):y},e.staggerLabels=function(t){return arguments.length?(g=t,e):g},e.tooltip=function(t){return arguments.length?(w=t,e):w},e.tooltips=function(t){return arguments.length?(b=t,e):b},e.tooltipContent=function(t){return arguments.length?(w=t,e):w},e.state=function(t){return arguments.length?(x=t,e):x},e.defaultState=function(t){return arguments.length?(T=t,e):T},e.noData=function(t){return arguments.length?(N=t,e):N},e.transitionDuration=function(t){return arguments.length?(L=t,e):L},e},n.models.multiBarHorizontal=function(){"use strict";function e(n){return n.each(function(e){var n=r-t.left-t.right,s=i-t.top-t.bottom,b=d3.select(this);d&&(e=d3.layout.stack().offset("zero").values(function(e){return e.values}).y(f)(e)),e.forEach(function(e,t){e.values.forEach(function(e){e.series=t})}),d&&e[0].values.map(function(t,n){var r=0,i=0;e.map(function(e){var t=e.values[n];t.size=Math.abs(t.y),t.y<0?(t.y1=i-t.size,i-=t.size):(t.y1=r,r+=t.size)})});var k=w&&E?[]:e.map(function(e){return e.values.map(function(e,t){return{x:a(e,t),y:f(e,t),y0:e.y0,y1:e.y1}})});o.domain(w||d3.merge(k).map(function(e){return e.x})).rangeBands(S||[0,s],.1),u.domain(E||d3.extent(d3.merge(k).map(function(e){return d?e.y>0?e.y1+e.y:e.y1:e.y}).concat(l))),v&&!d?u.range(x||[u.domain()[0]<0?g:0,n-(u.domain()[1]>0?g:0)]):u.range(x||[0,n]),N=N||o,C=C||d3.scale.linear().domain(u.domain()).range([u(0),u(0)]);var L=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([e]),A=L.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal"),O=A.append("defs"),M=A.append("g"),_=L.select("g");M.append("g").attr("class","nv-groups"),L.attr("transform","translate("+t.left+","+t.top+")");var D=L.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e,t){return t});D.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),D.exit().transition().style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),D.attr("class",function(e,t){return"nv-group nv-series-"+t}).classed("hover",function(e){return e.hover}).style("fill",function(e,t){return c(e,t)}).style("stroke",function(e,t){return c(e,t)}),D.transition().style("stroke-opacity",1).style("fill-opacity",.75);var P=D.selectAll("g.nv-bar").data(function(e){return e.values});P.exit().remove();var H=P.enter().append("g").attr("transform",function(t,n,r){return"translate("+C(d?t.y0:0)+","+(d?0:r*o.rangeBand()/e.length+o(a(t,n)))+")"});H.append("rect").attr("width",0).attr("height",o.rangeBand()/(d?1:e.length)),P.on("mouseover",function(t,n){d3.select(this).classed("hover",!0),T.elementMouseover({value:f(t,n),point:t,series:e[t.series],pos:[u(f(t,n)+(d?t.y0:0)),o(a(t,n))+o.rangeBand()*(d?e.length/2:t.series+.5)/e.length],pointIndex:n,seriesIndex:t.series,e:d3.event})}).on("mouseout",function(t,n){d3.select(this).classed("hover",!1),T.elementMouseout({value:f(t,n),point:t,series:e[t.series],pointIndex:n,seriesIndex:t.series,e:d3.event})}).on("click",function(t,n){T.elementClick({value:f(t,n),point:t,series:e[t.series],pos:[o(a(t,n))+o.rangeBand()*(d?e.length/2:t.series+.5)/e.length,u(f(t,n)+(d?t.y0:0))],pointIndex:n,seriesIndex:t.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(t,n){T.elementDblClick({value:f(t,n),point:t,series:e[t.series],pos:[o(a(t,n))+o.rangeBand()*(d?e.length/2:t.series+.5)/e.length,u(f(t,n)+(d?t.y0:0))],pointIndex:n,seriesIndex:t.series,e:d3.event}),d3.event.stopPropagation()}),H.append("text"),v&&!d?(P.select("text").attr("text-anchor",function(e,t){return f(e,t)<0?"end":"start"}).attr("y",o.rangeBand()/(e.length*2)).attr("dy",".32em").text(function(e,t){return y(f(e,t))}),P.transition().select("text").attr("x",function(e,t){return f(e,t)<0?-4:u(f(e,t))-u(0)+4})):P.selectAll("text").text(""),m&&!d?(H.append("text").classed("nv-bar-label",!0),P.select("text.nv-bar-label").attr("text-anchor",function(e,t){return f(e,t)<0?"start":"end"}).attr("y",o.rangeBand()/(e.length*2)).attr("dy",".32em").text(function(e,t){return a(e,t)}),P.transition().select("text.nv-bar-label").attr("x",function(e,t){return f(e,t)<0?u(0)-u(f(e,t))+4:-4})):P.selectAll("text.nv-bar-label").text(""),P.attr("class",function(e,t){return f(e,t)<0?"nv-bar negative":"nv-bar positive"}),h&&(p||(p=e.map(function(){return!0})),P.style("fill",function(e,t,n){return d3.rgb(h(e,t)).darker(p.map(function(e,t){return t}).filter(function(e,t){return!p[t]})[n]).toString()}).style("stroke",function(e,t,n){return d3.rgb(h(e,t)).darker(p.map(function(e,t){return t}).filter(function(e,t){return!p[t]})[n]).toString()})),d?P.transition().attr("transform",function(e,t){return"translate("+u(e.y1)+","+o(a(e,t))+")"}).select("rect").attr("width",function(e,t){return Math.abs(u(f(e,t)+e.y0)-u(e.y0))}).attr("height",o.rangeBand()):P.transition().attr("transform",function(t,n){return"translate("+(f(t,n)<0?u(f(t,n)):u(0))+","+(t.series*o.rangeBand()/e.length+o(a(t,n)))+")"}).select("rect").attr("height",o.rangeBand()/e.length).attr("width",function(e,t){return Math.max(Math.abs(u(f(e,t))-u(0)),1)}),N=o.copy(),C=u.copy()}),e}var t={top:0,right:0,bottom:0,left:0},r=960,i=500,s=Math.floor(Math.random()*1e4),o=d3.scale.ordinal(),u=d3.scale.linear(),a=function(e){return e.x},f=function(e){return e.y},l=[0],c=n.utils.defaultColor(),h=null,p,d=!1,v=!1,m=!1,g=60,y=d3.format(",.2f"),b=1200,w,E,S,x,T=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),N,C;return e.dispatch=T,e.options=n.utils.optionsFunc.bind(e),e.x=function(t){return arguments.length?(a=t,e):a},e.y=function(t){return arguments.length?(f=t,e):f},e.margin=function(n){return arguments.length?(t.top=typeof n.top!="undefined"?n.top:t.top,t.right=typeof n.right!="undefined"?n.right:t.right,t.bottom=typeof n.bottom!="undefined"?n.bottom:t.bottom,t.left=typeof n.left!="undefined"?n.left:t.left,e):t},e.width=function(t){return arguments.length?(r=t,e):r},e.height=function(t){return arguments.length?(i=t,e):i},e.xScale=function(t){return arguments.length?(o=t,e):o},e.yScale=function(t){return arguments.length?(u=t,e):u},e.xDomain=function(t){return arguments.length?(w=t,e):w},e.yDomain=function(t){return arguments.length?(E=t,e):E},e.xRange=function(t){return arguments.length?(S=t,e):S},e.yRange=function(t){return arguments.length?(x=t,e):x},e.forceY=function(t){return arguments.length?(l=t,e):l},e.stacked=function(t){return arguments.length?(d=t,e):d},e.color=function(t){return arguments.length?(c=n.utils.getColor(t),e):c},e.barColor=function(t){return arguments.length?(h=n.utils.getColor(t),e):h},e.disabled=function(t){return arguments.length?(p=t,e):p},e.id=function(t){return arguments.length?(s=t,e):s},e.delay=function(t){return arguments.length?(b=t,e):b},e.showValues=function(t){return arguments.length?(v=t,e):v},e.showBarLabels=function(t){return arguments.length?(m=t,e):m},e.valueFormat=function(t){return arguments.length?(y=t,e):y},e.valuePadding=function(t){return arguments.length?(g=t,e):g},e},n.models.multiBarHorizontalChart=function(){"use strict";function e(n){return n.each(function(n){var v=d3.select(this),g=this,k=(a||parseInt(v.style("width"))||960)-u.left-u.right,L=(f||parseInt(v.style("height"))||400)-u.top-u.bottom;e.update=function(){v.transition().duration(N).call(e)},e.container=this,w.disabled=n.map(function(e){return!!e.disabled});if(!E){var A;E={};for(A in w)w[A]instanceof Array?E[A]=w[A].slice(0):E[A]=w[A]}if(!n||!n.length||!n.filter(function(e){return e.values.length}).length){var O=v.selectAll(".nv-noData").data([S]);return O.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),O.attr("x",u.left+k/2).attr("y",u.top+L/2).text(function(e){return e}),e}v.selectAll(".nv-noData").remove(),y=t.xScale(),b=t.yScale();var M=v.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([n]),_=M.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),D=M.select("g");_.append("g").attr("class","nv-x nv-axis"),_.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),_.append("g").attr("class","nv-barsWrap"),_.append("g").attr("class","nv-legendWrap"),_.append("g").attr("class","nv-controlsWrap"),h&&(s.width(k-T()),t.barColor()&&n.forEach(function(e,t){e.color=d3.rgb("#ccc").darker(t*1.5).toString()}),D.select(".nv-legendWrap").datum(n).call(s),u.top!=s.height()&&(u.top=s.height(),L=(f||parseInt(v.style("height"))||400)-u.top-u.bottom),D.select(".nv-legendWrap").attr("transform","translate("+T()+","+ -u.top+")"));if(c){var P=[{key:"Grouped",disabled:t.stacked()},{key:"Stacked",disabled:!t.stacked()}];o.width(T()).color(["#444","#444","#444"]),D.select(".nv-controlsWrap").datum(P).attr("transform","translate(0,"+ -u.top+")").call(o)}M.attr("transform","translate("+u.left+","+u.top+")"),t.disabled(n.map(function(e){return e.disabled})).width(k).height(L).color(n.map(function(e,t){return e.color||l(e,t)}).filter(function(e,t){return!n[t].disabled}));var H=D.select(".nv-barsWrap").datum(n.filter(function(e){return!e.disabled}));H.transition().call(t);if(p){r.scale(y).ticks(L/24).tickSize(-k,0),D.select(".nv-x.nv-axis").transition().call(r);var B=D.select(".nv-x.nv-axis").selectAll("g");B.selectAll("line, text")}d&&(i.scale(b).ticks(k/100).tickSize(-L,0),D.select(".nv-y.nv-axis").attr("transform","translate(0,"+L+")"),D.select(".nv-y.nv-axis").transition().call(i)),D.select(".nv-zeroLine line").attr("x1",b(0)).attr("x2",b(0)).attr("y1",0).attr("y2",-L),s.dispatch.on("stateChange",function(t){w=t,x.stateChange(w),e.update()}),o.dispatch.on("legendClick",function(n,r){if(!n.disabled)return;P=P.map(function(e){return e.disabled=!0,e}),n.disabled=!1;switch(n.key){case"Grouped":t.stacked(!1);break;case"Stacked":t.stacked(!0)}w.stacked=t.stacked(),x.stateChange(w),e.update()}),x.on("tooltipShow",function(e){m&&C(e,g.parentNode)}),x.on("changeState",function(r){typeof r.disabled!="undefined"&&(n.forEach(function(e,t){e.disabled=r.disabled[t]}),w.disabled=r.disabled),typeof r.stacked!="undefined"&&(t.stacked(r.stacked),w.stacked=r.stacked),e.update()})}),e}var t=n.models.multiBarHorizontal(),r=n.models.axis(),i=n.models.axis(),s=n.models.legend().height(30),o=n.models.legend().height(30),u={top:30,right:20,bottom:50,left:60},a=null,f=null,l=n.utils.defaultColor(),c=!0,h=!0,p=!0,d=!0,v=!1,m=!0,g=function(e,t,n,r,i){return"<h3>"+e+" - "+t+"</h3>"+"<p>"+n+"</p>"},y,b,w={stacked:v},E=null,S="No Data Available.",x=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),T=function(){return c?180:0},N=250;t.stacked(v),r.orient("left").tickPadding(5).highlightZero(!1).showMaxMin(!1).tickFormat(function(e){return e}),i.orient("bottom").tickFormat(d3.format(",.1f")),o.updateState(!1);var C=function(s,o){var u=s.pos[0]+(o.offsetLeft||0),a=s.pos[1]+(o.offsetTop||0),f=r.tickFormat()(t.x()(s.point,s.pointIndex)),l=i.tickFormat()(t.y()(s.point,s.pointIndex)),c=g(s.series.key,f,l,s,e);n.tooltip.show([u,a],c,s.value<0?"e":"w",null,o)};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+u.left,e.pos[1]+u.top],x.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){x.tooltipHide(e)}),x.on("tooltipHide",function(){m&&n.tooltip.cleanup()}),e.dispatch=x,e.multibar=t,e.legend=s,e.xAxis=r,e.yAxis=i,d3.rebind(e,t,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","delay","showValues","showBarLabels","valueFormat","stacked","barColor"),e.options=n.utils.optionsFunc.bind(e),e.margin=function(t){return arguments.length?(u.top=typeof t.top!="undefined"?t.top:u.top,u.right=typeof t.right!="undefined"?t.right:u.right,u.bottom=typeof t.bottom!="undefined"?t.bottom:u.bottom,u.left=typeof t.left!="undefined"?t.left:u.left,e):u},e.width=function(t){return arguments.length?(a=t,e):a},e.height=function(t){return arguments.length?(f=t,e):f},e.color=function(t){return arguments.length?(l=n.utils.getColor(t),s.color(l),e):l},e.showControls=function(t){return arguments.length?(c=t,e):c},e.showLegend=function(t){return arguments.length?(h=t,e):h},e.showXAxis=function(t){return arguments.length?(p=t,e):p},e.showYAxis=function(t){return arguments.length?(d=t,e):d},e.tooltip=function(t){return arguments.length?(g=t,e):g},e.tooltips=function(t){return arguments.length?(m=t,e):m},e.tooltipContent=function(t){return arguments.length?(g=t,e):g},e.state=function(t){return arguments.length?(w=t,e):w},e.defaultState=function(t){return arguments.length?(E=t,e):E},e.noData=function(t){return arguments.length?(S=t,e):S},e.transitionDuration=function(t){return arguments.length?(N=t,e):N},e},n.models.multiChart=function(){"use strict";function e(n){return n.each(function(n){var a=d3.select(this),l=this;e.update=function(){a.transition().call(e)},e.container=this;var k=(i||parseInt(a.style("width"))||960)-t.left-t.right,L=(s||parseInt(a.style("height"))||400)-t.top-t.bottom,A=n.filter(function(e){return!e.disabled&&e.type=="line"&&e.yAxis==1}),O=n.filter(function(e){return!e.disabled&&e.type=="line"&&e.yAxis==2}),M=n.filter(function(e){return!e.disabled&&e.type=="bar"&&e.yAxis==1}),_=n.filter(function(e){return!e.disabled&&e.type=="bar"&&e.yAxis==2}),D=n.filter(function(e){return!e.disabled&&e.type=="area"&&e.yAxis==1}),P=n.filter(function(e){return!e.disabled&&e.type=="area"&&e.yAxis==2}),H=n.filter(function(e){return!e.disabled&&e.yAxis==1}).map(function(e){return e.values.map(function(e,t){return{x:e.x,y:e.y}})}),B=n.filter(function(e){return!e.disabled&&e.yAxis==2}).map(function(e){return e.values.map(function(e,t){return{x:e.x,y:e.y}})});f.domain(d3.extent(d3.merge(H.concat(B)),function(e){return e.x})).range([0,k]);var j=a.selectAll("g.wrap.multiChart").data([n]),F=j.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");F.append("g").attr("class","x axis"),F.append("g").attr("class","y1 axis"),F.append("g").attr("class","y2 axis"),F.append("g").attr("class","lines1Wrap"),F.append("g").attr("class","lines2Wrap"),F.append("g").attr("class","bars1Wrap"),F.append("g").attr("class","bars2Wrap"),F.append("g").attr("class","stack1Wrap"),F.append("g").attr("class","stack2Wrap"),F.append("g").attr("class","legendWrap");var I=j.select("g");o&&(T.width(k/2),I.select(".legendWrap").datum(n.map(function(e){return e.originalKey=e.originalKey===undefined?e.key:e.originalKey,e.key=e.originalKey+(e.yAxis==1?"":" (right axis)"),e})).call(T),t.top!=T.height()&&(t.top=T.height(),L=(s||parseInt(a.style("height"))||400)-t.top-t.bottom),I.select(".legendWrap").attr("transform","translate("+k/2+","+ -t.top+")")),v.width(k).height(L).interpolate("monotone").color(n.map(function(e,t){return e.color||r[t%r.length]}).filter(function(e,t){return!n[t].disabled&&n[t].yAxis==1&&n[t].type=="line"})),m.width(k).height(L).interpolate("monotone").color(n.map(function(e,t){return e.color||r[t%r.length]}).filter(function(e,t){return!n[t].disabled&&n[t].yAxis==2&&n[t].type=="line"})),g.width(k).height(L).color(n.map(function(e,t){return e.color||r[t%r.length]}).filter(function(e,t){return!n[t].disabled&&n[t].yAxis==1&&n[t].type=="bar"})),y.width(k).height(L).color(n.map(function(e,t){return e.color||r[t%r.length]}).filter(function(e,t){return!n[t].disabled&&n[t].yAxis==2&&n[t].type=="bar"})),b.width(k).height(L).color(n.map(function(e,t){return e.color||r[t%r.length]}).filter(function(e,t){return!n[t].disabled&&n[t].yAxis==1&&n[t].type=="area"})),w.width(k).height(L).color(n.map(function(e,t){return e.color||r[t%r.length]}).filter(function(e,t){return!n[t].disabled&&n[t].yAxis==2&&n[t].type=="area"})),I.attr("transform","translate("+t.left+","+t.top+")");var q=I.select(".lines1Wrap").datum(A),R=I.select(".bars1Wrap").datum(M),U=I.select(".stack1Wrap").datum(D),z=I.select(".lines2Wrap").datum(O),W=I.select(".bars2Wrap").datum(_),X=I.select(".stack2Wrap").datum(P),V=D.length?D.map(function(e){return e.values}).reduce(function(e,t){return e.map(function(e,n){return{x:e.x,y:e.y+t[n].y}})}).concat([{x:0,y:0}]):[],$=P.length?P.map(function(e){return e.values}).reduce(function(e,t){return e.map(function(e,n){return{x:e.x,y:e.y+t[n].y}})}).concat([{x:0,y:0}]):[];p.domain(c||d3.extent(d3.merge(H).concat(V),function(e){return e.y})).range([0,L]),d.domain(h||d3.extent(d3.merge(B).concat($),function(e){return e.y})).range([0,L]),v.yDomain(p.domain()),g.yDomain(p.domain()),b.yDomain(p.domain()),m.yDomain(d.domain()),y.yDomain(d.domain()),w.yDomain(d.domain()),D.length&&d3.transition(U).call(b),P.length&&d3.transition(X).call(w),M.length&&d3.transition(R).call(g),_.length&&d3.transition(W).call(y),A.length&&d3.transition(q).call(v),O.length&&d3.transition(z).call(m),E.ticks(k/100).tickSize(-L,0),I.select(".x.axis").attr("transform","translate(0,"+L+")"),d3.transition(I.select(".x.axis")).call(E),S.ticks(L/36).tickSize(-k,0),d3.transition(I.select(".y1.axis")).call(S),x.ticks(L/36).tickSize(-k,0),d3.transition(I.select(".y2.axis")).call(x),I.select(".y2.axis").style("opacity",B.length?1:0).attr("transform","translate("+f.range()[1]+",0)"),T.dispatch.on("stateChange",function(t){e.update()}),N.on("tooltipShow",function(e){u&&C(e,l.parentNode)})}),e}var t={top:30,right:20,bottom:50,left:60},r=d3.scale.category20().range(),i=null,s=null,o=!0,u=!0,a=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" at "+t+"</p>"},f,l,c,h,f=d3.scale.linear(),p=d3.scale.linear(),d=d3.scale.linear(),v=n.models.line().yScale(p),m=n.models.line().yScale(d),g=n.models.multiBar().stacked(!1).yScale(p),y=n.models.multiBar().stacked(!1).yScale(d),b=n.models.stackedArea().yScale(p),w=n.models.stackedArea().yScale(d),E=n.models.axis().scale(f).orient("bottom").tickPadding(5),S=n.models.axis().scale(p).orient("left"),x=n.models.axis().scale(d).orient("right"),T=n.models.legend().height(30),N=d3.dispatch("tooltipShow","tooltipHide"),C=function(t,r){var i=t.pos[0]+(r.offsetLeft||0),s=t.pos[1]+(r.offsetTop||0),o=E.tickFormat()(v.x()(t.point,t.pointIndex)),u=(t.series.yAxis==2?x:S).tickFormat()(v.y()(t.point,t.pointIndex)),f=a(t.series.key,o,u,t,e);n.tooltip.show([i,s],f,undefined,undefined,r.offsetParent)};return v.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],N.tooltipShow(e)}),v.dispatch.on("elementMouseout.tooltip",function(e){N.tooltipHide(e)}),m.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],N.tooltipShow(e)}),m.dispatch.on("elementMouseout.tooltip",function(e){N.tooltipHide(e)}),g.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],N.tooltipShow(e)}),g.dispatch.on("elementMouseout.tooltip",function(e){N.tooltipHide(e)}),y.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],N.tooltipShow(e)}),y.dispatch.on("elementMouseout.tooltip",function(e){N.tooltipHide(e)}),b.dispatch.on("tooltipShow",function(e){if(!Math.round(b.y()(e.point)*100))return setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1;e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],N.tooltipShow(e)}),b.dispatch.on("tooltipHide",function(e){N.tooltipHide(e)}),w.dispatch.on("tooltipShow",function(e){if(!Math.round(w.y()(e.point)*100))return setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1;e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],N.tooltipShow(e)}),w.dispatch.on("tooltipHide",function(e){N.tooltipHide(e)}),v.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],N.tooltipShow(e)}),v.dispatch.on("elementMouseout.tooltip",function(e){N.tooltipHide(e)}),m.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],N.tooltipShow(e)}),m.dispatch.on("elementMouseout.tooltip",function(e){N.tooltipHide(e)}),N.on("tooltipHide",function(){u&&n.tooltip.cleanup()}),e.dispatch=N,e.lines1=v,e.lines2=m,e.bars1=g,e.bars2=y,e.stack1=b,e.stack2=w,e.xAxis=E,e.yAxis1=S,e.yAxis2=x,e.options=n.utils.optionsFunc.bind(e),e.x=function(t){return arguments.length?(getX=t,v.x(t),g.x(t),e):getX},e.y=function(t){return arguments.length?(getY=t,v.y(t),g.y(t),e):getY},e.yDomain1=function(t){return arguments.length?(c=t,e):c},e.yDomain2=function(t){return arguments.length?(h=t,e):h},e.margin=function(n){return arguments.length?(t=n,e):t},e.width=function(t){return arguments.length?(i=t,e):i},e.height=function(t){return arguments.length?(s=t,e):s},e.color=function(t){return arguments.length?(r=t,T.color(t),e):r},e.showLegend=function(t){return arguments.length?(o=t,e):o},e.tooltips=function(t){return arguments.length?(u=t,e):u},e.tooltipContent=function(t){return arguments.length?(a=t,e):a},e},n.models.ohlcBar=function(){"use strict";function e(n){return n.each(function(e){var n=r-t.left-t.right,y=i-t.top-t.bottom,T=d3.select(this);o.domain(b||d3.extent(e[0].values.map(a).concat(d))),m?o.range(E||[n*.5/e[0].values.length,n*(e[0].values.length-.5)/e[0].values.length]):o.range(E||[0,n]),u.domain(w||[d3.min(e[0].values.map(p).concat(v)),d3.max(e[0].values.map(h).concat(v))]).range(S||[y,0]),o.domain()[0]===o.domain()[1]&&(o.domain()[0]?o.domain([o.domain()[0]-o.domain()[0]*.01,o.domain()[1]+o.domain()[1]*.01]):o.domain([-1,1])),u.domain()[0]===u.domain()[1]&&(u.domain()[0]?u.domain([u.domain()[0]+u.domain()[0]*.01,u.domain()[1]-u.domain()[1]*.01]):u.domain([-1,1]));var N=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([e[0].values]),C=N.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),k=C.append("defs"),L=C.append("g"),A=N.select("g");L.append("g").attr("class","nv-ticks"),N.attr("transform","translate("+t.left+","+t.top+")"),T.on("click",function(e,t){x.chartClick({data:e,index:t,pos:d3.event,id:s})}),k.append("clipPath").attr("id","nv-chart-clip-path-"+s).append("rect"),N.select("#nv-chart-clip-path-"+s+" rect").attr("width",n).attr("height",y),A.attr("clip-path",g?"url(#nv-chart-clip-path-"+s+")":"");var O=N.select(".nv-ticks").selectAll(".nv-tick").data(function(e){return e});O.exit().remove();var M=O.enter().append("path").attr("class",function(e,t,n){return(l(e,t)>c(e,t)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+t}).attr("d",function(t,r){var i=n/e[0].values.length*.9;return"m0,0l0,"+(u(l(t,r))-u(h(t,r)))+"l"+ -i/2+",0l"+i/2+",0l0,"+(u(p(t,r))-u(l(t,r)))+"l0,"+(u(c(t,r))-u(p(t,r)))+"l"+i/2+",0l"+ -i/2+",0z"}).attr("transform",function(e,t){return"translate("+o(a(e,t))+","+u(h(e,t))+")"}).on("mouseover",function(t,n){d3.select(this).classed("hover",!0),x.elementMouseover({point:t,series:e[0],pos:[o(a(t,n)),u(f(t,n))],pointIndex:n,seriesIndex:0,e:d3.event})}).on("mouseout",function(t,n){d3.select(this).classed("hover",!1),x.elementMouseout({point:t,series:e[0],pointIndex:n,seriesIndex:0,e:d3.event})}).on("click",function(e,t){x.elementClick({value:f(e,t),data:e,index:t,pos:[o(a(e,t)),u(f(e,t))],e:d3.event,id:s}),d3.event.stopPropagation()}).on("dblclick",function(e,t){x.elementDblClick({value:f(e,t),data:e,index:t,pos:[o(a(e,t)),u(f(e,t))],e:d3.event,id:s}),d3.event.stopPropagation()});O.attr("class",function(e,t,n){return(l(e,t)>c(e,t)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+t}),d3.transition(O).attr("transform",function(e,t){return"translate("+o(a(e,t))+","+u(h(e,t))+")"}).attr("d",function(t,r){var i=n/e[0].values.length*.9;return"m0,0l0,"+(u(l(t,r))-u(h(t,r)))+"l"+ -i/2+",0l"+i/2+",0l0,"+(u(p(t,r))-u(l(t,r)))+"l0,"+(u(c(t,r))-u(p(t,r)))+"l"+i/2+",0l"+ -i/2+",0z"})}),e}var t={top:0,right:0,bottom:0,left:0},r=960,i=500,s=Math.floor(Math.random()*1e4),o=d3.scale.linear(),u=d3.scale.linear(),a=function(e){return e.x},f=function(e){return e.y},l=function(e){return e.open},c=function(e){return e.close},h=function(e){return e.high},p=function(e){return e.low},d=[],v=[],m=!1,g=!0,y=n.utils.defaultColor(),b,w,E,S,x=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return e.dispatch=x,e.options=n.utils.optionsFunc.bind(e),e.x=function(t){return arguments.length?(a=t,e):a},e.y=function(t){return arguments.length?(f=t,e):f},e.open=function(t){return arguments.length?(l=t,e):l},e.close=function(t){return arguments.length?(c=t,e):c},e.high=function(t){return arguments.length?(h=t,e):h},e.low=function(t){return arguments.length?(p=t,e):p},e.margin=function(n){return arguments.length?(t.top=typeof n.top!="undefined"?n.top:t.top,t.right=typeof n.right!="undefined"?n.right:t.right,t.bottom=typeof n.bottom!="undefined"?n.bottom:t.bottom,t.left=typeof n.left!="undefined"?n.left:t.left,e):t},e.width=function(t){return arguments.length?(r=t,e):r},e.height=function(t){return arguments.length?(i=t,e):i},e.xScale=function(t){return arguments.length?(o=t,e):o},e.yScale=function(t){return arguments.length?(u=t,e):u},e.xDomain=function(t){return arguments.length?(b=t,e):b},e.yDomain=function(t){return arguments.length?(w=t,e):w},e.xRange=function(t){return arguments.length?(E=t,e):E},e.yRange=function(t){return arguments.length?(S=t,e):S},e.forceX=function(t){return arguments.length?(d=t,e):d},e.forceY=function(t){return arguments.length?(v=t,e):v},e.padData=function(t){return arguments.length?(m=t,e):m},e.clipEdge=function(t){return arguments.length?(g=t,e):g},e.color=function(t){return arguments.length?(y=n.utils.getColor(t),e):y},e.id=function(t){return arguments.length?(s=t,e):s},e},n.models.pie=function(){"use strict";function e(n){return n.each(function(e){function n(e){var t=(e.startAngle+e.endAngle)*90/Math.PI-90;return t>90?t-180:t}function u(e){e.endAngle=isNaN(e.endAngle)?0:e.endAngle,e.startAngle=isNaN(e.startAngle)?0:e.startAngle,g||(e.innerRadius=0);var t=d3.interpolate(this._current,e);return this._current=t(0),function(e){return _(t(e))}}function l(e){e.innerRadius=0;var t=d3.interpolate({startAngle:0,endAngle:0},e);return function(e){return _(t(e))}}var x=r-t.left-t.right,T=i-t.top-t.bottom,N=Math.min(x,T)/2,C=N-N/5,k=d3.select(this),L=k.selectAll(".nv-wrap.nv-pie").data(e),A=L.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+a),O=A.append("g"),M=L.select("g");O.append("g").attr("class","nv-pie"),O.append("g").attr("class","nv-pieLabels"),L.attr("transform","translate("+t.left+","+t.top+")"),M.select(".nv-pie").attr("transform","translate("+x/2+","+T/2+")"),M.select(".nv-pieLabels").attr("transform","translate("+x/2+","+T/2+")"),k.on("click",function(e,t){S.chartClick({data:e,index:t,pos:d3.event,id:a})});var _=d3.svg.arc().outerRadius(C);b&&_.startAngle(b),w&&_.endAngle(w),g&&_.innerRadius(N*E);var D=d3.layout.pie().sort(null).value(function(e){return e.disabled?0:o(e)}),P=L.select(".nv-pie").selectAll(".nv-slice").data(D),H=L.select(".nv-pieLabels").selectAll(".nv-label").data(D);P.exit().remove(),H.exit().remove();var B=P.enter().append("g").attr("class","nv-slice").on("mouseover",function(e,t){d3.select(this).classed("hover",!0),S.elementMouseover({label:s(e.data),value:o(e.data),point:e.data,pointIndex:t,pos:[d3.event.pageX,d3.event.pageY],id:a})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),S.elementMouseout({label:s(e.data),value:o(e.data),point:e.data,index:t,id:a})}).on("click",function(e,t){S.elementClick({label:s(e.data),value:o(e.data),point:e.data,index:t,pos:d3.event,id:a}),d3.event.stopPropagation()}).on("dblclick",function(e,t){S.elementDblClick({label:s(e.data),value:o(e.data),point:e.data,index:t,pos:d3.event,id:a}),d3.event.stopPropagation()});P.attr("fill",function(e,t){return f(e,t)}).attr("stroke",function(e,t){return f(e,t)});var j=B.append("path").each(function(e){this._current=e});P.select("path").transition().attr("d",_).attrTween("d",u);if(c){var F=d3.svg.arc().innerRadius(0);h&&(F=_),p&&(F=d3.svg.arc().outerRadius(_.outerRadius())),H.enter().append("g").classed("nv-label",!0).each(function(e,t){var n=d3.select(this);n.attr("transform",function(e){if(y){e.outerRadius=C+10,e.innerRadius=C+15;var t=(e.startAngle+e.endAngle)/2*(180/Math.PI);return(e.startAngle+e.endAngle)/2<Math.PI?t-=90:t+=90,"translate("+F.centroid(e)+") rotate("+t+")"}return e.outerRadius=N+10,e.innerRadius=N+15,"translate("+F.centroid(e)+")"}),n.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3),n.append("text").style("text-anchor",y?(e.startAngle+e.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});var I={},q=14,R=140,U=function(e){return Math.floor(e[0]/R)*R+","+Math.floor(e[1]/q)*q};H.transition().attr("transform",function(e){if(y){e.outerRadius=C+10,e.innerRadius=C+15;var t=(e.startAngle+e.endAngle)/2*(180/Math.PI);return(e.startAngle+e.endAngle)/2<Math.PI?t-=90:t+=90,"translate("+F.centroid(e)+") rotate("+t+")"}e.outerRadius=N+10,e.innerRadius=N+15;var n=F.centroid(e),r=U(n);return I[r]&&(n[1]-=q),I[U(n)]=!0,"translate("+n+")"}),H.select(".nv-label text").style("text-anchor",y?(d.startAngle+d.endAngle)/2<Math.PI?"start":"end":"middle").text(function(e,t){var n=(e.endAngle-e.startAngle)/(2*Math.PI),r={key:s(e.data),value:o(e.data),percent:d3.format("%")(n)};return e.value&&n>m?r[v]:""})}}),e}var t={top:0,right:0,bottom:0,left:0},r=500,i=500,s=function(e){return e.x},o=function(e){return e.y},u=function(e){return e.description},a=Math.floor(Math.random()*1e4),f=n.utils.defaultColor(),l=d3.format(",.2f"),c=!0,h=!0,p=!1,v="key",m=.02,g=!1,y=!1,b=!1,w=!1,E=.5,S=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return e.dispatch=S,e.options=n.utils.optionsFunc.bind(e),e.margin=function(n){return arguments.length?(t.top=typeof n.top!="undefined"?n.top:t.top,t.right=typeof n.right!="undefined"?n.right:t.right,t.bottom=typeof n.bottom!="undefined"?n.bottom:t.bottom,t.left=typeof n.left!="undefined"?n.left:t.left,e):t},e.width=function(t){return arguments.length?(r=t,e):r},e.height=function(t){return arguments.length?(i=t,e):i},e.values=function(t){return n.log("pie.values() is no longer supported."),e},e.x=function(t){return arguments.length?(s=t,e):s},e.y=function(t){return arguments.length?(o=d3.functor(t),e):o},e.description=function(t){return arguments.length?(u=t,e):u},e.showLabels=function(t){return arguments.length?(c=t,e):c},e.labelSunbeamLayout=function(t){return arguments.length?(y=t,e):y},e.donutLabelsOutside=function(t){return arguments.length?(p=t,e):p},e.pieLabelsOutside=function(t){return arguments.length?(h=t,e):h},e.labelType=function(t){return arguments.length?(v=t,v=v||"key",e):v},e.donut=function(t){return arguments.length?(g=t,e):g},e.donutRatio=function(t){return arguments.length?(E=t,e):E},e.startAngle=function(t){return arguments.length?(b=t,e):b},e.endAngle=function(t){return arguments.length?(w=t,e):w},e.id=function(t){return arguments.length?(a=t,e):a},e.color=function(t){return arguments.length?(f=n.utils.getColor(t),e):f},e.valueFormat=function(t){return arguments.length?(l=t,e):l},e.labelThreshold=function(t){return arguments.length?(m=t,e):m},e},n.models.pieChart=function(){"use strict";function e(n){return n.each(function(n){var a=d3.select(this),f=this,l=(s||parseInt(a.style("width"))||960)-i.left-i.right,v=(o||parseInt(a.style("height"))||400)-i.top-i.bottom;e.update=function(){a.transition().call(e)},e.container=this,c.disabled=n.map(function(e){return!!e.disabled});if(!h){var m;h={};for(m in c)c[m]instanceof Array?h[m]=c[m].slice(0):h[m]=c[m]}if(!n||!n.length){var g=a.selectAll(".nv-noData").data([p]);return g.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),g.attr("x",i.left+l/2).attr("y",i.top+v/2).text(function(e){return e}),e}a.selectAll(".nv-noData").remove();var y=a.selectAll("g.nv-wrap.nv-pieChart").data([n]),b=y.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),w=y.select("g");b.append("g").attr("class","nv-pieWrap"),b.append("g").attr("class","nv-legendWrap"),u&&(r.width(l).key(t.x()),y.select(".nv-legendWrap").datum(n).call(r),i.top!=r.height()&&(i.top=r.height(),v=(o||parseInt(a.style("height"))||400)-i.top-i.bottom),y.select(".nv-legendWrap").attr("transform","translate(0,"+ -i.top+")")),y.attr("transform","translate("+i.left+","+i.top+")"),t.width(l).height(v);var E=w.select(".nv-pieWrap").datum([n]);d3.transition(E).call(t),r.dispatch.on("stateChange",function(t){c=t,d.stateChange(c),e.update()}),t.dispatch.on("elementMouseout.tooltip",function(e){d.tooltipHide(e)}),d.on("changeState",function(t){typeof t.disabled!="undefined"&&(n.forEach(function(e,n){e.disabled=t.disabled[n]}),c.disabled=t.disabled),e.update()})}),e}var t=n.models.pie(),r=n.models.legend(),i={top:30,right:20,bottom:20,left:20},s=null,o=null,u=!0,a=n.utils.defaultColor(),f=!0,l=function(e,t,n,r){return"<h3>"+e+"</h3>"+"<p>"+t+"</p>"},c={},h=null,p="No Data Available.",d=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),v=function(r,i){var s=t.description()(r.point)||t.x()(r.point),o=r.pos[0]+(i&&i.offsetLeft||0),u=r.pos[1]+(i&&i.offsetTop||0),a=t.valueFormat()(t.y()(r.point)),f=l(s,a,r,e);n.tooltip.show([o,u],f,r.value<0?"n":"s",null,i)};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+i.left,e.pos[1]+i.top],d.tooltipShow(e)}),d.on("tooltipShow",function(e){f&&v(e)}),d.on("tooltipHide",function(){f&&n.tooltip.cleanup()}),e.legend=r,e.dispatch=d,e.pie=t,d3.rebind(e,t,"valueFormat","values","x","y","description","id","showLabels","donutLabelsOutside","pieLabelsOutside","labelType","donut","donutRatio","labelThreshold"),e.options=n.utils.optionsFunc.bind(e),e.margin=function(t){return arguments.length?(i.top=typeof t.top!="undefined"?t.top:i.top,i.right=typeof t.right!="undefined"?t.right:i.right,i.bottom=typeof t.bottom!="undefined"?t.bottom:i.bottom,i.left=typeof t.left!="undefined"?t.left:i.left,e):i},e.width=function(t){return arguments.length?(s=t,e):s},e.height=function(t){return arguments.length?(o=t,e):o},e.color=function(i){return arguments.length?(a=n.utils.getColor(i),r.color(a),t.color(a),e):a},e.showLegend=function(t){return arguments.length?(u=t,e):u},e.tooltips=function(t){return arguments.length?(f=t,e):f},e.tooltipContent=function(t){return arguments.length?(l=t,e):l},e.state=function(t){return arguments.length?(c=t,e):c},e.defaultState=function(t){return arguments.length?(h=t,e):h},e.noData=function(t){return arguments.length?(p=t,e):p},e},n.models.scatter=function(){"use strict";function e(q){return q.each(function(e){function q(){if(!y)return!1;var n,s=d3.merge(e.map(function(e,t){return e.values.map(function(e,n){var r=l(e,n),i=c(e,n);return[u(r)+Math.random()*1e-7,a(i)+Math.random()*1e-7,t,n,e]}).filter(function(e,t){return w(e[4],t)})}));if(P===!0){if(T){var f=X.select("defs").selectAll(".nv-point-clips").data([o]).enter();f.append("clipPath").attr("class","nv-point-clips").attr("id","nv-points-clip-"+o);var h=X.select("#nv-points-clip-"+o).selectAll("circle").data(s);h.enter().append("circle").attr("r",N),h.exit().remove(),h.attr("cx",function(e){return e[0]}).attr("cy",function(e){return e[1]}),X.select(".nv-point-paths").attr("clip-path","url(#nv-points-clip-"+o+")")}s.length&&(s.push([u.range()[0]-20,a.range()[0]-20,null,null]),s.push([u.range()[1]+20,a.range()[1]+20,null,null]),s.push([u.range()[0]-20,a.range()[0]+20,null,null]),s.push([u.range()[1]+20,a.range()[1]-20,null,null]));var p=d3.geom.polygon([[-10,-10],[-10,i+10],[r+10,i+10],[r+10,-10]]),d=d3.geom.voronoi(s).map(function(e,t){return{data:p.clip(e),series:s[t][2],point:s[t][3]}}),v=X.select(".nv-point-paths").selectAll("path").data(d);v.enter().append("path").attr("class",function(e,t){return"nv-path-"+t}),v.exit().remove(),v.attr("d",function(e){return e.data.length===0?"M 0 0":"M"+e.data.join("L")+"Z"});var m=function(n,r){if(I)return 0;var i=e[n.series];if(typeof i=="undefined")return;var s=i.values[n.point];r({point:s,series:i,pos:[u(l(s,n.point))+t.left,a(c(s,n.point))+t.top],seriesIndex:n.series,pointIndex:n.point})};v.on("click",function(e){m(e,D.elementClick)}).on("mouseover",function(e){m(e,D.elementMouseover)}).on("mouseout",function(e,t){m(e,D.elementMouseout)})}else X.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(n,r){if(I||!e[n.series])return 0;var i=e[n.series],s=i.values[r];D.elementClick({point:s,series:i,pos:[u(l(s,r))+t.left,a(c(s,r))+t.top],seriesIndex:n.series,pointIndex:r})}).on("mouseover",function(n,r){if(I||!e[n.series])return 0;var i=e[n.series],s=i.values[r];D.elementMouseover({point:s,series:i,pos:[u(l(s,r))+t.left,a(c(s,r))+t.top],seriesIndex:n.series,pointIndex:r})}).on("mouseout",function(t,n){if(I||!e[t.series])return 0;var r=e[t.series],i=r.values[n];D.elementMouseout({point:i,series:r,seriesIndex:t.series,pointIndex:n})});I=!1}var R=r-t.left-t.right,U=i-t.top-t.bottom,z=d3.select(this);e.forEach(function(e,t){e.values.forEach(function(e){e.series=t})});var W=C&&k&&O?[]:d3.merge(e.map(function(e){return e.values.map(function(e,t){return{x:l(e,t),y:c(e,t),size:h(e,t)}})}));u.domain(C||d3.extent(W.map(function(e){return e.x}).concat(v))),E&&e[0]?u.range(L||[(R*S+R)/(2*e[0].values.length),R-R*(1+S)/(2*e[0].values.length)]):u.range(L||[0,R]),a.domain(k||d3.extent(W.map(function(e){return e.y}).concat(m))).range(A||[U,0]),f.domain(O||d3.extent(W.map(function(e){return e.size}).concat(g))).range(M||[16,256]);if(u.domain()[0]===u.domain()[1]||a.domain()[0]===a.domain()[1])_=!0;u.domain()[0]===u.domain()[1]&&(u.domain()[0]?u.domain([u.domain()[0]-u.domain()[0]*.01,u.domain()[1]+u.domain()[1]*.01]):u.domain([-1,1])),a.domain()[0]===a.domain()[1]&&(a.domain()[0]?a.domain([a.domain()[0]-a.domain()[0]*.01,a.domain()[1]+a.domain()[1]*.01]):a.domain([-1,1])),isNaN(u.domain()[0])&&u.domain([-1,1]),isNaN(a.domain()[0])&&a.domain([-1,1]),H=H||u,B=B||a,j=j||f;var X=z.selectAll("g.nv-wrap.nv-scatter").data([e]),V=X.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+o+(_?" nv-single-point":"")),$=V.append("defs"),J=V.append("g"),K=X.select("g");J.append("g").attr("class","nv-groups"),J.append("g").attr("class","nv-point-paths"),X.attr("transform","translate("+t.left+","+t.top+")"),$.append("clipPath").attr("id","nv-edge-clip-"+o).append("rect"),X.select("#nv-edge-clip-"+o+" rect").attr("width",R).attr("height",U>0?U:0),K.attr("clip-path",x?"url(#nv-edge-clip-"+o+")":""),I=!0;var Q=X.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});Q.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),Q.exit().remove(),Q.attr("class",function(e,t){return"nv-group nv-series-"+t}).classed("hover",function(e){return e.hover}),Q.transition().style("fill",function(e,t){return s(e,t)}).style("stroke",function(e,t){return s(e,t)}).style("stroke-opacity",1).style("fill-opacity",.5);if(d){var G=Q.selectAll("circle.nv-point").data(function(e){return e.values},b);G.enter().append("circle").style("fill",function(e,t){return e.color}).style("stroke",function(e,t){return e.color}).attr("cx",function(e,t){return n.utils.NaNtoZero(H(l(e,t)))}).attr("cy",function(e,t){return n.utils.NaNtoZero(B(c(e,t)))}).attr("r",function(e,t){return Math.sqrt(f(h(e,t))/Math.PI)}),G.exit().remove(),Q.exit().selectAll("path.nv-point").transition().attr("cx",function(e,t){return n.utils.NaNtoZero(u(l(e,t)))}).attr("cy",function(e,t){return n.utils.NaNtoZero(a(c(e,t)))}).remove(),G.each(function(e,t){d3.select(this).classed("nv-point",!0).classed("nv-point-"+t,!0).classed("hover",!1)}),G.transition().attr("cx",function(e,t){return n.utils.NaNtoZero(u(l(e,t)))}).attr("cy",function(e,t){return n.utils.NaNtoZero(a(c(e,t)))}).attr("r",function(e,t){return Math.sqrt(f(h(e,t))/Math.PI)})}else{var G=Q.selectAll("path.nv-point").data(function(e){return e.values});G.enter().append("path").style("fill",function(e,t){return e.color}).style("stroke",function(e,t){return e.color}).attr("transform",function(e,t){return"translate("+H(l(e,t))+","+B(c(e,t))+")"}).attr("d",d3.svg.symbol().type(p).size(function(e,t){return f(h(e,t))})),G.exit().remove(),Q.exit().selectAll("path.nv-point").transition().attr("transform",function(e,t){return"translate("+u(l(e,t))+","+a(c(e,t))+")"}).remove(),G.each(function(e,t){d3.select(this).classed("nv-point",!0).classed("nv-point-"+t,!0).classed("hover",!1)}),G.transition().attr("transform",function(e,t){return"translate("+u(l(e,t))+","+a(c(e,t))+")"}).attr("d",d3.svg.symbol().type(p).size(function(e,t){return f(h(e,t))}))}clearTimeout(F),F=setTimeout(q,300),H=u.copy(),B=a.copy(),j=f.copy()}),e}var t={top:0,right:0,bottom:0,left:0},r=960,i=500,s=n.utils.defaultColor(),o=Math.floor(Math.random()*1e5),u=d3.scale.linear(),a=d3.scale.linear(),f=d3.scale.linear(),l=function(e){return e.x},c=function(e){return e.y},h=function(e){return e.size||1},p=function(e){return e.shape||"circle"},d=!0,v=[],m=[],g=[],y=!0,b=null,w=function(e){return!e.notActive},E=!1,S=.1,x=!1,T=!0,N=function(){return 25},C=null,k=null,L=null,A=null,O=null,M=null,_=!1,D=d3.dispatch("elementClick","elementMouseover","elementMouseout"),P=!0,H,B,j,F,I=!1;return e.clearHighlights=function(){d3.selectAll(".nv-chart-"+o+" .nv-point.hover").classed("hover",!1)},e.highlightPoint=function(e,t,n){d3.select(".nv-chart-"+o+" .nv-series-"+e+" .nv-point-"+t).classed("hover",n)},D.on("elementMouseover.point",function(t){y&&e.highlightPoint(t.seriesIndex,t.pointIndex,!0)}),D.on("elementMouseout.point",function(t){y&&e.highlightPoint(t.seriesIndex,t.pointIndex,!1)}),e.dispatch=D,e.options=n.utils.optionsFunc.bind(e),e.x=function(t){return arguments.length?(l=d3.functor(t),e):l},e.y=function(t){return arguments.length?(c=d3.functor(t),e):c},e.size=function(t){return arguments.length?(h=d3.functor(t),e):h},e.margin=function(n){return arguments.length?(t.top=typeof n.top!="undefined"?n.top:t.top,t.right=typeof n.right!="undefined"?n.right:t.right,t.bottom=typeof n.bottom!="undefined"?n.bottom:t.bottom,t.left=typeof n.left!="undefined"?n.left:t.left,e):t},e.width=function(t){return arguments.length?(r=t,e):r},e.height=function(t){return arguments.length?(i=t,e):i},e.xScale=function(t){return arguments.length?(u=t,e):u},e.yScale=function(t){return arguments.length?(a=t,e):a},e.zScale=function(t){return arguments.length?(f=t,e):f},e.xDomain=function(t){return arguments.length?(C=t,e):C},e.yDomain=function(t){return arguments.length?(k=t,e):k},e.sizeDomain=function(t){return arguments.length?(O=t,e):O},e.xRange=function(t){return arguments.length?(L=t,e):L},e.yRange=function(t){return arguments.length?(A=t,e):A},e.sizeRange=function(t){return arguments.length?(M=t,e):M},e.forceX=function(t){return arguments.length?(v=t,e):v},e.forceY=function(t){return arguments.length?(m=t,e):m},e.forceSize=function(t){return arguments.length?(g=t,e):g},e.interactive=function(t){return arguments.length?(y=t,e):y},e.pointKey=function(t){return arguments.length?(b=t,e):b},e.pointActive=function(t){return arguments.length?(w=t,e):w},e.padData=function(t){return arguments.length?(E=t,e):E},e.padDataOuter=function(t){return arguments.length?(S=t,e):S},e.clipEdge=function(t){return arguments.length?(x=t,e):x},e.clipVoronoi=function(t){return arguments.length?(T=t,e):T},e.useVoronoi=function(t){return arguments.length?(P=t,P===!1&&(T=!1),e):P},e.clipRadius=function(t){return arguments.length?(N=t,e):N},e.color=function(t){return arguments.length?(s=n.utils.getColor(t),e):s},e.shape=function(t){return arguments.length?(p=t,e):p},e.onlyCircles=function(t){return arguments.length?(d=t,e):d},e.id=function(t){return arguments.length?(o=t,e):o},e.singlePoint=function(t){return arguments.length?(_=t,e):_},e},n.models.scatterChart=function(){"use strict";function e(n){return n.each(function(n){function k(){if(N)return V.select(".nv-point-paths").style("pointer-events","all"),!1;V.select(".nv-point-paths").style("pointer-events","none");var e=d3.mouse(this);p.distortion(T).focus(e[0]),d.distortion(T).focus(e[1]),V.select(".nv-scatterWrap").call(t),w&&V.select(".nv-x.nv-axis").call(r),E&&V.select(".nv-y.nv-axis").call(i),V.select(".nv-distributionX").datum(n.filter(function(e){return!e.disabled})).call(u),V.select(".nv-distributionY").datum(n.filter(function(e){return!e.disabled})).call(a)}var L=d3.select(this),A=this,I=(l||parseInt(L.style("width"))||960)-f.left-f.right,q=(c||parseInt(L.style("height"))||400)-f.top-f.bottom;e.update=function(){L.transition().duration(P).call(e)},e.container=this,O.disabled=n.map(function(e){return!!e.disabled});if(!M){var R;M={};for(R in O)O[R]instanceof Array?M[R]=O[R].slice(0):M[R]=O[R]}if(!n||!n.length||!n.filter(function(e){return e.values.length}).length){var U=L.selectAll(".nv-noData").data([D]);return U.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),U.attr("x",f.left+I/2).attr("y",f.top+q/2).text(function(e){return e}),e}L.selectAll(".nv-noData").remove(),H=H||p,B=B||d;var z=L.selectAll("g.nv-wrap.nv-scatterChart").data([n]),W=z.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+t.id()),X=W.append("g"),V=z.select("g");X.append("rect").attr("class","nvd3 nv-background"),X.append("g").attr("class","nv-x nv-axis"),X.append("g").attr("class","nv-y nv-axis"),X.append("g").attr("class","nv-scatterWrap"),X.append("g").attr("class","nv-distWrap"),X.append("g").attr("class","nv-legendWrap"),X.append("g").attr("class","nv-controlsWrap");if(b){var $=x?I/2:I;s.width($),z.select(".nv-legendWrap").datum(n).call(s),f.top!=s.height()&&(f.top=s.height(),q=(c||parseInt(L.style("height"))||400)-f.top-f.bottom),z.select(".nv-legendWrap").attr("transform","translate("+(I-$)+","+ -f.top+")")}x&&(o.width(180).color(["#444"]),V.select(".nv-controlsWrap").datum(F).attr("transform","translate(0,"+ -f.top+")").call(o)),z.attr("transform","translate("+f.left+","+f.top+")"),S&&V.select(".nv-y.nv-axis").attr("transform","translate("+I+",0)"),t.width(I).height(q).color(n.map(function(e,t){return e.color||h(e,t)}).filter(function(e,t){return!n[t].disabled})),v!==0&&t.xDomain(null),m!==0&&t.yDomain(null),z.select(".nv-scatterWrap").datum(n.filter(function(e){return!e.disabled})).call(t);if(v!==0){var J=p.domain()[1]-p.domain()[0];t.xDomain([p.domain()[0]-v*J,p.domain()[1]+v*J])}if(m!==0){var K=d.domain()[1]-d.domain()[0];t.yDomain([d.domain()[0]-m*K,d.domain()[1]+m*K])}(m!==0||v!==0)&&z.select(".nv-scatterWrap").datum(n.filter(function(e){return!e.disabled})).call(t),w&&(r.scale(p).ticks(r.ticks()&&r.ticks().length?r.ticks():I/100).tickSize(-q,0),V.select(".nv-x.nv-axis").attr("transform","translate(0,"+d.range()[0]+")").call(r)),E&&(i.scale(d).ticks(i.ticks()&&i.ticks().length?i.ticks():q/36).tickSize(-I,0),V.select(".nv-y.nv-axis").call(i)),g&&(u.getData(t.x()).scale(p).width(I).color(n.map(function(e,t){return e.color||h(e,t)}).filter(function(e,t){return!n[t].disabled})),X.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),V.select(".nv-distributionX").attr("transform","translate(0,"+d.range()[0]+")").datum(n.filter(function(e){return!e.disabled})).call(u)),y&&(a.getData(t.y()).scale(d).width(q).color(n.map(function(e,t){return e.color||h(e,t)}).filter(function(e,t){return!n[t].disabled})),X.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),V.select(".nv-distributionY").attr("transform","translate("+(S?I:-a.size())+",0)").datum(n.filter(function(e){return!e.disabled})).call(a)),d3.fisheye&&(V.select(".nv-background").attr("width",I).attr("height",q),V.select(".nv-background").on("mousemove",k),V.select(".nv-background").on("click",function(){N=!N}),t.dispatch.on("elementClick.freezeFisheye",function(){N=!N})),o.dispatch.on("legendClick",function(n,s){n.disabled=!n.disabled,T=n.disabled?0:2.5,V.select(".nv-background").style("pointer-events",n.disabled?"none":"all"),V.select(".nv-point-paths").style("pointer-events",n.disabled?"all":"none"),n.disabled?(p.distortion(T).focus(0),d.distortion(T).focus(0),V.select(".nv-scatterWrap").call(t),V.select(".nv-x.nv-axis").call(r),V.select(".nv-y.nv-axis").call(i)):N=!1,e.update()}),s.dispatch.on("stateChange",function(t){O.disabled=t.disabled,_.stateChange(O),e.update()}),t.dispatch.on("elementMouseover.tooltip",function(e){d3.select(".nv-chart-"+t.id()+" .nv-series-"+e.seriesIndex+" .nv-distx-"+e.pointIndex).attr("y1",function(t,n){return e.pos[1]-q}),d3.select(".nv-chart-"+t.id()+" .nv-series-"+e.seriesIndex+" .nv-disty-"+e.pointIndex).attr("x2",e.pos[0]+u.size()),e.pos=[e.pos[0]+f.left,e.pos[1]+f.top],_.tooltipShow(e)}),_.on("tooltipShow",function(e){C&&j(e,A.parentNode)}),_.on("changeState",function(t){typeof t.disabled!="undefined"&&(n.forEach(function(e,n){e.disabled=t.disabled[n]}),O.disabled=t.disabled),e.update()}),H=p.copy(),B=d.copy()}),e}var t=n.models.scatter(),r=n.models.axis(),i=n.models.axis(),s=n.models.legend(),o=n.models.legend(),u=n.models.distribution(),a=n.models.distribution(),f={top:30,right:20,bottom:50,left:75},l=null,c=null,h=n.utils.defaultColor(),p=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):t.xScale(),d=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):t.yScale(),v=0,m=0,g=!1,y=!1,b=!0,w=!0,E=!0,S=!1,x=!!d3.fisheye,T=0,N=!1,C=!0,k=function(e,t,n){return"<strong>"+t+"</strong>"},L=function(e,t,n){return"<strong>"+n+"</strong>"},A=null,O={},M=null,_=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),D="No Data Available.",P=250;t.xScale(p).yScale(d),r.orient("bottom").tickPadding(10),i.orient(S?"right":"left").tickPadding(10),u.axis("x"),a.axis("y"),o.updateState(!1);var H,B,j=function(s,o){var u=s.pos[0]+(o.offsetLeft||0),a=s.pos[1]+(o.offsetTop||0),l=s.pos[0]+(o.offsetLeft||0),c=d.range()[0]+f.top+(o.offsetTop||0),h=p.range()[0]+f.left+(o.offsetLeft||0),v=s.pos[1]+(o.offsetTop||0),m=r.tickFormat()(t.x()(s.point,s.pointIndex)),g=i.tickFormat()(t.y()(s.point,s.pointIndex));k!=null&&n.tooltip.show([l,c],k(s.series.key,m,g,s,e),"n",1,o,"x-nvtooltip"),L!=null&&n.tooltip.show([h,v],L(s.series.key,m,g,s,e),"e",1,o,"y-nvtooltip"),A!=null&&n.tooltip.show([u,a],A(s.series.key,m,g,s,e),s.value<0?"n":"s",null,o)},F=[{key:"Magnify",disabled:!0}];return t.dispatch.on("elementMouseout.tooltip",function(e){_.tooltipHide(e),d3.select(".nv-chart-"+t.id()+" .nv-series-"+e.seriesIndex+" .nv-distx-"+e.pointIndex).attr("y1",0),d3.select(".nv-chart-"+t.id()+" .nv-series-"+e.seriesIndex+" .nv-disty-"+e.pointIndex).attr("x2",a.size())}),_.on("tooltipHide",function(){C&&n.tooltip.cleanup()}),e.dispatch=_,e.scatter=t,e.legend=s,e.controls=o,e.xAxis=r,e.yAxis=i,e.distX=u,e.distY=a,d3.rebind(e,t,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi"),e.options=n.utils.optionsFunc.bind(e),e.margin=function(t){return arguments.length?(f.top=typeof t.top!="undefined"?t.top:f.top,f.right=typeof t.right!="undefined"?t.right:f.right,f.bottom=typeof t.bottom!="undefined"?t.bottom:f.bottom,f.left=typeof t.left!="undefined"?t.left:f.left,e):f},e.width=function(t){return arguments.length?(l=t,e):l},e.height=function(t){return arguments.length?(c=t,e):c},e.color=function(t){return arguments.length?(h=n.utils.getColor(t),s.color(h),u.color(h),a.color(h),e):h},e.showDistX=function(t){return arguments.length?(g=t,e):g},e.showDistY=function(t){return arguments.length?(y=t,e):y},e.showControls=function(t){return arguments.length?(x=t,e):x},e.showLegend=function(t){return arguments.length?(b=t,e):b},e.showXAxis=function(t){return arguments.length?(w=t,e):w},e.showYAxis=function(t){return arguments.length?(E=t,e):E},e.rightAlignYAxis=function(t){return arguments.length?(S=t,i.orient(t?"right":"left"),e):S},e.fisheye=function(t){return arguments.length?(T=t,e):T},e.xPadding=function(t){return arguments.length?(v=t,e):v},e.yPadding=function(t){return arguments.length?(m=t,e):m},e.tooltips=function(t){return arguments.length?(C=t,e):C},e.tooltipContent=function(t){return arguments.length?(A=t,e):A},e.tooltipXContent=function(t){return arguments.length?(k=t,e):k},e.tooltipYContent=function(t){return arguments.length?(L=t,e):L},e.state=function(t){return arguments.length?(O=t,e):O},e.defaultState=function(t){return arguments.length?(M=t,e):M},e.noData=function(t){return arguments.length?(D=t,e):D},e.transitionDuration=function(t){return arguments.length?(P=t,e):P},e},n.models.scatterPlusLineChart=function(){"use strict";function e(n){return n.each(function(n){function N(){if(x)return W.select(".nv-point-paths").style("pointer-events","all"),!1;W.select(".nv-point-paths").style("pointer-events","none");var e=d3.mouse(this);p.distortion(S).focus(e[0]),d.distortion(S).focus(e[1]),W.select(".nv-scatterWrap").datum(n.filter(function(e){return!e.disabled})).call(t),y&&W.select(".nv-x.nv-axis").call(r),b&&W.select(".nv-y.nv-axis").call(i),W.select(".nv-distributionX").datum(n.filter(function(e){return!e.disabled})).call(u),W.select(".nv-distributionY").datum(n.filter(function(e){return!e.disabled})).call(a)}var C=d3.select(this),k=this,j=(l||parseInt(C.style("width"))||960)-f.left-f.right,F=(c||parseInt(C.style("height"))||400)-f.top-f.bottom;e.update=function(){C.transition().duration(_).call(e)},e.container=this,L.disabled=n.map(function(e){return!!e.disabled});if(!A){var I;A={};for(I in L)L[I]instanceof Array?A[I]=L[I].slice(0):A[I]=L[I]}if(!n||!n.length||!n.filter(function(e){return e.values.length}).length){var q=C.selectAll(".nv-noData").data([M]);return q.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),q.attr("x",f.left+j/2).attr("y",f.top+F/2).text(function(e){return e}),e}C.selectAll(".nv-noData").remove(),p=t.xScale(),d=t.yScale(),D=D||p,P=P||d;var R=C.selectAll("g.nv-wrap.nv-scatterChart").data([n]),U=R.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+t.id()),z=U.append("g"),W=R.select("g");z.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none"),z.append("g").attr("class","nv-x nv-axis"),z.append("g").attr("class","nv-y nv-axis"),z.append("g").attr("class","nv-scatterWrap"),z.append("g").attr("class","nv-regressionLinesWrap"),z.append("g").attr("class","nv-distWrap"),z.append("g").attr("class","nv-legendWrap"),z.append("g").attr("class","nv-controlsWrap"),R.attr("transform","translate("+f.left+","+f.top+")"),w&&W.select(".nv-y.nv-axis").attr("transform","translate("+j+",0)"),g&&(s.width(j/2),R.select(".nv-legendWrap").datum(n).call(s),f.top!=s.height()&&(f.top=s.height(),F=(c||parseInt(C.style("height"))||400)-f.top-f.bottom),R.select(".nv-legendWrap").attr("transform","translate("+j/2+","+ -f.top+")")),E&&(o.width(180).color(["#444"]),W.select(".nv-controlsWrap").datum(B).attr("transform","translate(0,"+ -f.top+")").call(o)),t.width(j).height(F).color(n.map(function(e,t){return e.color||h(e,t)}).filter(function(e,t){return!n[t].disabled})),R.select(".nv-scatterWrap").datum(n.filter(function(e){return!e.disabled})).call(t),R.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+t.id()+")");var X=R.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(e){return e});X.enter().append("g").attr("class","nv-regLines");var V=X.selectAll(".nv-regLine").data(function(e){return[e]}),$=V.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0);V.transition().attr("x1",p.range()[0]).attr("x2",p.range()[1]).attr("y1",function(e,t){return d(p.domain()[0]*e.slope+e.intercept)}).attr("y2",function(e,t){return d(p.domain()[1]*e.slope+e.intercept)}).style("stroke",function(e,t,n){return h(e,n)}).style("stroke-opacity",function(e,t){return e.disabled||typeof e.slope=="undefined"||typeof e.intercept=="undefined"?0:1}),y&&(r.scale(p).ticks(r.ticks()?r.ticks():j/100).tickSize(-F,0),W.select(".nv-x.nv-axis").attr("transform","translate(0,"+d.range()[0]+")").call(r)),b&&(i.scale(d).ticks(i.ticks()?i.ticks():F/36).tickSize(-j,0),W.select(".nv-y.nv-axis").call(i)),v&&(u.getData(t.x()).scale(p).width(j).color(n.map(function(e,t){return e.color||h(e,t)}).filter(function(e,t){return!n[t].disabled})),z.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),W.select(".nv-distributionX").attr("transform","translate(0,"+d.range()[0]+")").datum(n.filter(function(e){return!e.disabled})).call(u)),m&&(a.getData(t.y()).scale(d).width(F).color(n.map(function(e,t){return e.color||h(e,t)}).filter(function(e,t){return!n[t].disabled})),z.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),W.select(".nv-distributionY").attr("transform","translate("+(w?j:-a.size())+",0)").datum(n.filter(function(e){return!e.disabled})).call(a)),d3.fisheye&&(W.select(".nv-background").attr("width",j).attr("height",F),W.select(".nv-background").on("mousemove",N),W.select(".nv-background").on("click",function(){x=!x}),t.dispatch.on("elementClick.freezeFisheye",function(){x=!x})),o.dispatch.on("legendClick",function(n,s){n.disabled=!n.disabled,S=n.disabled?0:2.5,W.select(".nv-background").style("pointer-events",n.disabled?"none":"all"),W.select(".nv-point-paths").style("pointer-events",n.disabled?"all":"none"),n.disabled?(p.distortion(S).focus(0),d.distortion(S).focus(0),W.select(".nv-scatterWrap").call(t),W.select(".nv-x.nv-axis").call(r),W.select(".nv-y.nv-axis").call(i)):x=!1,e.update()}),s.dispatch.on("stateChange",function(t){L=t,O.stateChange(L),e.update()}),t.dispatch.on("elementMouseover.tooltip",function(e){d3.select(".nv-chart-"+t.id()+" .nv-series-"+e.seriesIndex+" .nv-distx-"+e.pointIndex).attr("y1",e.pos[1]-F),d3.select(".nv-chart-"+t.id()+" .nv-series-"+e.seriesIndex+" .nv-disty-"+e.pointIndex).attr("x2",e.pos[0]+u.size()),e.pos=[e.pos[0]+f.left,e.pos[1]+f.top],O.tooltipShow(e)}),O.on("tooltipShow",function(e){T&&H(e,k.parentNode)}),O.on("changeState",function(t){typeof t.disabled!="undefined"&&(n.forEach(function(e,n){e.disabled=t.disabled[n]}),L.disabled=t.disabled),e.update()}),D=p.copy(),P=d.copy()}),e}var t=n.models.scatter(),r=n.models.axis(),i=n.models.axis(),s=n.models.legend(),o=n.models.legend(),u=n.models.distribution(),a=n.models.distribution(),f={top:30,right:20,bottom:50,left:75},l=null,c=null,h=n.utils.defaultColor(),p=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):t.xScale(),d=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):t.yScale(),v=!1,m=!1,g=!0,y=!0,b=!0,w=!1,E=!!d3.fisheye,S=0,x=!1,T=!0,N=function(e,t,n){return"<strong>"+t+"</strong>"},C=function(e,t,n){return"<strong>"+n+"</strong>"},k=function(e,t,n,r){return"<h3>"+e+"</h3>"+"<p>"+r+"</p>"},L={},A=null,O=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),M="No Data Available.",_=250;t.xScale(p).yScale(d),r.orient("bottom").tickPadding(10),i.orient(w?"right":"left").tickPadding(10),u.axis("x"),a.axis("y"),o.updateState(!1);var D,P,H=function(s,o){var u=s.pos[0]+(o.offsetLeft||0),a=s.pos[1]+(o.offsetTop||0),l=s.pos[0]+(o.offsetLeft||0),c=d.range()[0]+f.top+(o.offsetTop||0),h=p.range()[0]+f.left+(o.offsetLeft||0),v=s.pos[1]+(o.offsetTop||0),m=r.tickFormat()(t.x()(s.point,s.pointIndex)),g=i.tickFormat()(t.y()(s.point,s.pointIndex));N!=null&&n.tooltip.show([l,c],N(s.series.key,m,g,s,e),"n",1,o,"x-nvtooltip"),C!=null&&n.tooltip.show([h,v],C(s.series.key,m,g,s,e),"e",1,o,"y-nvtooltip"),k!=null&&n.tooltip.show([u,a],k(s.series.key,m,g,s.point.tooltip,s,e),s.value<0?"n":"s",null,o)},B=[{key:"Magnify",disabled:!0}];return t.dispatch.on("elementMouseout.tooltip",function(e){O.tooltipHide(e),d3.select(".nv-chart-"+t.id()+" .nv-series-"+e.seriesIndex+" .nv-distx-"+e.pointIndex).attr("y1",0),d3.select(".nv-chart-"+t.id()+" .nv-series-"+e.seriesIndex+" .nv-disty-"+e.pointIndex).attr("x2",a.size())}),O.on("tooltipHide",function(){T&&n.tooltip.cleanup()}),e.dispatch=O,e.scatter=t,e.legend=s,e.controls=o,e.xAxis=r,e.yAxis=i,e.distX=u,e.distY=a,d3.rebind(e,t,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi"),e.options=n.utils.optionsFunc.bind(e),e.margin=function(t){return arguments.length?(f.top=typeof t.top!="undefined"?t.top:f.top,f.right=typeof t.right!="undefined"?t.right:f.right,f.bottom=typeof t.bottom!="undefined"?t.bottom:f.bottom,f.left=typeof t.left!="undefined"?t.left:f.left,e):f},e.width=function(t){return arguments.length?(l=t,e):l},e.height=function(t){return arguments.length?(c=t,e):c},e.color=function(t){return arguments.length?(h=n.utils.getColor(t),s.color(h),u.color(h),a.color(h),e):h},e.showDistX=function(t){return arguments.length?(v=t,e):v},e.showDistY=function(t){return arguments.length?(m=t,e):m},e.showControls=function(t){return arguments.length?(E=t,e):E},e.showLegend=function(t){return arguments.length?(g=t,e):g},e.showXAxis=function(t){return arguments.length?(y=t,e):y},e.showYAxis=function(t){return arguments.length?(b=t,e):b},e.rightAlignYAxis=function(t){return arguments.length?(w=t,i.orient(t?"right":"left"),e):w},e.fisheye=function(t){return arguments.length?(S=t,e):S},e.tooltips=function(t){return arguments.length?(T=t,e):T},e.tooltipContent=function(t){return arguments.length?(k=t,e):k},e.tooltipXContent=function(t){return arguments.length?(N=t,e):N},e.tooltipYContent=function(t){return arguments.length?(C=t,e):C},e.state=function(t){return arguments.length?(L=t,e):L},e.defaultState=function(t){return arguments.length?(A=t,e):A},e.noData=function(t){return arguments.length?(M=t,e):M},e.transitionDuration=function(t){return arguments.length?(_=t,e):_},e},n.models.sparkline=function(){"use strict";function e(n){return n.each(function(e){var n=r-t.left-t.right,s=i-t.top-t.bottom,v=d3.select(this);o.domain(c||d3.extent(e,a)).range(p||[0,n]),u.domain(h||d3.extent(e,f)).range(d||[s,0]);var m=v.selectAll("g.nv-wrap.nv-sparkline").data([e]),g=m.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline"),y=g.append("g"),b=m.select("g");m.attr("transform","translate("+t.left+","+t.top+")");var w=m.selectAll("path").data(function(e){return[e]});w.enter().append("path"),w.exit().remove(),w.style("stroke",function(e,t){return e.color||l(e,t)}).attr("d",d3.svg.line().x(function(e,t){return o(a(e,t))}).y(function(e,t){return u(f(e,t))}));var E=m.selectAll("circle.nv-point").data(function(e){function t(t){if(t!=-1){var n=e[t];return n.pointIndex=t,n}return null}var n=e.map(function(e,t){return f(e,t)}),r=t(n.lastIndexOf(u.domain()[1])),i=t(n.indexOf(u.domain()[0])),s=t(n.length-1);return[i,r,s].filter(function(e){return e!=null})});E.enter().append("circle"),E.exit().remove(),E.attr("cx",function(e,t){return o(a(e,e.pointIndex))}).attr("cy",function(e,t){return u(f(e,e.pointIndex))}).attr("r",2).attr("class",function(e,t){return a(e,e.pointIndex)==o.domain()[1]?"nv-point nv-currentValue":f(e,e.pointIndex)==u.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})}),e}var t={top:2,right:0,bottom:2,left:0},r=400,i=32,s=!0,o=d3.scale.linear(),u=d3.scale.linear(),a=function(e){return e.x},f=function(e){return e.y},l=n.utils.getColor(["#000"]),c,h,p,d;return e.options=n.utils.optionsFunc.bind(e),e.margin=function(n){return arguments.length?(t.top=typeof n.top!="undefined"?n.top:t.top,t.right=typeof n.right!="undefined"?n.right:t.right,t.bottom=typeof n.bottom!="undefined"?n.bottom:t.bottom,t.left=typeof n.left!="undefined"?n.left:t.left,e):t},e.width=function(t){return arguments.length?(r=t,e):r},e.height=function(t){return arguments.length?(i=t,e):i},e.x=function(t){return arguments.length?(a=d3.functor(t),e):a},e.y=function(t){return arguments.length?(f=d3.functor(t),e):f},e.xScale=function(t){return arguments.length?(o=t,e):o},e.yScale=function(t){return arguments.length?(u=t,e):u},e.xDomain=function(t){return arguments.length?(c=t,e):c},e.yDomain=function(t){return arguments.length?(h=t,e):h},e.xRange=function(t){return arguments.length?(p=t,e):p},e.yRange=function(t){return arguments.length?(d=t,e):d},e.animate=function(t){return arguments.length?(s=t,e):s},e.color=function(t){return arguments.length?(l=n.utils.getColor(t),e):l},e},n.models.sparklinePlus=function(){"use strict";function e(n){return n.each(function(h){function m(){if(f)return;var e=C.selectAll(".nv-hoverValue").data(a),n=e.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);e.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove(),e.attr("transform",function(e){return"translate("+o(t.x()(h[e],e))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1);if(!a.length)return;n.append("line").attr("x1",0).attr("y1",-r.top).attr("x2",0).attr("y2",w),n.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-r.top).attr("text-anchor","end").attr("dy",".9em"),C.select(".nv-hoverValue .nv-xValue").text(l(t.x()(h[a[0]],a[0]))),n.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-r.top).attr("text-anchor","start").attr("dy",".9em"),C.select(".nv-hoverValue .nv-yValue").text(c(t.y()(h[a[0]],a[0])))}function g(){function e(e,n){var r=Math.abs(t.x()(e[0],0)-n),i=0;for(var s=0;s<e.length;s++)Math.abs(t.x()(e[s],s)-n)<r&&(r=Math.abs(t.x()(e[s],s)-n),i=s);return i}if(f)return;var n=d3.mouse(this)[0]-r.left;a=[e(h,Math.round(o.invert(n)))],m()}var y=d3.select(this),b=(i||parseInt(y.style("width"))||960)-r.left-r.right,w=(s||parseInt(y.style("height"))||400)-r.top-r.bottom;e.update=function(){e(n)},e.container=this;if(!h||!h.length){var E=y.selectAll(".nv-noData").data([v]);return E.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),E.attr("x",r.left+b/2).attr("y",r.top+w/2).text(function(e){return e}),e}y.selectAll(".nv-noData").remove();var S=t.y()(h[h.length-1],h.length-1);o=t.xScale(),u=t.yScale();var x=y.selectAll("g.nv-wrap.nv-sparklineplus").data([h]),T=x.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus"),N=T.append("g"),C=x.select("g");N.append("g").attr("class","nv-sparklineWrap"),N.append("g").attr("class","nv-valueWrap"),N.append("g").attr("class","nv-hoverArea"),x.attr("transform","translate("+r.left+","+r.top+")");var k=C.select(".nv-sparklineWrap");t.width(b).height(w),k.call(t);var L=C.select(".nv-valueWrap"),A=L.selectAll(".nv-currentValue").data([S]);A.enter().append("text").attr("class","nv-currentValue").attr("dx",d?-8:8).attr("dy",".9em").style("text-anchor",d?"end":"start"),A.attr("x",b+(d?r.right:0)).attr("y",p?function(e){return u(e)}:0).style("fill",t.color()(h[h.length-1],h.length-1)).text(c(S)),N.select(".nv-hoverArea").append("rect").on("mousemove",g).on("click",function(){f=!f}).on("mouseout",function(){a=[],m()}),C.select(".nv-hoverArea rect").attr("transform",function(e){return"translate("+ -r.left+","+ -r.top+")"}).attr("width",b+r.left+r.right).attr("height",w+r.top)}),e}var t=n.models.sparkline(),r={top:15,right:100,bottom:10,left:50},i=null,s=null,o,u,a=[],f=!1,l=d3.format(",r"),c=d3.format(",.2f"),h=!0,p=!0,d=!1,v="No Data Available.";return e.sparkline=t,d3.rebind(e,t,"x","y","xScale","yScale","color"),e.options=n.utils.optionsFunc.bind(e),e.margin=function(t){return arguments.length?(r.top=typeof t.top!="undefined"?t.top:r.top,r.right=typeof t.right!="undefined"?t.right:r.right,r.bottom=typeof t.bottom!="undefined"?t.bottom:r.bottom,r.left=typeof t.left!="undefined"?t.left:r.left,e):r},e.width=function(t){return arguments.length?(i=t,e):i},e.height=function(t){return arguments.length?(s=t,e):s},e.xTickFormat=function(t){return arguments.length?(l=t,e):l},e.yTickFormat=function(t){return arguments.length?(c=t,e):c},e.showValue=function(t){return arguments.length?(h=t,e):h},e.alignValue=function(t){return arguments.length?(p=t,e):p},e.rightAlignValue=function(t){return arguments.length?(d=t,e):d},e.noData=function(t){return arguments.length?(v=t,e):v},e},n.models.stackedArea=function(){"use strict";function e(n){return n.each(function(n){var f=r-t.left-t.right,y=i-t.top-t.bottom,b=d3.select(this);d=m.xScale(),v=m.yScale();var w=n;n.forEach(function(e,t){e.seriesIndex=t,e.values=e.values.map(function(e,n){return e.index=n,e.seriesIndex=t,e})});var E=n.filter(function(e){return!e.disabled});n=d3.layout.stack().order(c).offset(l).values(function(e){return e.values}).x(u).y(a).out(function(e,t,n){var r=a(e)===0?0:n;e.display={y:r,y0:t}})(E);var S=b.selectAll("g.nv-wrap.nv-stackedarea").data([n]),x=S.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),T=x.append("defs"),N=x.append("g"),C=S.select("g");N.append("g").attr("class","nv-areaWrap"),N.append("g").attr("class","nv-scatterWrap"),S.attr("transform","translate("+t.left+","+t.top+")"),m.width(f).height(y).x(u).y(function(e){return e.display.y+e.display.y0}).forceY([0]).color(n.map(function(e,t){return e.color||s(e,e.seriesIndex)}));var k=C.select(".nv-scatterWrap").datum(n);k.call(m),T.append("clipPath").attr("id","nv-edge-clip-"+o).append("rect"),S.select("#nv-edge-clip-"+o+" rect").attr("width",f).attr("height",y),C.attr("clip-path",p?"url(#nv-edge-clip-"+o+")":"");var L=d3.svg.area().x(function(e,t){return d(u(e,t))}).y0(function(e){return v(e.display.y0)}).y1(function(e){return v(e.display.y+e.display.y0)}).interpolate(h),A=d3.svg.area().x(function(e,t){return d(u(e,t))}).y0(function(e){return v(e.display.y0)}).y1(function(e){return v(e.display.y0)}),O=C.select(".nv-areaWrap").selectAll("path.nv-area").data(function(e){return e});O.enter().append("path").attr("class",function(e,t){return"nv-area nv-area-"+t}).attr("d",function(e,t){return A(e.values,e.seriesIndex)}).on("mouseover",function(e,t){d3.select(this).classed("hover",!0),g.areaMouseover({point:e,series:e.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:e.seriesIndex})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),g.areaMouseout({point:e,series:e.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:e.seriesIndex})}).on("click",function(e,t){d3.select(this).classed("hover",!1),g.areaClick({point:e,series:e.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:e.seriesIndex})}),O.exit().remove(),O.style("fill",function(e,t){return e.color||s(e,e.seriesIndex)}).style("stroke",function(e,t){return e.color||s(e,e.seriesIndex)}),O.transition().attr("d",function(e,t){return L(e.values,t)}),m.dispatch.on("elementMouseover.area",function(e){C.select(".nv-chart-"+o+" .nv-area-"+e.seriesIndex).classed("hover",!0)}),m.dispatch.on("elementMouseout.area",function(e){C.select(".nv-chart-"+o+" .nv-area-"+e.seriesIndex).classed("hover",!1)}),e.d3_stackedOffset_stackPercent=function(e){var t=e.length,n=e[0].length,r=1/t,i,s,o,u=[];for(s=0;s<n;++s){for(i=0,o=0;i<w.length;i++)o+=a(w[i].values[s]);if(o)for(i=0;i<t;i++)e[i][s][1]/=o;else for(i=0;i<t;i++)e[i][s][1]=r}for(s=0;s<n;++s)u[s]=0;return u}}),e}var t={top:0,right:0,bottom:0,left:0},r=960,i=500,s=n.utils.defaultColor(),o=Math.floor(Math.random()*1e5),u=function(e){return e.x},a=function(e){return e.y},f="stack",l="zero",c="default",h="linear",p=!1,d,v,m=n.models.scatter(),g=d3.dispatch("tooltipShow","tooltipHide","areaClick","areaMouseover","areaMouseout");return m.size(2.2).sizeDomain([2.2,2.2]),m.dispatch.on("elementClick.area",function(e){g.areaClick(e)}),m.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],g.tooltipShow(e)}),m.dispatch.on("elementMouseout.tooltip",function(e){g.tooltipHide(e)}),e.dispatch=g,e.scatter=m,d3.rebind(e,m,"interactive","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","highlightPoint","clearHighlights"),e.options=n.utils.optionsFunc.bind(e),e.x=function(t){return arguments.length?(u=d3.functor(t),e):u},e.y=function(t){return arguments.length?(a=d3.functor(t),e):a},e.margin=function(n){return arguments.length?(t.top=typeof n.top!="undefined"?n.top:t.top,t.right=typeof n.right!="undefined"?n.right:t.right,t.bottom=typeof n.bottom!="undefined"?n.bottom:t.bottom,t.left=typeof n.left!="undefined"?n.left:t.left,e):t},e.width=function(t){return arguments.length?(r=t,e):r},e.height=function(t){return arguments.length?(i=t,e):i},e.clipEdge=function(t){return arguments.length?(p=t,e):p},e.color=function(t){return arguments.length?(s=n.utils.getColor(t),e):s},e.offset=function(t){return arguments.length?(l=t,e):l},e.order=function(t){return arguments.length?(c=t,e):c},e.style=function(t){if(!arguments.length)return f;f=t;switch(f){case"stack":e.offset("zero"),e.order("default");break;case"stream":e.offset("wiggle"),e.order("inside-out");break;case"stream-center":e.offset("silhouette"),e.order("inside-out");break;case"expand":e.offset("expand"),e.order("default");break;case"stack_percent":e.offset(e.d3_stackedOffset_stackPercent),e.order("default")}return e},e.interpolate=function(t){return arguments.length?(h=t,e):h},e},n.models.stackedAreaChart=function(){"use strict";function e(b){return b.each(function(b){var _=d3.select(this),D=this,P=(f||parseInt(_.style("width"))||960)-a.left-a.right,H=(l||parseInt(_.style("height"))||400)-a.top-a.bottom;e.update=function(){_.transition().duration(O).call(e)},e.container=this,x.disabled=b.map(function(e){return!!e.disabled});if(!T){var B;T={};for(B in x)x[B]instanceof Array?T[B]=x[B].slice(0):T[B]=x[B]}if(!b||!b.length||!b.filter(function(e){return e.values.length}).length){var j=_.selectAll(".nv-noData").data([N]);return j.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),j.attr("x",a.left+P/2).attr("y",a.top+H/2).text(function(e){return e}),e}_.selectAll(".nv-noData").remove(),w=t.xScale(),E=t.yScale();var F=_.selectAll("g.nv-wrap.nv-stackedAreaChart").data([b]),I=F.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),q=F.select("g");I.append("rect").style("opacity",0),I.append("g").attr("class","nv-x nv-axis"),I.append("g").attr("class","nv-y nv-axis"),I.append("g").attr("class","nv-stackedWrap"),I.append("g").attr("class","nv-legendWrap"),I.append("g").attr("class","nv-controlsWrap"),I.append("g").attr("class","nv-interactive"),q.select("rect").attr("width",P).attr("height",H);if(p){var R=h?P-k:P;s.width(R),q.select(".nv-legendWrap").datum(b).call(s),a.top!=s.height()&&(a.top=s.height(),H=(l||parseInt(_.style("height"))||400)-a.top-a.bottom),q.select(".nv-legendWrap").attr("transform","translate("+(P-R)+","+ -a.top+")")}if(h){var U=[{key:A.stacked||"Stacked",metaKey:"Stacked",disabled:t.style()!="stack",style:"stack"},{key:A.stream||"Stream",metaKey:"Stream",disabled:t.style()!="stream",style:"stream"},{key:A.expanded||"Expanded",metaKey:"Expanded",disabled:t.style()!="expand",style:"expand"},{key:A.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:t.style()!="stack_percent",style:"stack_percent"}];k=L.length/3*260,U=U.filter(function(e){return L.indexOf(e.metaKey)!==-1}),o.width(k).color(["#444","#444","#444"]),q.select(".nv-controlsWrap").datum(U).call(o),a.top!=Math.max(o.height(),s.height())&&(a.top=Math.max(o.height(),s.height()),H=(l||parseInt(_.style("height"))||400)-a.top-a.bottom),q.select(".nv-controlsWrap").attr("transform","translate(0,"+ -a.top+")")}F.attr("transform","translate("+a.left+","+a.top+")"),m&&q.select(".nv-y.nv-axis").attr("transform","translate("+P+",0)"),g&&(u.width(P).height(H).margin({left:a.left,top:a.top}).svgContainer(_).xScale(w),F.select(".nv-interactive").call(u)),t.width(P).height(H);var z=q.select(".nv-stackedWrap").datum(b);z.transition().call(t),d&&(r.scale(w).ticks(P/100).tickSize(-H,0),q.select(".nv-x.nv-axis").attr("transform","translate(0,"+H+")"),q.select(".nv-x.nv-axis").transition().duration(0).call(r)),v&&(i.scale(E).ticks(t.offset()=="wiggle"?0:H/36).tickSize(-P,0).setTickFormat(t.style()=="expand"||t.style()=="stack_percent"?d3.format("%"):S),q.select(".nv-y.nv-axis").transition().duration(0).call(i)),t.dispatch.on("areaClick.toggle",function(t){b.filter(function(e){return!e.disabled}).length===1?b.forEach(function(e){e.disabled=!1}):b.forEach(function(e,n){e.disabled=n!=t.seriesIndex}),x.disabled=b.map(function(e){return!!e.disabled}),C.stateChange(x),e.update()}),s.dispatch.on("stateChange",function(t){x.disabled=t.disabled,C.stateChange(x),e.update()}),o.dispatch.on("legendClick",function(n,r){if(!n.disabled)return;U=U.map(function(e){return e.disabled=!0,e}),n.disabled=!1,t.style(n.style),x.style=t.style(),C.stateChange(x),e.update()}),u.dispatch.on("elementMousemove",function(s){t.clearHighlights();var o,f,l,h=[];b.filter(function(e,t){return e.seriesIndex=t,!e.disabled}).forEach(function(r,i){f=n.interactiveBisect(r.values,s.pointXValue,e.x()),t.highlightPoint(i,f,!0);var u=r.values[f];if(typeof u=="undefined")return;typeof o=="undefined"&&(o=u),typeof l=="undefined"&&(l=e.xScale()(e.x()(u,f)));var a=t.style()=="expand"?u.display.y:e.y()(u,f);h.push({key:r.key,value:a,color:c(r,r.seriesIndex),stackedValue:u.display})}),h.reverse();if(h.length>2){var p=e.yScale().invert(s.mouseY),d=Infinity,v=null;h.forEach(function(e,t){p=Math.abs(p);var n=Math.abs(e.stackedValue.y0),r=Math.abs(e.stackedValue.y);if(p>=n&&p<=r+n){v=t;return}}),v!=null&&(h[v].highlight=!0)}var m=r.tickFormat()(e.x()(o,f)),g=t.style()=="expand"?function(e,t){return d3.format(".1%")(e)}:function(e,t){return i.tickFormat()(e)};u.tooltip.position({left:l+a.left,top:s.mouseY+a.top}).chartContainer(D.parentNode).enabled(y).valueFormatter(g).data({value:m,series:h})(),u.renderGuideLine(l)}),u.dispatch.on("elementMouseout",function(e){C.tooltipHide(),t.clearHighlights()}),C.on("tooltipShow",function(e){y&&M(e,D.parentNode)}),C.on("changeState",function(n){typeof n.disabled!="undefined"&&b.length===n.disabled.length&&(b.forEach(function(e,t){e.disabled=n.disabled[t]}),x.disabled=n.disabled),typeof n.style!="undefined"&&t.style(n.style),e.update()})}),e}var t=n.models.stackedArea(),r=n.models.axis(),i=n.models.axis(),s=n.models.legend(),o=n.models.legend(),u=n.interactiveGuideline(),a={top:30,right:25,bottom:50,left:60},f=null,l=null,c=n.utils.defaultColor(),h=!0,p=!0,d=!0,v=!0,m=!1,g=!1,y=!0,b=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" on "+t+"</p>"},w,E,S=d3.format(",.2f"),x={style:t.style()},T=null,N="No Data Available.",C=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),k=250,L=["Stacked","Stream","Expanded"],A={},O=250;r.orient("bottom").tickPadding(7),i.orient(m?"right":"left"),o.updateState(!1);var M=function(s,o){var u=s.pos[0]+(o.offsetLeft||0),a=s.pos[1]+(o.offsetTop||0),f=r.tickFormat()(t.x()(s.point,s.pointIndex)),l=i.tickFormat()(t.y()(s.point,s.pointIndex)),c=b(s.series.key,f,l,s,e);n.tooltip.show([u,a],c,s.value<0?"n":"s",null,o)};return t.dispatch.on("tooltipShow",function(e){e.pos=[e.pos[0]+a.left,e.pos[1]+a.top],C.tooltipShow(e)}),t.dispatch.on("tooltipHide",function(e){C.tooltipHide(e)}),C.on("tooltipHide",function(){y&&n.tooltip.cleanup()}),e.dispatch=C,e.stacked=t,e.legend=s,e.controls=o,e.xAxis=r,e.yAxis=i,e.interactiveLayer=u,d3.rebind(e,t,"x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","sizeDomain","interactive","useVoronoi","offset","order","style","clipEdge","forceX","forceY","forceSize","interpolate"),e.options=n.utils.optionsFunc.bind(e),e.margin=function(t){return arguments.length?(a.top=typeof t.top!="undefined"?t.top:a.top,a.right=typeof t.right!="undefined"?t.right:a.right,a.bottom=typeof t.bottom!="undefined"?t.bottom:a.bottom,a.left=typeof t.left!="undefined"?t.left:a.left,e):a},e.width=function(t){return arguments.length?(f=t,e):f},e.height=function(t){return arguments.length?(l=t,e):l},e.color=function(r){return arguments.length?(c=n.utils.getColor(r),s.color(c),t.color(c),e):c},e.showControls=function(t){return arguments.length?(h=t,e):h},e.showLegend=function(t){return arguments.length?(p=t,e):p},e.showXAxis=function(t){return arguments.length?(d=t,e):d},e.showYAxis=function(t){return arguments.length?(v=t,e):v},e.rightAlignYAxis=function(t){return arguments.length?(m=t,i.orient(t?"right":"left"),e):m},e.useInteractiveGuideline=function(t){return arguments.length?(g=t,t===!0&&(e.interactive(!1),e.useVoronoi(!1)),e):g},e.tooltip=function(t){return arguments.length?(b=t,e):b},e.tooltips=function(t){return arguments.length?(y=t,e):y},e.tooltipContent=function(t){return arguments.length?(b=t,e):b},e.state=function(t){return arguments.length?(x=t,e):x},e.defaultState=function(t){return arguments.length?(T=t,e):T},e.noData=function(t){return arguments.length?(N=t,e):N},e.transitionDuration=function(t){return arguments.length?(O=t,e):O},e.controlsData=function(t){return arguments.length?(L=t,e):L},e.controlLabels=function(t){return arguments.length?typeof t!="object"?A:(A=t,e):A},i.setTickFormat=i.tickFormat,i.tickFormat=function(e){return arguments.length?(S=e,i):S},e}})()